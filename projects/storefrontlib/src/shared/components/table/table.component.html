<ng-container *ngIf="tableData">
  <div class="desktop mode">
    <table class="table cx-table">
      <thead>
        <th scope="col" *ngFor="let column of columns">
          {{ column.value }}
        </th>
      </thead>
      <tbody>
        <tr *ngFor="let row of tableData">
          <td class="cx-code" *ngFor="let column of columns">
            <ng-container
              *ngTemplateOutlet="
                content;
                context: { data: { row: row, column: column } }
              "
            ></ng-container>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="mobile mode">
    <div class="cx-row" *ngFor="let row of tableData">
      <div *ngFor="let column of columns">
        <span class="cx-label">{{ column.value }}: </span>
        <ng-container
          *ngTemplateOutlet="
            content;
            context: { data: { row: row, column: column } }
          "
        ></ng-container>
      </div>
    </div>
  </div>
</ng-container>

<!--
  Template for rendering checkbox input if `checkBox` property exists in column data.

   {
     key: 'assigned',
     value: Column header',
     checkBox: true
   }

  Checkbox value can be setup as follows in tableData object:

  {
    ...,
    assigned: true
  }
-->
<ng-template #checkbox let-row="row" let-column="column">
  <ng-container *ngIf="column?.checkBox && row">
    <input
      type="checkbox"
      [checked]="row[column.key]"
      (change)="onToggle($event, row, column.key)"
    />
  </ng-container>
</ng-template>

<!--
  Template for rendering button if `button` property exists in column data.

  {
    key: 'delete',
    value: 'Column header',
    button: true,
    cxIcon?: ICON_TYPE.CLOSE
  }

  Button can be setup with text as follows in `tableData` object:

  {
    ...,
    delete: 'Example text'
  }
-->
<ng-template #button let-row="row" let-column="column">
  <ng-container *ngIf="column?.button && row">
    <button
      (click)="onClick($event, row, column.key)"
      type="button"
      class="btn btn-primary btn-sm"
    >
      <span> {{ row[column.key] || column.key }} </span>
      <cx-icon *ngIf="column?.cxIcon" [type]="column?.cxIcon"></cx-icon>
    </button>
  </ng-container>
</ng-template>

<!-- Template for rendering link based on `cxRoute` property in column data. -->
<ng-template #link let-row="row" let-column="column">
  <ng-container *ngIf="column?.cxRoute && row">
    <a
      [routerLink]="{ cxRoute: column.cxRoute, params: row } | cxUrl"
      class="cx-value"
    >
      {{ row[column.key] }}
    </a>
  </ng-container>
</ng-template>

<!-- Template for rendering plain text in case if any other custom properties not exist. -->
<ng-template #text let-row="row" let-column="column">
  <ng-container
    *ngIf="!column?.checkBox && !column?.button && !column?.cxRoute && row"
  >
    {{ row[column.key] || '-' }}
  </ng-container>
</ng-template>

<!-- Main content template. -->
<ng-template #content let-data="data">
  <ng-container *ngTemplateOutlet="checkbox; context: data"></ng-container>
  <ng-container *ngTemplateOutlet="button; context: data"></ng-container>
  <ng-container *ngTemplateOutlet="link; context: data"></ng-container>
  <ng-container *ngTemplateOutlet="text; context: data"></ng-container>
</ng-template>
