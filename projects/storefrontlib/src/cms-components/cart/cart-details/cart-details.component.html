<ng-container *ngIf="cart$ | async as cart">
  <ng-container *ngIf="entries$ | async as entries">
    <ng-container *ngIf="isSaveForLaterEnabled(); else itemsView">
      <div *ngIf="cart.totalItems > 0" class="cart-details-wrapper">
        <div class="cx-total">
          {{ 'cartDetails.cartName' | cxTranslate: { code: cart.code } }}
        </div>
        <cx-promotions
          [promotions]="getAllPromotionsForCart(cart)"
        ></cx-promotions>
        <cx-cart-item-list
          [items]="entries"
          [cartIsLoading]="!(cartLoaded$ | async)"
          [options]="{
            isReadOnly: false,
            showTotal: true,
            button: saveForLaterbtn
          }"
        ></cx-cart-item-list>
      </div>
    </ng-container>
  </ng-container>
</ng-container>

<ng-template #itemsView>
  <div class="cart-details-wrapper">
    <div class="cx-total">
      {{ 'cartDetails.cartName' | cxTranslate: { code: cart.code } }}
    </div>
    <cx-promotions [promotions]="getAllPromotionsForCart(cart)"></cx-promotions>
    <cx-cart-item-list
      [items]="entries"
      [potentialProductPromotions]="cart.potentialProductPromotions"
      [cartIsLoading]="!(cartLoaded$ | async)"
    ></cx-cart-item-list>
  </div>
</ng-template>

<ng-template let-ctx #saveForLaterbtn>
  <div class="col-md-3 col-lg-3 col-xl-3">
    <button
      class="link"
      [class.disabled]="ctx.loading"
      [disabled]="ctx.loading"
      (click)="saveForLater(ctx.item)"
    >
      {{ 'saveForLaterItems.saveForLater' | cxTranslate }}
    </button>
  </div>
</ng-template>
