<div class="cx-hierarchy-node-collapsible" (click)="toggle()">
  <span class="leaf-node-title">{{ tree.name }}</span>
  <ng-container *ngIf="!readonly">
    <button
      *ngIf="tree.children.length === 0; else noneLeafNode"
      (click)="editBundle(tree.value?.entryGroupNumber)"
      class="btn btn-tertiary"
      type="button"
    >
      {{ 'common.edit' | cxTranslate }}
    </button>
  </ng-container>
</div>
<cx-hierarchy-node-collapsible
  *ngFor="let child of collapsibleChildren; let i = index"
  [tree]="child"
  [template]="template"
  [readonly]="readonly"
>
</cx-hierarchy-node-collapsible>
<ng-container *ngIf="tree.children.length === 0 && tree.value?.entries?.length">
  <ng-container
    *ngTemplateOutlet="
      template;
      context: { $implicit: this.tree.value?.entries }
    "
  ></ng-container>
</ng-container>
<ng-template #noneLeafNode>
  <div *ngIf="!open" class="tree-icon">
    <cx-icon type="EXPAND"></cx-icon>
  </div>
  <div *ngIf="open" class="tree-icon">
    <cx-icon type="COLLAPSE"></cx-icon>
  </div>
</ng-template>
