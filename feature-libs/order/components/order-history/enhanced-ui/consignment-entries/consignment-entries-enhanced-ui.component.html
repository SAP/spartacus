<ng-container *ngFor="let consignment of consignments">
  <!--
example:
Consignment 1 | In Process | Last Updated: 13, September, 2023
Consignment 2 | Tracking Number: 5657474 | Estimated Delivery: 22, September, 2023
  -->
  <div
    class="cx-consignment-info"
    [attr.aria-label]="'orderHistoryEnhancedUI.consignmentDetail' | cxTranslate"
    *ngIf="consignment"
  >
    <span
      [attr.aria-label]="
        'orderHistoryEnhancedUI.consignmentNumber' | cxTranslate
      "
    >
      {{
        'orderHistoryEnhancedUI.consignmentCode'
          | cxTranslate: { param: consignmentNumber(consignment?.code) }
      }}
    </span>
    |
    <ng-container *ngIf="consignment.trackingID; else showLastUpdated">
      <ng-container *ngIf="consignment.tracking as tracking">
        <span
          [attr.aria-label]="'orderHistoryEnhancedUI.trackingID' | cxTranslate"
        >
          {{
            'orderDetails.consignmentTracking.dialog.trackingId' | cxTranslate
          }}:
          <ng-container *ngIf="tracking.trackingUrl; else showNumber">
            <a
              target="_blank"
              rel="noopener noreferrer"
              [href]="tracking.trackingUrl"
              >{{ tracking.trackingID }}</a
            >
          </ng-container>
          |
        </span>
        <span
          [attr.aria-label]="
            'orderHistoryEnhancedUI.estimateDelivery' | cxTranslate
          "
        >
          {{
            'orderDetails.consignmentTracking.dialog.estimate' | cxTranslate
          }}:
          {{ tracking.targetArrivalDate | cxDate: 'd, MMMM, yyyy' }}
        </span>
        <ng-template #showNumber>
          {{ tracking.trackingID }}
        </ng-template>
      </ng-container>
    </ng-container>
    <ng-template #showLastUpdated>
      <span
        [attr.aria-label]="
          'orderHistoryEnhancedUI.consignmentStatus' | cxTranslate
        "
        *ngIf="consignment.status"
      >
        {{
          'orderDetails.deliveryStatus_' + consignment?.status?.toUpperCase()
            | cxTranslate
        }}
      </span>
      <span
        *ngIf="consignment.statusDate"
        [attr.aria-label]="
          'orderHistoryEnhancedUI.consignmentStatusDate' | cxTranslate
        "
      >
        |
        {{
          'orderHistoryEnhancedUI.statusDate'
            | cxTranslate
              : { param: consignment.statusDate | cxDate: 'd, MMMM, yyyy' }
        }}
      </span>
    </ng-template>
  </div>
</ng-container>
