<cx-asm-customer-product-listing
  [emptyResultDescription]="
    'asm.customer360.overview.noActiveCart' | cxTranslate
  "
  [headerInactive]="true"
  [headerTemplate]="headerTemplate"
  [headerText]="'asm.customer360.overview.activeCart' | cxTranslate"
  [products]="productItems$ | async"
  (selectProduct)="
    sectionContext.navigate$.next({ cxRoute: 'product', params: $event })
  "
>
</cx-asm-customer-product-listing>

<ng-template #headerTemplate>
  <ng-container *ngIf="activeCart$ | async as activeCart">
    <a
      tabindex="0"
      [attr.aria-label]="
        'asm.customer360.aria.activeCartCode'
          | cxTranslate: { code: activeCart.code }
      "
      role="link"
      class="cx-overview-title-link"
      (click)="sectionContext.navigate$.next({ cxRoute: 'cart' })"
    >
      {{ activeCart.code }}
    </a>
    <div class="cart-total-no-items">
      {{
        'asm.customer360.overview.totalNoItems'
          | cxTranslate: { count: activeCart.totalItems }
      }}
    </div>
    <div class="cart-divider"></div>
    <div class="cart-total-price">
      {{
        'asm.customer360.overview.totalPrice'
          | cxTranslate: { price: activeCart.totalPrice?.formattedValue }
      }}
    </div>
  </ng-container>
</ng-template>