<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>storefrontapp documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">storefrontapp documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>ConfiguratorCommonsService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts</code>
        </p>




            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#getConfiguration">getConfiguration</a>
                            </li>
                            <li>
                                <a href="#getConfigurationWithOverview">getConfigurationWithOverview</a>
                            </li>
                            <li>
                                <a href="#getOrCreateConfiguration">getOrCreateConfiguration</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#getOrCreateConfigurationForProduct">getOrCreateConfigurationForProduct</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#hasConfigurationOverview">hasConfigurationOverview</a>
                            </li>
                            <li>
                                <a href="#hasConflicts">hasConflicts</a>
                            </li>
                            <li>
                                <a href="#hasPendingChanges">hasPendingChanges</a>
                            </li>
                            <li>
                                <a href="#isConfigurationLoading">isConfigurationLoading</a>
                            </li>
                            <li>
                                <a href="#removeConfiguration">removeConfiguration</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#removeObsoleteProductBoundConfiguration">removeObsoleteProductBoundConfiguration</a>
                            </li>
                            <li>
                                <a href="#updateConfiguration">updateConfiguration</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(store: <a href="../s/Config.html">Store<StateWithConfigurator></a>, commonConfigUtilsService: <a href="../injectables/CommonConfiguratorUtilsService.html">CommonConfiguratorUtilsService</a>, configuratorCartService: <a href="../injectables/ConfiguratorCartService.html">ConfiguratorCartService</a>, activeCartService: <a href="../injectables/ActiveCartService.html">ActiveCartService</a>, configuratorUtils: <a href="../injectables/ConfiguratorUtilsService.html">ConfiguratorUtilsService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="18" class="link-to-prism">feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts:18</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>store</td>
                                                  
                                                        <td>
                                                                        <code><a href="../miscellaneous/variables.html#Config" target="_self" >Store&lt;StateWithConfigurator&gt;</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>commonConfigUtilsService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/CommonConfiguratorUtilsService.html" target="_self" >CommonConfiguratorUtilsService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>configuratorCartService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/ConfiguratorCartService.html" target="_self" >ConfiguratorCartService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>activeCartService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/ActiveCartService.html" target="_self" >ActiveCartService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>configuratorUtils</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/ConfiguratorUtilsService.html" target="_self" >ConfiguratorUtilsService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getConfiguration"></a>
                    <span class="name">
                        <b>
                            getConfiguration
                        </b>
                        <a href="#getConfiguration"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getConfiguration(owner: <a href="../interfaces/Owner.html">CommonConfigurator.Owner</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="67"
                            class="link-to-prism">feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts:67</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns a configuration for an owner. Emits only if there are valid configurations
available for the requested owner, does not trigger the re-read or
creation of the configuration in case it&#39;s not there</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>owner</td>
                                    <td>
                                                <code><a href="../interfaces/Owner.html" target="_self" >CommonConfigurator.Owner</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>Configuration owner</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/variables.html#Config" target="_self" >Observable&lt;Configurator.Configuration&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getConfigurationWithOverview"></a>
                    <span class="name">
                        <b>
                            getConfigurationWithOverview
                        </b>
                        <a href="#getConfigurationWithOverview"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getConfigurationWithOverview(configuration: <a href="../s/Config.html">Configurator.Configuration</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="168"
                            class="link-to-prism">feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts:168</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns a configuration with an overview. Emits valid configurations which
include the overview aspect</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>configuration</td>
                                    <td>
                                                <code><a href="../miscellaneous/variables.html#Config" target="_self" >Configurator.Configuration</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>Configuration</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/variables.html#Config" target="_self" >Observable&lt;Configurator.Configuration&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>Observable of configurations including the overview</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getOrCreateConfiguration"></a>
                    <span class="name">
                        <b>
                            getOrCreateConfiguration
                        </b>
                        <a href="#getOrCreateConfiguration"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getOrCreateConfiguration(owner: <a href="../interfaces/Owner.html">CommonConfigurator.Owner</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="88"
                            class="link-to-prism">feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts:88</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns a configuration if it exists or creates a new one.
Emits if there is a valid configuration available and triggers
the configuration creation or read from backend in case it is not
available</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>owner</td>
                                    <td>
                                                <code><a href="../interfaces/Owner.html" target="_self" >CommonConfigurator.Owner</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>Configuration owner</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/variables.html#Config" target="_self" >Observable&lt;Configurator.Configuration&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getOrCreateConfigurationForProduct"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Protected</span>
                            getOrCreateConfigurationForProduct
                        </b>
                        <a href="#getOrCreateConfigurationForProduct"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getOrCreateConfigurationForProduct(owner: <a href="../interfaces/Owner.html">CommonConfigurator.Owner</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="233"
                            class="link-to-prism">feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts:233</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>owner</td>
                                    <td>
                                                <code><a href="../interfaces/Owner.html" target="_self" >CommonConfigurator.Owner</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../miscellaneous/variables.html#Config" target="_self" >Observable&lt;Configurator.Configuration&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasConfigurationOverview"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Protected</span>
                            hasConfigurationOverview
                        </b>
                        <a href="#hasConfigurationOverview"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>hasConfigurationOverview(configuration: <a href="../s/Config.html">Configurator.Configuration</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="263"
                            class="link-to-prism">feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts:263</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>configuration</td>
                                    <td>
                                                <code><a href="../miscellaneous/variables.html#Config" target="_self" >Configurator.Configuration</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasConflicts"></a>
                    <span class="name">
                        <b>
                            hasConflicts
                        </b>
                        <a href="#hasConflicts"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>hasConflicts(owner: <a href="../interfaces/Owner.html">CommonConfigurator.Owner</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="205"
                            class="link-to-prism">feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts:205</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Checks if the configuration contains conflicts</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>owner</td>
                                    <td>
                                                <code><a href="../interfaces/Owner.html" target="_self" >CommonConfigurator.Owner</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>Configuration owner</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        <ul>
<li>Returns true if the configuration has conflicts, otherwise false</li>
</ul>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasPendingChanges"></a>
                    <span class="name">
                        <b>
                            hasPendingChanges
                        </b>
                        <a href="#hasPendingChanges"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>hasPendingChanges(owner: <a href="../interfaces/Owner.html">CommonConfigurator.Owner</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="34"
                            class="link-to-prism">feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts:34</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Verifies whether there are any pending configuration changes.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>owner</td>
                                    <td>
                                                <code><a href="../interfaces/Owner.html" target="_self" >CommonConfigurator.Owner</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>Configuration owner</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>Returns true if there are any pending changes, otherwise false</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isConfigurationLoading"></a>
                    <span class="name">
                        <b>
                            isConfigurationLoading
                        </b>
                        <a href="#isConfigurationLoading"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>isConfigurationLoading(owner: <a href="../interfaces/Owner.html">CommonConfigurator.Owner</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="47"
                            class="link-to-prism">feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts:47</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Verifies whether the configuration is loading.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>owner</td>
                                    <td>
                                                <code><a href="../interfaces/Owner.html" target="_self" >CommonConfigurator.Owner</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>Configuration owner</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        <p>Returns true if the configuration is loading, otherwise false</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removeConfiguration"></a>
                    <span class="name">
                        <b>
                            removeConfiguration
                        </b>
                        <a href="#removeConfiguration"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>removeConfiguration(owner: <a href="../interfaces/Owner.html">CommonConfigurator.Owner</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="192"
                            class="link-to-prism">feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts:192</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Removes a configuration.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>owner</td>
                                    <td>
                                                <code><a href="../interfaces/Owner.html" target="_self" >CommonConfigurator.Owner</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>Configuration owner</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="removeObsoleteProductBoundConfiguration"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Protected</span>
                            removeObsoleteProductBoundConfiguration
                        </b>
                        <a href="#removeObsoleteProductBoundConfiguration"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>removeObsoleteProductBoundConfiguration(owner: <a href="../interfaces/Owner.html">CommonConfigurator.Owner</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="215"
                            class="link-to-prism">feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts:215</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>owner</td>
                                    <td>
                                                <code><a href="../interfaces/Owner.html" target="_self" >CommonConfigurator.Owner</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateConfiguration"></a>
                    <span class="name">
                        <b>
                            updateConfiguration
                        </b>
                        <a href="#updateConfiguration"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>updateConfiguration(ownerKey: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, changedAttribute: <a href="../s/Config.html">Configurator.Attribute</a>, updateType?: <a href="../s/Config.html">Configurator.UpdateType</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="114"
                            class="link-to-prism">feature-libs/product-configurator/rulebased/core/facade/configurator-commons.service.ts:114</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Updates a configuration, specified by the configuration owner key, group ID and a changed attribute.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ownerKey</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>Configuration owner key</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>changedAttribute</td>
                                    <td>
                                                <code><a href="../miscellaneous/variables.html#Config" target="_self" >Configurator.Attribute</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>Changes attribute</li>
</ul>

                                    </td>
                                </tr>
                                <tr>
                                    <td>updateType</td>
                                    <td>
                                                <code><a href="../miscellaneous/variables.html#Config" target="_self" >Configurator.UpdateType</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                    <td>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable, isDevMode } from &#x27;@angular/core&#x27;;
import { select, Store } from &#x27;@ngrx/store&#x27;;
import { ActiveCartService } from &#x27;@spartacus/core&#x27;;
import {
  CommonConfigurator,
  CommonConfiguratorUtilsService,
} from &#x27;@spartacus/product-configurator/common&#x27;;
import { Observable } from &#x27;rxjs&#x27;;
import { filter, map, switchMap, switchMapTo, take, tap } from &#x27;rxjs/operators&#x27;;
import { Configurator } from &#x27;../model/configurator.model&#x27;;
import { ConfiguratorActions } from &#x27;../state/actions/index&#x27;;
import { StateWithConfigurator } from &#x27;../state/configurator-state&#x27;;
import { ConfiguratorSelectors } from &#x27;../state/selectors/index&#x27;;
import { ConfiguratorCartService } from &#x27;./configurator-cart.service&#x27;;
import { ConfiguratorUtilsService } from &#x27;./utils/configurator-utils.service&#x27;;

@Injectable({ providedIn: &#x27;root&#x27; })
export class ConfiguratorCommonsService {
  constructor(
    protected store: Store&lt;StateWithConfigurator&gt;,
    protected commonConfigUtilsService: CommonConfiguratorUtilsService,
    protected configuratorCartService: ConfiguratorCartService,
    protected activeCartService: ActiveCartService,
    protected configuratorUtils: ConfiguratorUtilsService
  ) {}

  /**
   * Verifies whether there are any pending configuration changes.
   *
   * @param owner - Configuration owner
   *
   * @returns {Observable&lt;boolean&gt;} Returns true if there are any pending changes, otherwise false
   */
  hasPendingChanges(owner: CommonConfigurator.Owner): Observable&lt;boolean&gt; {
    return this.store.pipe(
      select(ConfiguratorSelectors.hasPendingChanges(owner.key))
    );
  }

  /**
   * Verifies whether the configuration is loading.
   *
   * @param owner - Configuration owner
   *
   * @returns {Observable&lt;boolean&gt;} Returns true if the configuration is loading, otherwise false
   */
  isConfigurationLoading(owner: CommonConfigurator.Owner): Observable&lt;boolean&gt; {
    return this.store.pipe(
      select(
        ConfiguratorSelectors.getConfigurationProcessLoaderStateFactory(
          owner.key
        )
      ),
      map((configurationState) &#x3D;&gt; configurationState.loading)
    );
  }

  /**
   * Returns a configuration for an owner. Emits only if there are valid configurations
   * available for the requested owner, does not trigger the re-read or
   * creation of the configuration in case it&#x27;s not there
   *
   * @param owner - Configuration owner
   *
   * @returns {Observable&lt;Configurator.Configuration&gt;}
   */
  getConfiguration(
    owner: CommonConfigurator.Owner
  ): Observable&lt;Configurator.Configuration&gt; {
    return this.store.pipe(
      select(ConfiguratorSelectors.getConfigurationFactory(owner.key)),
      filter((configuration) &#x3D;&gt;
        this.configuratorUtils.isConfigurationCreated(configuration)
      )
    );
  }

  /**
   * Returns a configuration if it exists or creates a new one.
   * Emits if there is a valid configuration available and triggers
   * the configuration creation or read from backend in case it is not
   * available
   *
   * @param owner - Configuration owner
   *
   * @returns {Observable&lt;Configurator.Configuration&gt;}
   */
  getOrCreateConfiguration(
    owner: CommonConfigurator.Owner
  ): Observable&lt;Configurator.Configuration&gt; {
    switch (owner.type) {
      case CommonConfigurator.OwnerType.PRODUCT: {
        return this.getOrCreateConfigurationForProduct(owner);
      }
      case CommonConfigurator.OwnerType.CART_ENTRY: {
        return this.configuratorCartService.readConfigurationForCartEntry(
          owner
        );
      }
      case CommonConfigurator.OwnerType.ORDER_ENTRY: {
        return this.configuratorCartService.readConfigurationForOrderEntry(
          owner
        );
      }
    }
  }

  /**
   * Updates a configuration, specified by the configuration owner key, group ID and a changed attribute.
   *
   * @param ownerKey - Configuration owner key
   * @param changedAttribute - Changes attribute
   */
  updateConfiguration(
    ownerKey: string,
    changedAttribute: Configurator.Attribute,
    updateType?: Configurator.UpdateType
  ): void {
    if (!updateType) {
      updateType &#x3D; Configurator.UpdateType.ATTRIBUTE;
    }
    // in case cart updates pending: Do nothing, because an addToCart might
    // be in progress. Can happen if on slow networks addToCart was hit and
    // afterwards an attribute was changed before the OV navigation has
    // taken place
    this.activeCartService
      .getActive()
      .pipe(
        take(1),
        switchMap((cart) &#x3D;&gt;
          this.activeCartService.isStable().pipe(
            take(1),
            tap((stable) &#x3D;&gt; {
              if (isDevMode() &amp;&amp; cart.code &amp;&amp; !stable) {
                console.warn(&#x27;Cart is busy, no configuration updates possible&#x27;);
              }
            }),
            filter((stable) &#x3D;&gt; !cart.code || stable),
            switchMapTo(
              this.store.pipe(
                select(ConfiguratorSelectors.getConfigurationFactory(ownerKey)),
                take(1)
              )
            )
          )
        )
      )
      .subscribe((configuration) &#x3D;&gt; {
        this.store.dispatch(
          new ConfiguratorActions.UpdateConfiguration(
            this.configuratorUtils.createConfigurationExtract(
              changedAttribute,
              configuration,
              updateType
            )
          )
        );
      });
  }

  /**
   * Returns a configuration with an overview. Emits valid configurations which
   * include the overview aspect
   *
   * @param configuration - Configuration
   * @returns Observable of configurations including the overview
   */
  getConfigurationWithOverview(
    configuration: Configurator.Configuration
  ): Observable&lt;Configurator.Configuration&gt; {
    return this.store.pipe(
      select(
        ConfiguratorSelectors.getConfigurationFactory(configuration.owner.key)
      ),
      filter((config) &#x3D;&gt; this.configuratorUtils.isConfigurationCreated(config)),
      tap((configurationState) &#x3D;&gt; {
        if (!this.hasConfigurationOverview(configurationState)) {
          this.store.dispatch(
            new ConfiguratorActions.GetConfigurationOverview(configuration)
          );
        }
      }),
      filter((config) &#x3D;&gt; this.hasConfigurationOverview(config))
    );
  }

  /**
   * Removes a configuration.
   *
   * @param owner - Configuration owner
   */
  removeConfiguration(owner: CommonConfigurator.Owner): void {
    this.store.dispatch(
      new ConfiguratorActions.RemoveConfiguration({ ownerKey: owner.key })
    );
  }

  /**
   * Checks if the configuration contains conflicts
   *
   * @param owner - Configuration owner
   *
   * @returns {Observable&lt;boolean&gt;} - Returns true if the configuration has conflicts, otherwise false
   */
  hasConflicts(owner: CommonConfigurator.Owner): Observable&lt;boolean&gt; {
    return this.getConfiguration(owner).pipe(
      map(
        (configuration) &#x3D;&gt;
          //We expect that the first group must always be the conflict group
          configuration.groups[0]?.groupType &#x3D;&#x3D;&#x3D;
          Configurator.GroupType.CONFLICT_HEADER_GROUP
      )
    );
  }
  protected removeObsoleteProductBoundConfiguration(
    owner: CommonConfigurator.Owner
  ): void {
    this.store
      .pipe(
        select(ConfiguratorSelectors.getConfigurationFactory(owner.key)),
        take(1)
      )
      .subscribe((configuration) &#x3D;&gt; {
        if (
          this.configuratorUtils.isConfigurationCreated(configuration) &amp;&amp;
          configuration.nextOwner
        ) {
          this.removeConfiguration(owner);
        }
      });
  }

  protected getOrCreateConfigurationForProduct(
    owner: CommonConfigurator.Owner
  ): Observable&lt;Configurator.Configuration&gt; {
    this.removeObsoleteProductBoundConfiguration(owner);
    return this.store.pipe(
      select(
        ConfiguratorSelectors.getConfigurationProcessLoaderStateFactory(
          owner.key
        )
      ),
      tap((configurationState) &#x3D;&gt; {
        if (
          !this.configuratorUtils.isConfigurationCreated(
            configurationState.value
          ) &amp;&amp;
          configurationState.loading !&#x3D;&#x3D; true &amp;&amp;
          configurationState.error !&#x3D;&#x3D; true
        ) {
          this.store.dispatch(
            new ConfiguratorActions.CreateConfiguration(owner)
          );
        }
      }),
      filter((configurationState) &#x3D;&gt;
        this.configuratorUtils.isConfigurationCreated(configurationState.value)
      ),
      map((configurationState) &#x3D;&gt; configurationState.value)
    );
  }

  protected hasConfigurationOverview(
    configuration: Configurator.Configuration
  ): boolean {
    return configuration.overview !&#x3D;&#x3D; undefined;
  }
}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'ConfiguratorCommonsService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
