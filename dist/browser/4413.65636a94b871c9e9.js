"use strict";(self.webpackChunkstorefrontapp=self.webpackChunkstorefrontapp||[]).push([[4413],{4413:(lt,R,a)=>{a.r(R),a.d(R,{UnitOrderModule:()=>it});var e=a(4650),O=a(6053),C=a(1086),M=a(2994),c=a(4850),le=a(5778),se=a(5154),D=a(7545),p=a(2198),s=a(5955),x=a(5262),v=a(6895),U=a(5391),_=a(6916),u=a(4006),ae=a(7039),Q=a(7221),ce=a(9309),y=a(5359),g=a(5024);class q{}let G=(()=>{class r{constructor(t){this.adapter=t}getUnitOrderHistory(t,n,i,l,d){return this.adapter.loadUnitOrderHistory(t,n,i,l,d)}getUnitOrderDetail(t,n){return this.adapter.loadUnitOrderDetail(t,n)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(q))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Z=(()=>{class r{constructor(t,n,i){this.userAccountFacade=t,this.routingService=n,this.globalMessageService=i}canActivate(){return this.userAccountFacade.get().pipe((0,p.h)(t=>!!t&&Object.keys(t).length>0),(0,c.U)(t=>t.roles),(0,c.U)(t=>{const n=Array.isArray(t)&&(t.includes(s.N3Q.UNITORDERVIEWER)||t.includes(s.KOx.ADMIN));return n||(this.routingService.go({cxRoute:"home"}),this.globalMessageService.add({key:"organization.notification.noSufficientPermissions"},s.xUg.MSG_TYPE_WARNING)),n}))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(ce.gf),e.LFG(s.Znh),e.LFG(s.IWp))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const P="unit order",L="[Unit Order] Unit Orders",m="[Unit Order] Order Details",H="[Unit Order] Load Unit Orders",E="[Unit Order] Load Unit Orders Fail",S="[Unit Order] Load Unit Orders Success",A="[Unit Order] Load Unit Order Details",I="[Unit Order] Load Unit Order Details Fail",N="[Unit Order] Load Unit Order Details Success";class Y extends s.kPG.LoaderLoadAction{constructor(o){super(L),this.payload=o,this.type=H}}class $ extends s.kPG.LoaderFailAction{constructor(o){super(L,o),this.payload=o,this.type=E}}class z extends s.kPG.LoaderSuccessAction{constructor(o){super(L),this.payload=o,this.type=S}}class B extends s.kPG.LoaderResetAction{constructor(){super(L),this.type="[Unit Order] Clear Unit Orders"}}class K extends s.kPG.LoaderLoadAction{constructor(o){super(m),this.payload=o,this.type=A}}class X extends s.kPG.LoaderFailAction{constructor(o){super(m,o),this.payload=o,this.type=I}}class W extends s.kPG.LoaderSuccessAction{constructor(o){super(m),this.payload=o,this.type=N}}class ee extends s.kPG.LoaderResetAction{constructor(){super(m),this.type="[Unit Order] Clear Unit Order Details"}}const de=[(()=>{class r{constructor(t,n){this.actions$=t,this.orderConnector=n,this.logger=(0,e.f3M)(s.mQy),this.loadUnitOrders$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(H),(0,c.U)(i=>i.payload),(0,D.w)(i=>this.orderConnector.getUnitOrderHistory(i.userId,i.pageSize,i.currentPage,i.filters,i.sort).pipe((0,c.U)(l=>new z(l)),(0,Q.K)(l=>(0,C.of)(new $((0,s.cxH)(l,this.logger)))))))),this.resetUserOrders$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(s.dO9.LANGUAGE_CHANGE),(0,c.U)(()=>new B))),this.loadOrderDetails$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(A),(0,c.U)(i=>i.payload),(0,D.w)(i=>this.orderConnector.getUnitOrderDetail(i.userId,i.orderCode).pipe((0,c.U)(l=>new W(l)),(0,Q.K)(l=>(0,C.of)(new X((0,s.cxH)(l,this.logger))))))))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(g.eX),e.LFG(G))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})()],k={orders:[],pagination:{},sorts:[]},te={};function ue(r=k,o){switch(o.type){case S:return o.payload?o.payload:k;case E:return k}return r}function pe(r=te,o){switch(o.type){case N:return o.payload;case I:case A:return te}return r}const re=new e.OlP("UnitOrderReducers"),ye={provide:re,useFactory:function ve(){return{orders:s.kPG.loaderReducer(L,ue),orderDetail:s.kPG.loaderReducer(m,pe)}}},w=(0,y.ZF)(P),T=(0,y.P1)(w,r=>r.orders),ne=(0,y.P1)(T,r=>s.kPG.loaderSuccessSelector(r)),ie=((0,y.P1)(T,r=>s.kPG.loaderValueSelector(r)),(0,y.P1)(w,r=>r.orderDetail)),oe=(0,y.P1)(ie,r=>s.kPG.loaderValueSelector(r));let fe=(()=>{class r{constructor(t,n,i){this.store=t,this.userIdService=n,this.routingService=i}getOrderHistoryList(t){return this.store.pipe((0,y.Ys)(T),(0,M.b)(n=>{n.loading||n.success||n.error||this.loadOrderList(t)}),(0,c.U)(n=>n.value))}getOrderHistoryListLoaded(){return this.store.pipe((0,y.Ys)(ne))}loadOrderList(t,n,i,l){this.userIdService.takeUserId(!0).subscribe({next:d=>{this.store.dispatch(new Y({userId:d,pageSize:t,currentPage:n,filters:i,sort:l}))},error:()=>{}})}clearOrderList(){this.store.dispatch(new B)}getOrderDetails(){return this.store.pipe((0,y.Ys)(oe))}loadOrderDetails(t){this.userIdService.takeUserId().subscribe(n=>{this.store.dispatch(new K({userId:n,orderCode:t}))})}clearOrderDetails(){this.store.dispatch(new ee)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(y.yh),e.LFG(s.XBV),e.LFG(s.Znh))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ge=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[ye],imports:[y.Aw.forFeature(P,re),g.sQ.forFeature(de)]}),r})(),he=(()=>{class r{static forRoot(){return{ngModule:r,providers:[{provide:x.QP,useExisting:fe},G]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[ge]}),r})();var Oe=a(6789),b=a(6978);const Le=["filterNav"],me=["filterNavUnit"],xe=["filterNavBuyer"],Ue=["buyerFilterMobileId"],Ze=["unitFilterMobileId"];function Ae(r,o){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij('"',t.buyerFilterMobileValue,'"')}}function Te(r,o){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"cxTranslate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"unitLevelOrderHistory.and")))}function be(r,o){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.hij('"',t.unitFilterMobileValue,'"')}}function Fe(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",42)(1,"div",43),e._uU(2),e.ALo(3,"cxTranslate"),e.YNc(4,Ae,2,1,"span",44),e.YNc(5,Te,3,3,"span",44),e.YNc(6,be,2,1,"span",44),e.qZA(),e.TgZ(7,"div",45)(8,"button",46),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearAll())}),e._uU(9),e.ALo(10,"cxTranslate"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,5,"unitLevelOrderHistory.yourFilters")," "),e.xp6(2),e.Q6J("ngIf",t.buyerFilterMobileValue),e.xp6(1),e.Q6J("ngIf",t.buyerFilterMobileValue&&t.unitFilterMobileValue),e.xp6(1),e.Q6J("ngIf",t.unitFilterMobileValue),e.xp6(3),e.hij(" ",e.lcZ(10,7,"unitLevelOrderHistory.removeAppliedFilters")," ")}}function Ce(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",16)(1,"cx-pagination",17),e.NdJ("viewPageEvent",function(i){e.CHM(t);const l=e.oxw(4);return e.KtG(l.pageChange(i))}),e.qZA()()}if(2&r){const t=e.oxw(2).ngIf;e.xp6(1),e.Q6J("pagination",null==t?null:t.pagination)}}const h=function(r){return{cxRoute:"unitLevelOrderDetail",params:r}};function Me(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"tr",18),e.NdJ("click",function(){const l=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.goToOrderDetail(l))}),e.TgZ(1,"td",19)(2,"div",20),e._uU(3),e.ALo(4,"cxTranslate"),e.qZA(),e.TgZ(5,"a",21),e.ALo(6,"cxUrl"),e._uU(7),e.qZA()(),e.TgZ(8,"td",22)(9,"div",20),e._uU(10),e.ALo(11,"cxTranslate"),e.qZA(),e.TgZ(12,"a",21),e.ALo(13,"cxUrl"),e._uU(14),e.ALo(15,"cxDate"),e.qZA()(),e.TgZ(16,"td",23)(17,"div",20),e._uU(18),e.ALo(19,"cxTranslate"),e.qZA(),e.TgZ(20,"a",21),e.ALo(21,"cxUrl"),e._uU(22),e.ALo(23,"cxTranslate"),e.qZA()(),e.TgZ(24,"td",24)(25,"div",20),e._uU(26),e.ALo(27,"cxTranslate"),e.qZA(),e.TgZ(28,"a",21),e.ALo(29,"cxUrl"),e._uU(30),e.TgZ(31,"span",25),e._uU(32),e.qZA()()(),e.TgZ(33,"td",26)(34,"div",20),e._uU(35),e.ALo(36,"cxTranslate"),e.qZA(),e.TgZ(37,"a",21),e.ALo(38,"cxUrl"),e._uU(39),e.qZA()(),e.TgZ(40,"td",27)(41,"div",20),e._uU(42),e.ALo(43,"cxTranslate"),e.qZA(),e.TgZ(44,"a",21),e.ALo(45,"cxUrl"),e._uU(46),e.qZA()()()}if(2&r){const t=o.$implicit;e.xp6(3),e.hij(" ",e.lcZ(4,19,"unitLevelOrderHistory.orderId")," "),e.xp6(2),e.Q6J("routerLink",e.lcZ(6,21,e.VKq(48,h,t))),e.xp6(2),e.hij(" ",null==t?null:t.code,""),e.xp6(3),e.hij(" ",e.lcZ(11,23,"unitLevelOrderHistory.date")," "),e.xp6(2),e.Q6J("routerLink",e.lcZ(13,25,e.VKq(50,h,t))),e.xp6(2),e.hij(" ",e.xi3(15,27,null==t?null:t.placed,"longDate")," "),e.xp6(4),e.hij(" ",e.lcZ(19,30,"unitLevelOrderHistory.status")," "),e.xp6(2),e.Q6J("routerLink",e.lcZ(21,32,e.VKq(52,h,t))),e.xp6(2),e.hij(" ",e.lcZ(23,34,"orderDetails.statusDisplay_"+(null==t?null:t.statusDisplay)),""),e.xp6(4),e.hij(" ",e.lcZ(27,36,"unitLevelOrderHistory.buyer")," "),e.xp6(2),e.Q6J("routerLink",e.lcZ(29,38,e.VKq(54,h,t))),e.xp6(2),e.hij(" ",null==t||null==t.orgCustomer?null:t.orgCustomer.name," "),e.xp6(2),e.Oqu(null==t||null==t.orgCustomer?null:t.orgCustomer.email),e.xp6(3),e.hij(" ",e.lcZ(36,40,"unitLevelOrderHistory.unit")," "),e.xp6(2),e.Q6J("routerLink",e.lcZ(38,42,e.VKq(56,h,t))),e.xp6(2),e.hij(" ",null==t||null==t.orgUnit?null:t.orgUnit.name,""),e.xp6(3),e.hij(" ",e.lcZ(43,44,"unitLevelOrderHistory.total")," "),e.xp6(2),e.Q6J("routerLink",e.lcZ(45,46,e.VKq(58,h,t))),e.xp6(2),e.hij(" ",null==t||null==t.total?null:t.total.formattedValue,"")}}function De(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",16)(1,"cx-pagination",17),e.NdJ("viewPageEvent",function(i){e.CHM(t);const l=e.oxw(4);return e.KtG(l.pageChange(i))}),e.qZA()()}if(2&r){const t=e.oxw(2).ngIf;e.xp6(1),e.Q6J("pagination",null==t?null:t.pagination)}}function He(r,o){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",5)(2,"label",6)(3,"span"),e._uU(4),e.ALo(5,"cxTranslate"),e.qZA(),e.TgZ(6,"cx-sorting",7),e.NdJ("sortListEvent",function(i){e.CHM(t);const l=e.oxw(3);return e.KtG(l.changeSortCode(i))}),e.ALo(7,"async"),e.ALo(8,"cxTranslate"),e.ALo(9,"cxTranslate"),e.qZA()(),e.TgZ(10,"div",8),e._UZ(11,"cx-total",9),e.qZA(),e.YNc(12,Ce,2,1,"div",10),e.qZA(),e.TgZ(13,"table",11)(14,"thead",12)(15,"th",13),e._uU(16),e.ALo(17,"cxTranslate"),e.qZA(),e.TgZ(18,"th",13),e._uU(19),e.ALo(20,"cxTranslate"),e.qZA(),e.TgZ(21,"th",13),e._uU(22),e.ALo(23,"cxTranslate"),e.qZA(),e.TgZ(24,"th",13),e._uU(25),e.ALo(26,"cxTranslate"),e.qZA(),e.TgZ(27,"th",13),e._uU(28),e.ALo(29,"cxTranslate"),e.qZA(),e.TgZ(30,"th",13),e._uU(31),e.ALo(32,"cxTranslate"),e.qZA()(),e.TgZ(33,"tbody"),e.YNc(34,Me,47,60,"tr",14),e.qZA()(),e.TgZ(35,"div",15)(36,"label",6)(37,"span"),e._uU(38),e.ALo(39,"cxTranslate"),e.qZA(),e.TgZ(40,"cx-sorting",7),e.NdJ("sortListEvent",function(i){e.CHM(t);const l=e.oxw(3);return e.KtG(l.changeSortCode(i))}),e.ALo(41,"async"),e.ALo(42,"cxTranslate"),e.ALo(43,"cxTranslate"),e.qZA()(),e.TgZ(44,"div",8),e._UZ(45,"cx-total",9),e.qZA(),e.YNc(46,De,2,1,"div",10),e.qZA(),e.BQk()}if(2&r){const t=e.oxw().ngIf,n=e.oxw(2);let i,l;e.xp6(4),e.hij(" ",e.lcZ(5,23,"unitLevelOrderHistory.sortBy")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(8,27,"unitLevelOrderHistory.sortBy")),e.Q6J("sortOptions",null==t?null:t.sorts)("sortLabels",e.lcZ(7,25,n.getSortLabels()))("selectedOption",null==t||null==t.pagination?null:t.pagination.sort)("ariaLabel",e.lcZ(9,29,"unitLevelOrderHistory.sortOrders")),e.xp6(5),e.Q6J("pagination",null==t?null:t.pagination),e.xp6(1),e.Q6J("ngIf",null!==(i=null==t||null==t.pagination?null:t.pagination.totalPages)&&void 0!==i&&i),e.xp6(4),e.hij(" ",e.lcZ(17,31,"unitLevelOrderHistory.orderId")," "),e.xp6(3),e.hij(" ",e.lcZ(20,33,"unitLevelOrderHistory.date")," "),e.xp6(3),e.hij(" ",e.lcZ(23,35,"unitLevelOrderHistory.status")," "),e.xp6(3),e.hij(" ",e.lcZ(26,37,"unitLevelOrderHistory.buyer")," "),e.xp6(3),e.hij(" ",e.lcZ(29,39,"unitLevelOrderHistory.unit")," "),e.xp6(3),e.hij(" ",e.lcZ(32,41,"unitLevelOrderHistory.total")," "),e.xp6(3),e.Q6J("ngForOf",null==t?null:t.orders),e.xp6(4),e.hij(" ",e.lcZ(39,43,"unitLevelOrderHistory.sortBy")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(42,47,"unitLevelOrderHistory.sortBy")),e.Q6J("sortOptions",null==t?null:t.sorts)("sortLabels",e.lcZ(41,45,n.getSortLabels()))("selectedOption",null==t||null==t.pagination?null:t.pagination.sort)("ariaLabel",e.lcZ(43,49,"unitLevelOrderHistory.sortOrders")),e.xp6(5),e.Q6J("pagination",null==t?null:t.pagination),e.xp6(1),e.Q6J("ngIf",null!==(l=null==t||null==t.pagination?null:t.pagination.totalPages)&&void 0!==l&&l)}}const Ee=function(){return{cxRoute:"home"}};function Se(r,o){1&r&&(e.TgZ(0,"div",29)(1,"div")(2,"div"),e._uU(3),e.ALo(4,"cxTranslate"),e.qZA(),e.TgZ(5,"a",30),e.ALo(6,"cxUrl"),e._uU(7),e.ALo(8,"cxTranslate"),e.qZA()()()),2&r&&(e.xp6(3),e.Oqu(e.lcZ(4,3,"unitLevelOrderHistory.noOrders")),e.xp6(2),e.Q6J("routerLink",e.lcZ(6,5,e.DdM(9,Ee))),e.xp6(2),e.Oqu(e.lcZ(8,7,"unitLevelOrderHistory.startShopping")))}function Ie(r,o){if(1&r&&(e.YNc(0,Se,9,10,"div",28),e.ALo(1,"async")),2&r){const t=e.oxw(3);e.Q6J("ngIf",e.lcZ(1,1,t.isLoaded$))}}function Ne(r,o){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div")(2,"cx-unit-level-order-history-filter",1),e.NdJ("filterListEvent",function(i){e.CHM(t);const l=e.oxw(2);return e.KtG(l.filterChange(i))}),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,He,47,51,"ng-container",3),e.YNc(5,Ie,2,3,"ng-template",null,4,e.W1O),e.qZA()(),e.BQk()}if(2&r){const t=o.ngIf,n=e.MAs(6);let i;e.xp6(4),e.Q6J("ngIf",null!==(i=null==t.pagination?null:t.pagination.totalResults)&&void 0!==i&&i)("ngIfElse",n)}}function Be(r,o){if(1&r&&(e.ynx(0),e.YNc(1,Ne,7,2,"ng-container",0),e.BQk()),2&r){const t=o.ngIf;e.xp6(1),e.Q6J("ngIf",t.orderHistory)}}const ke=function(r){return{orderHistory:r}};function we(r,o){if(1&r&&(e.ynx(0),e._UZ(1,"cx-card",4),e.ALo(2,"async"),e.BQk()),2&r){const t=e.oxw().ngIf,n=e.oxw();e.xp6(1),e.Q6J("content",e.lcZ(2,1,n.getCostCenterCardContent(t.costCenter)))}}function Je(r,o){if(1&r&&(e.ynx(0),e._UZ(1,"cx-card",4),e.ALo(2,"async"),e.BQk()),2&r){const t=e.oxw().ngIf,n=e.oxw();e.xp6(1),e.Q6J("content",e.lcZ(2,1,n.getAddressCardContent(t.deliveryAddress)))}}function Re(r,o){if(1&r&&(e.ynx(0),e._UZ(1,"cx-card",4),e.ALo(2,"async"),e.BQk()),2&r){const t=e.oxw().ngIf,n=e.oxw();e.xp6(1),e.Q6J("content",e.lcZ(2,1,n.getDeliveryModeCardContent(t.deliveryMode)))}}function Qe(r,o){if(1&r&&(e.ynx(0),e.TgZ(1,"div",3),e._UZ(2,"cx-card",4),e.ALo(3,"async"),e._UZ(4,"cx-card",4),e.ALo(5,"async"),e.qZA(),e.BQk()),2&r){const t=e.oxw().ngIf,n=e.oxw();e.xp6(2),e.Q6J("content",e.lcZ(3,2,n.getPaymentInfoCardContent(t.paymentInfo))),e.xp6(2),e.Q6J("content",e.lcZ(5,4,n.getBillingAddressCardContent(null==t.paymentInfo?null:t.paymentInfo.billingAddress)))}}function qe(r,o){if(1&r&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e._UZ(3,"cx-card",4),e.ALo(4,"async"),e._UZ(5,"cx-card",4),e.ALo(6,"async"),e.ALo(7,"cxDate"),e._UZ(8,"cx-card",4),e.ALo(9,"async"),e._UZ(10,"cx-card",5),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"div",3),e._UZ(13,"cx-card",4),e.ALo(14,"async"),e._UZ(15,"cx-card",4),e.ALo(16,"async"),e._UZ(17,"cx-card",4),e.ALo(18,"async"),e.YNc(19,we,3,3,"ng-container",6),e.qZA(),e.TgZ(20,"div",3),e.YNc(21,Je,3,3,"ng-container",6),e.YNc(22,Re,3,3,"ng-container",6),e.qZA(),e.YNc(23,Qe,6,6,"ng-container",6),e.qZA()()),2&r){const t=o.ngIf,n=e.oxw();e.xp6(3),e.Q6J("content",e.lcZ(4,11,n.getOrderCodeCardContent(t.code))),e.xp6(2),e.Q6J("content",e.lcZ(6,13,n.getOrderCurrentDateCardContent(e.lcZ(7,15,t.created)))),e.xp6(3),e.Q6J("content",e.lcZ(9,17,n.getOrderStatusCardContent(t.statusDisplay))),e.xp6(2),e.Q6J("content",e.lcZ(11,19,n.getBuyerNameCardContent(t.orgCustomer))),e.xp6(3),e.Q6J("content",e.lcZ(14,21,n.getUnitNameCardContent(null==t.orgUnit?null:t.orgUnit.name))),e.xp6(2),e.Q6J("content",e.lcZ(16,23,n.getPurchaseOrderNumber(t.purchaseOrderNumber))),e.xp6(2),e.Q6J("content",e.lcZ(18,25,n.getMethodOfPaymentCardContent(t.paymentInfo))),e.xp6(2),e.Q6J("ngIf",t.costCenter),e.xp6(2),e.Q6J("ngIf",t.deliveryAddress),e.xp6(1),e.Q6J("ngIf",t.deliveryMode),e.xp6(1),e.Q6J("ngIf",t.paymentInfo)}}let Ge=(()=>{class r{constructor(t){this.renderer=t,this.iconTypes=_.e1G,this.filterForm=new u.cw({buyerFilter:new u.NI,unitFilter:new u.NI}),this.filterFormMobile=new u.cw({buyerFilterMobile:new u.NI,unitFilterMobile:new u.NI}),this.filterByBuyer="filterByBuyer",this.filterByUnit="filterByUnit",this.filterListEvent=new e.vpe}searchUnitLevelOrders(){const t=this.filterForm.get("buyerFilter")?.value,n=this.filterForm.get("unitFilter")?.value;this.filterFormMobile.setValue({buyerFilterMobile:t,unitFilterMobile:n}),this.emitFilterEvent(t,n),this.buyerFilterMobileValue=t,this.unitFilterMobileValue=n}emitFilterEvent(t,n){const i=[];t?.length&&i.push("user:"+t),n?.length&&i.push("unit:"+n),i.unshift(i.length?":":""),this.encodedFilter=i.join(":"),this.filterListEvent.emit({currentPage:0,filters:this.encodedFilter})}clearAll(){const t=this.filterForm.get("buyerFilter")?.value,n=this.filterForm.get("unitFilter")?.value,i=this.buyerFilterMobileId?.nativeElement.value,l=this.unitFilterMobileId?.nativeElement.value;(t||n||i||l)&&(this.filterForm.reset(),this.filterFormMobile.reset(),this.searchUnitLevelOrders()),this.unitFilterMobileValue=null,this.buyerFilterMobileValue=null}launchMobileFilters(){this.renderer.setStyle(this.filterNav.nativeElement,"display","flex"),this.renderer.setStyle(this.filterNav.nativeElement,"width","100%"),this.renderer.setStyle(document.body,"overflow","hidden")}searchUnitLevelOrdersForMobile(){this.getFormValuesForMobileAndEmitFilterEvent(),this.closeFilterNav()}getFormValuesForMobileAndEmitFilterEvent(){const t=this.filterFormMobile.get("buyerFilterMobile")?.value;this.buyerFilterMobileValue=t;const n=this.filterFormMobile.get("unitFilterMobile")?.value;this.unitFilterMobileValue=n,this.filterForm.setValue({buyerFilter:t,unitFilter:n}),this.emitFilterEvent(t,n)}closeFilterNav(){this.renderer.setStyle(this.filterNav.nativeElement,"display","none"),this.renderer.setStyle(document.body,"overflow",""),this.renderer.setStyle(this.filterNavUnit.nativeElement,"display","none"),this.renderer.setStyle(this.filterNavBuyer.nativeElement,"display","none"),this.renderer.setStyle(this.filterNav.nativeElement,"width","0"),this.filterFormMobile.patchValue({buyerFilterMobile:this.buyerFilterMobileValue,unitFilterMobile:this.unitFilterMobileValue})}backFilterSubNav(){this.renderer.setStyle(this.filterNavUnit.nativeElement,"display","none"),this.renderer.setStyle(this.filterNavBuyer.nativeElement,"display","none"),this.renderer.setStyle(this.filterNav.nativeElement,"display","flex"),this.filterFormMobile.patchValue({buyerFilterMobile:this.buyerFilterMobileValue,unitFilterMobile:this.unitFilterMobileValue})}launchSubNav(t){this.renderer.setStyle(this.filterNav.nativeElement,"display","none"),t===this.filterByUnit?this.renderer.setStyle(this.filterNavUnit.nativeElement,"display","block"):t===this.filterByBuyer&&this.renderer.setStyle(this.filterNavBuyer.nativeElement,"display","block")}clearUnit(){this.filterForm.get("unitFilter")?.reset(),this.searchUnitLevelOrders()}clearBuyer(){this.filterForm.get("buyerFilter")?.reset(),this.searchUnitLevelOrders()}clearUnitMobile(){this.filterFormMobile.get("unitFilterMobile")?.reset(),this.renderer.setStyle(document.body,"overflow",""),this.unitFilterMobileValue=null,this.getFormValuesForMobileAndEmitFilterEvent()}clearBuyerMobile(){this.filterFormMobile.get("buyerFilterMobile")?.reset(),this.renderer.setStyle(document.body,"overflow",""),this.buyerFilterMobileValue=null,this.getFormValuesForMobileAndEmitFilterEvent()}searchBuyer(t){const n=t.value;(!n||""===n)&&this.clearBuyer()}searchUnit(t){const n=t.value;(!n||""===n)&&this.clearUnit()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.Qsj))},r.\u0275cmp=e.Xpm({type:r,selectors:[["cx-unit-level-order-history-filter"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Le,5,e.SBq),e.Gf(me,5,e.SBq),e.Gf(xe,5,e.SBq),e.Gf(Ue,5,e.SBq),e.Gf(Ze,5,e.SBq)),2&t){let i;e.iGM(i=e.CRH())&&(n.filterNav=i.first),e.iGM(i=e.CRH())&&(n.filterNavUnit=i.first),e.iGM(i=e.CRH())&&(n.filterNavBuyer=i.first),e.iGM(i=e.CRH())&&(n.buyerFilterMobileId=i.first),e.iGM(i=e.CRH())&&(n.unitFilterMobileId=i.first)}},outputs:{filterListEvent:"filterListEvent"},decls:129,vars:129,consts:[[1,"cx-filter"],["filterNav",""],[1,"cx-filter-list"],["id","closeFilterNavBtn","type","button",3,"click"],["aria-hidden","true",3,"type"],[1,"cx-filter-list","cx-filter-list-border",3,"click"],["type","button"],[3,"formGroup"],["id","cx-unit-level-order-history-filter-nav-sub-buyer",1,"cx-filter-nav"],["filterNavBuyer",""],[1,"cx-filter-nav-div"],[1,"cx-filter-back-button",3,"click"],["type","button",3,"click"],["formControlName","buyerFilterMobile",1,"form-control","buyer-filter-mobile",3,"placeholder","input","keydown.enter"],["buyerFilterMobileId",""],["id","clearBuyerMobileBtn",1,"reset","cx-unit-level-order-history-filter-reset-button",3,"mousedown","keydown.enter"],[3,"type"],["role","presentation",1,"search-icon"],[1,"search-icon-filter",3,"type"],[1,"cx-clear-btn-container"],["type","button",1,"cx-action-link","cx-clear-btn",3,"click"],["id","cx-unit-level-order-history-filter-nav-sub-unit",1,"cx-filter-nav"],["filterNavUnit",""],["formControlName","unitFilterMobile",1,"form-control","unit-filter-mobile",3,"placeholder","input","keydown.enter"],["unitFilterMobileId",""],["id","clearUnitMobileBtn",1,"reset","cx-unit-level-order-history-filter-reset-button",3,"mousedown","keydown.enter"],[3,"formGroup","keydown.enter"],[1,"cx-unit-level-order-history-filter-div-wrapper"],["role","search",1,"cx-unit-level-order-history-filter-label-wrapper"],[1,"cx-unit-level-order-history-filter-label"],["formControlName","buyerFilter",1,"form-control","cx-unit-level-order-history-filter-input",3,"placeholder","input"],["buyerFilterId",""],["id","clearBuyerBtn",1,"reset","cx-unit-level-order-history-filter-reset-button",3,"mousedown","keydown.enter"],["formControlName","unitFilter",1,"form-control","cx-unit-level-order-history-filter-input",3,"placeholder","input"],["unitFilterId",""],["id","clearUnitBtn","type","button",1,"reset","cx-unit-level-order-history-filter-reset-button",3,"mousedown","keydown.enter"],[1,"cx-unit-level-order-history-filter-form-button-block"],["id","clearAllBtn","type","button",1,"cx-action-link","cx-clear-btn",3,"click"],["id","searchUnitLevelOrdersBtn","type","button",1,"btn","btn-primary","unit-level-order-history-search",3,"click"],[1,"cx-unit-level-order-history-filter-form-mobile"],["id","filterByBtn",1,"btn","btn-action","btn-block","dialog-trigger",3,"click"],["class","cx-unit-level-order-history-filters-show-and-remove",4,"ngIf"],[1,"cx-unit-level-order-history-filters-show-and-remove"],[1,"cx-selected-filters"],[4,"ngIf"],[1,"cx-clear-filter"],["id","removeAppliedFiltersBtn","type","button",1,"cx-action-link","cx-clear-btn",3,"click"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0,1),e.ALo(2,"cxTranslate"),e.TgZ(3,"div",2)(4,"span"),e._uU(5),e.ALo(6,"cxTranslate"),e.qZA(),e.TgZ(7,"button",3),e.NdJ("click",function(){return n.closeFilterNav()}),e.ALo(8,"cxTranslate"),e._UZ(9,"cx-icon",4),e.qZA()(),e.TgZ(10,"div",5),e.NdJ("click",function(){return n.launchSubNav(n.filterByBuyer)}),e.TgZ(11,"span"),e._uU(12),e.ALo(13,"cxTranslate"),e.qZA(),e.TgZ(14,"button",6),e.ALo(15,"cxTranslate"),e._UZ(16,"cx-icon",4),e.qZA()(),e.TgZ(17,"div",5),e.NdJ("click",function(){return n.launchSubNav(n.filterByUnit)}),e.TgZ(18,"span"),e._uU(19),e.ALo(20,"cxTranslate"),e.qZA(),e.TgZ(21,"button",6),e.ALo(22,"cxTranslate"),e._UZ(23,"cx-icon",4),e.qZA()()(),e.TgZ(24,"form",7)(25,"div",8,9),e.ALo(27,"cxTranslate"),e.TgZ(28,"div",10)(29,"div",2)(30,"div",11),e.NdJ("click",function(){return n.backFilterSubNav()}),e.TgZ(31,"button",6),e._UZ(32,"cx-icon",4),e.qZA(),e.TgZ(33,"span"),e._uU(34),e.ALo(35,"cxTranslate"),e.qZA()(),e.TgZ(36,"button",12),e.NdJ("click",function(){return n.closeFilterNav()}),e.ALo(37,"cxTranslate"),e._UZ(38,"cx-icon",4),e.qZA()(),e.TgZ(39,"label")(40,"input",13,14),e.NdJ("input",function(){e.CHM(i);const d=e.MAs(41);return e.KtG(n.searchBuyer(d))})("keydown.enter",function(){return n.searchUnitLevelOrdersForMobile()}),e.ALo(42,"cxTranslate"),e.ALo(43,"cxTranslate"),e.qZA(),e.TgZ(44,"button",15),e.NdJ("mousedown",function(){return n.clearBuyerMobile()})("keydown.enter",function(){return n.clearBuyerMobile()}),e.ALo(45,"cxTranslate"),e._UZ(46,"cx-icon",16),e.qZA(),e.TgZ(47,"div",17),e._UZ(48,"cx-icon",18),e.qZA()(),e.TgZ(49,"div",19)(50,"button",20),e.NdJ("click",function(){return n.clearBuyerMobile()}),e._uU(51),e.ALo(52,"cxTranslate"),e.qZA()()()(),e.TgZ(53,"div",21,22),e.ALo(55,"cxTranslate"),e.TgZ(56,"div",10)(57,"div",2)(58,"div",11),e.NdJ("click",function(){return n.backFilterSubNav()}),e.TgZ(59,"button",6),e._UZ(60,"cx-icon",4),e.qZA(),e.TgZ(61,"span"),e._uU(62),e.ALo(63,"cxTranslate"),e.qZA()(),e.TgZ(64,"button",12),e.NdJ("click",function(){return n.closeFilterNav()}),e.ALo(65,"cxTranslate"),e._UZ(66,"cx-icon",4),e.qZA()(),e.TgZ(67,"label")(68,"input",23,24),e.NdJ("input",function(){e.CHM(i);const d=e.MAs(69);return e.KtG(n.searchUnit(d))})("keydown.enter",function(){return n.searchUnitLevelOrdersForMobile()}),e.ALo(70,"cxTranslate"),e.ALo(71,"cxTranslate"),e.qZA(),e.TgZ(72,"button",25),e.NdJ("mousedown",function(){return n.clearUnitMobile()})("keydown.enter",function(){return n.clearUnitMobile()}),e.ALo(73,"cxTranslate"),e._UZ(74,"cx-icon",16),e.qZA(),e.TgZ(75,"div",17),e._UZ(76,"cx-icon",18),e.qZA()(),e.TgZ(77,"div",19)(78,"button",20),e.NdJ("click",function(){return n.clearUnitMobile()}),e._uU(79),e.ALo(80,"cxTranslate"),e.qZA()()()()(),e.TgZ(81,"form",26),e.NdJ("keydown.enter",function(){return n.searchUnitLevelOrders()}),e.TgZ(82,"div")(83,"div",27)(84,"div")(85,"span"),e._uU(86),e.ALo(87,"cxTranslate"),e.qZA(),e.TgZ(88,"div",28),e.ALo(89,"cxTranslate"),e.TgZ(90,"label",29)(91,"input",30,31),e.NdJ("input",function(){e.CHM(i);const d=e.MAs(92);return e.KtG(n.searchBuyer(d))}),e.ALo(93,"cxTranslate"),e.ALo(94,"cxTranslate"),e.qZA(),e.TgZ(95,"button",32),e.NdJ("mousedown",function(){return n.clearBuyer()})("keydown.enter",function(){return n.clearBuyer()}),e.ALo(96,"cxTranslate"),e._UZ(97,"cx-icon",16),e.qZA(),e.TgZ(98,"div",17),e._UZ(99,"cx-icon",18),e.qZA()()()(),e.TgZ(100,"div")(101,"span"),e._uU(102),e.ALo(103,"cxTranslate"),e.qZA(),e.TgZ(104,"div",28),e.ALo(105,"cxTranslate"),e.TgZ(106,"label",29)(107,"input",33,34),e.NdJ("input",function(){e.CHM(i);const d=e.MAs(108);return e.KtG(n.searchUnit(d))}),e.ALo(109,"cxTranslate"),e.ALo(110,"cxTranslate"),e.qZA(),e.TgZ(111,"button",35),e.NdJ("mousedown",function(){return n.clearUnit()})("keydown.enter",function(){return n.clearUnit()}),e.ALo(112,"cxTranslate"),e._UZ(113,"cx-icon",16),e.qZA(),e.TgZ(114,"div",17),e._UZ(115,"cx-icon",18),e.qZA()()()()(),e.TgZ(116,"div",36)(117,"button",37),e.NdJ("click",function(){return n.clearAll()}),e._uU(118),e.ALo(119,"cxTranslate"),e.qZA(),e.TgZ(120,"button",38),e.NdJ("click",function(){return n.searchUnitLevelOrders()}),e._uU(121),e.ALo(122,"cxTranslate"),e.qZA()()()(),e.TgZ(123,"div",39)(124,"button",40),e.NdJ("click",function(){return n.launchMobileFilters()}),e._UZ(125,"cx-icon",16),e._uU(126),e.ALo(127,"cxTranslate"),e.qZA(),e.YNc(128,Fe,11,9,"div",41),e.qZA()}if(2&t){const i=e.MAs(41),l=e.MAs(69),d=e.MAs(92),f=e.MAs(108);e.uIk("aria-label",e.lcZ(2,61,"unitLevelOrderHistory.filterBy")),e.xp6(5),e.Oqu(e.lcZ(6,63,"unitLevelOrderHistory.filterBy")),e.xp6(2),e.uIk("aria-label",e.lcZ(8,65,"common.close")),e.xp6(2),e.Q6J("type",n.iconTypes.CLOSE),e.xp6(3),e.Oqu(e.lcZ(13,67,"unitLevelOrderHistory.buyer")),e.xp6(2),e.uIk("aria-label",e.lcZ(15,69,"unitLevelOrderHistory.filterByBuyerLabel")),e.xp6(2),e.Q6J("type",n.iconTypes.CARET_RIGHT),e.xp6(3),e.Oqu(e.lcZ(20,71,"unitLevelOrderHistory.unit")),e.xp6(2),e.uIk("aria-label",e.lcZ(22,73,"unitLevelOrderHistory.filterByUnitLabel")),e.xp6(2),e.Q6J("type",n.iconTypes.CARET_RIGHT),e.xp6(1),e.Q6J("formGroup",n.filterFormMobile),e.xp6(1),e.uIk("aria-label",e.lcZ(27,75,"unitLevelOrderHistory.filterBy")),e.xp6(7),e.Q6J("type",n.iconTypes.CARET_LEFT),e.xp6(2),e.Oqu(e.lcZ(35,77,"unitLevelOrderHistory.filterByBuyer")),e.xp6(2),e.uIk("aria-label",e.lcZ(37,79,"common.close")),e.xp6(2),e.Q6J("type",n.iconTypes.CLOSE),e.xp6(1),e.ekj("dirty",!!i.value),e.xp6(1),e.s9C("placeholder",e.lcZ(43,83,"unitLevelOrderHistory.filterByBuyerPlaceholder")),e.uIk("aria-label",e.lcZ(42,81,"unitLevelOrderHistory.filterByBuyerPlaceholder")),e.xp6(4),e.uIk("aria-label",e.lcZ(45,85,"common.reset")),e.xp6(2),e.Q6J("type",n.iconTypes.RESET),e.xp6(2),e.Q6J("type",n.iconTypes.SEARCH),e.xp6(3),e.hij(" ",e.lcZ(52,87,"unitLevelOrderHistory.clearAll")," "),e.xp6(2),e.uIk("aria-label",e.lcZ(55,89,"unitLevelOrderHistory.filterBy")),e.xp6(7),e.Q6J("type",n.iconTypes.CARET_LEFT),e.xp6(2),e.Oqu(e.lcZ(63,91,"unitLevelOrderHistory.filterByUnit")),e.xp6(2),e.uIk("aria-label",e.lcZ(65,93,"common.close")),e.xp6(2),e.Q6J("type",n.iconTypes.CLOSE),e.xp6(1),e.ekj("dirty",!!l.value),e.xp6(1),e.s9C("placeholder",e.lcZ(71,97,"unitLevelOrderHistory.filterByUnitPlaceholder")),e.uIk("aria-label",e.lcZ(70,95,"unitLevelOrderHistory.filterByUnitPlaceholder")),e.xp6(4),e.uIk("aria-label",e.lcZ(73,99,"common.reset")),e.xp6(2),e.Q6J("type",n.iconTypes.RESET),e.xp6(2),e.Q6J("type",n.iconTypes.SEARCH),e.xp6(3),e.hij(" ",e.lcZ(80,101,"unitLevelOrderHistory.clearAll")," "),e.xp6(2),e.Q6J("formGroup",n.filterForm),e.xp6(5),e.hij(" ",e.lcZ(87,103,"unitLevelOrderHistory.buyer")," "),e.xp6(2),e.uIk("aria-label",e.lcZ(89,105,"unitLevelOrderHistory.filterByBuyerAriaLabel")),e.xp6(2),e.ekj("dirty",!!d.value),e.xp6(1),e.s9C("placeholder",e.lcZ(94,109,"unitLevelOrderHistory.filterByBuyerPlaceholder")),e.uIk("aria-label",e.lcZ(93,107,"unitLevelOrderHistory.filterByBuyerPlaceholder")),e.xp6(4),e.uIk("aria-label",e.lcZ(96,111,"common.reset")),e.xp6(2),e.Q6J("type",n.iconTypes.RESET),e.xp6(2),e.Q6J("type",n.iconTypes.SEARCH),e.xp6(3),e.hij(" ",e.lcZ(103,113,"unitLevelOrderHistory.unit")," "),e.xp6(2),e.uIk("aria-label",e.lcZ(105,115,"unitLevelOrderHistory.filterByUnitAriaLabel")),e.xp6(2),e.ekj("dirty",!!f.value),e.xp6(1),e.s9C("placeholder",e.lcZ(110,119,"unitLevelOrderHistory.filterByUnitPlaceholder")),e.uIk("aria-label",e.lcZ(109,117,"unitLevelOrderHistory.filterByUnitPlaceholder")),e.xp6(4),e.uIk("aria-label",e.lcZ(112,121,"common.reset")),e.xp6(2),e.Q6J("type",n.iconTypes.RESET),e.xp6(2),e.Q6J("type",n.iconTypes.SEARCH),e.xp6(3),e.hij(" ",e.lcZ(119,123,"unitLevelOrderHistory.clearAll")," "),e.xp6(3),e.hij(" ",e.lcZ(122,125,"unitLevelOrderHistory.search")," "),e.xp6(4),e.Q6J("type",n.iconTypes.FILTER),e.xp6(1),e.hij(" ",e.lcZ(127,127,"unitLevelOrderHistory.filterBy")," "),e.xp6(2),e.Q6J("ngIf",n.buyerFilterMobileValue||n.unitFilterMobileValue)}},dependencies:[v.O5,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,_.oJW,s.X$D],encapsulation:2}),r})(),Pe=(()=>{class r{constructor(t,n,i){this.routing=t,this.unitOrdersFacade=n,this.translation=i,this.PAGE_SIZE=5,this.queryParams={currentPage:0,sortCode:"",filters:""},this.orders$=this.unitOrdersFacade.getOrderHistoryList(this.PAGE_SIZE).pipe((0,M.b)(l=>{l?.pagination?.sort&&(this.sortType=l.pagination.sort,this.queryParams.sortCode=this.sortType)})),this.isLoaded$=this.unitOrdersFacade.getOrderHistoryListLoaded()}ngOnDestroy(){this.unitOrdersFacade.clearOrderList()}filterChange(t){this.updateQueryParams({...t,currentPage:0}),this.fetchOrders(this.queryParams)}updateQueryParams(t){Object.entries(t).forEach(n=>this.queryParams[n[0]]=n[1])}changeSortCode(t){this.updateQueryParams({sortCode:t,currentPage:0}),this.sortType=t,this.fetchOrders(this.queryParams)}pageChange(t){this.updateQueryParams({currentPage:t}),this.fetchOrders(this.queryParams)}goToOrderDetail(t){this.routing.go({cxRoute:"unitLevelOrderDetail",params:t})}getSortLabels(){return(0,O.aj)([this.translation.translate("sorting.date"),this.translation.translate("sorting.orderNumber"),this.translation.translate("unitLevelOrderHistorySorting.orgUnit"),this.translation.translate("unitLevelOrderHistorySorting.buyer"),this.translation.translate("unitLevelOrderHistorySorting.orgUnitDesc"),this.translation.translate("unitLevelOrderHistorySorting.buyerDesc")]).pipe((0,c.U)(([t,n,i,l,d,f])=>({byDate:t,byOrderNumber:n,byOrgUnit:i,byBuyer:l,byOrgUnitDesc:d,byBuyerDesc:f})))}fetchOrders(t){this.unitOrdersFacade.loadOrderList(this.PAGE_SIZE,t.currentPage,t.filters,t.sortCode)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(s.Znh),e.Y36(x.QP),e.Y36(s.D7D))},r.\u0275cmp=e.Xpm({type:r,selectors:[["cx-unit-level-order-history"]],decls:2,vars:5,consts:[[4,"ngIf"],[3,"filterListEvent"],[1,"cx-unit-level-order-history-body"],[4,"ngIf","ngIfElse"],["noOrder",""],[1,"cx-unit-level-order-history-sort","top"],[1,"cx-unit-level-order-history-form-group","form-group"],["ariaControls","order-history-table",3,"sortOptions","sortLabels","selectedOption","placeholder","ariaLabel","sortListEvent"],[1,"cx-unit-level-order-history-total-result"],[3,"pagination"],["class","cx-unit-level-order-history-pagination",4,"ngIf"],["id","order-history-table",1,"table","cx-unit-level-order-history-table"],[1,"cx-unit-level-order-history-thead-mobile"],["scope","col"],[3,"click",4,"ngFor","ngForOf"],[1,"cx-unit-level-order-history-sort","bottom"],[1,"cx-unit-level-order-history-pagination"],[3,"pagination","viewPageEvent"],[3,"click"],[1,"cx-unit-level-order-history-code"],[1,"cx-unit-level-order-history-label"],[1,"cx-unit-level-order-history-value",3,"routerLink"],[1,"cx-unit-level-order-history-placed"],[1,"cx-unit-level-order-history-status"],[1,"cx-unit-level-order-history-buyer"],[1,"text-ellipsis"],[1,"cx-unit-level-order-history-unit"],[1,"cx-unit-level-order-history-total"],["class","cx-unit-level-order-history-no-order",4,"ngIf"],[1,"cx-unit-level-order-history-no-order"],["routerLinkActive","active",1,"btn","btn-primary","btn-block",3,"routerLink"]],template:function(t,n){1&t&&(e.YNc(0,Be,2,1,"ng-container",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.VKq(3,ke,e.lcZ(1,1,n.orders$)))},dependencies:[v.sg,v.O5,U.rH,U.Od,_.iNG,_.QtL,_.S9_,Ge,v.Ov,s.l2T,s.X$D,s.dgE],encapsulation:2,changeDetection:0}),r})(),je=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[v.ez,u.UX,s.LUR,_.QX1]}),r})(),Ve=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[(0,s.i51)({cmsComponents:{UnitLevelOrderHistoryComponent:{component:Pe,guards:[s.a1M,Z]}}})],imports:[v.ez,U.Bz,u.UX,ae.A0,_.xuE,s.bhT,s.LUR,je]}),r})(),F=(()=>{class r{constructor(t,n){this.unitOrderFacade=t,this.routingService=n,this.orderCode$=this.routingService.getRouterState().pipe((0,c.U)(i=>i.state.params.orderCode),(0,le.x)()),this.orderLoad$=this.orderCode$.pipe((0,M.b)(i=>{i?this.unitOrderFacade.loadOrderDetails(i):this.unitOrderFacade.clearOrderDetails()}),(0,se.d)({bufferSize:1,refCount:!0}))}getOrderDetails(){return this.orderLoad$.pipe((0,D.w)(()=>this.unitOrderFacade.getOrderDetails()))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(x.QP),e.LFG(s.Znh))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Ye=(()=>{class r{constructor(t,n){this.translation=t,this.unitLevelOrderDetailsService=n}ngOnInit(){this.order$=this.unitLevelOrderDetailsService.getOrderDetails()}getOrderCodeCardContent(t){return this.translation.translate("orderDetails.orderNumber").pipe((0,p.h)(()=>Boolean(t)),(0,c.U)(n=>({title:n,text:[t]})))}getOrderCurrentDateCardContent(t){return this.translation.translate("orderDetails.placedOn").pipe((0,p.h)(()=>Boolean(t)),(0,c.U)(n=>({title:n,text:[t]})))}getOrderStatusCardContent(t){return(0,O.aj)([this.translation.translate("orderDetails.status"),t?this.translation.translate("orderDetails.statusDisplay_"+t):(0,C.of)("")]).pipe((0,p.h)(()=>Boolean(t)),(0,c.U)(([n,i])=>({title:n,text:[i]})))}getPurchaseOrderNumber(t){return(0,O.aj)([this.translation.translate("orderDetails.purchaseOrderNumber"),this.translation.translate("orderDetails.emptyPurchaseOrderId")]).pipe((0,p.h)(()=>Boolean(t)),(0,c.U)(([n,i])=>({title:n,text:[t||i]})))}getMethodOfPaymentCardContent(t){return(0,O.aj)([this.translation.translate("orderDetails.methodOfPayment"),this.translation.translate("paymentTypes.paymentType_ACCOUNT"),this.translation.translate("paymentTypes.paymentType_CARD")]).pipe((0,p.h)(()=>Boolean(t)),(0,c.U)(([n,i,l])=>({title:n,text:[Boolean(t)?l:i]})))}getCostCenterCardContent(t){return this.translation.translate("orderDetails.costCenter").pipe((0,p.h)(()=>Boolean(t)),(0,c.U)(n=>({title:n,textBold:t?.name,text:[`(${t?.unit?.name})`]})))}getAddressCardContent(t){return this.translation.translate("addressCard.shipTo").pipe((0,p.h)(()=>Boolean(t)),(0,c.U)(n=>{const i=this.normalizeFormattedAddress(t?.formattedAddress??"");return{title:n,textBold:`${t?.firstName} ${t?.lastName}`,text:[i,t?.country?.name]}}))}getDeliveryModeCardContent(t){return this.translation.translate("orderDetails.shippingMethod").pipe((0,p.h)(()=>Boolean(t)),(0,c.U)(n=>({title:n,textBold:t?.name,text:[t?.description,t?.deliveryCost?.formattedValue?t.deliveryCost?.formattedValue:""]})))}getPaymentInfoCardContent(t){return(0,O.aj)([this.translation.translate("paymentForm.payment"),this.translation.translate("paymentCard.expires",{month:t?t.expiryMonth:"",year:t?t.expiryYear:""})]).pipe((0,p.h)(()=>Boolean(t)),(0,c.U)(([n,i])=>({title:n,textBold:t?.accountHolderName,text:[t?.cardNumber,i]})))}getBillingAddressCardContent(t){return this.translation.translate("paymentForm.billingAddress").pipe((0,p.h)(()=>Boolean(t)),(0,c.U)(n=>({title:n,textBold:`${t?.firstName} ${t?.lastName}`,text:[t?.formattedAddress,t?.country?.name]})))}getBuyerNameCardContent(t){return this.translation.translate("unitLevelOrderDetails.buyer").pipe((0,p.h)(()=>Boolean(t)),(0,c.U)(n=>({title:n,text:[t?.name,`(${t?.email})`]})))}getUnitNameCardContent(t){return this.translation.translate("orderDetails.unit").pipe((0,p.h)(()=>Boolean(t)),(0,c.U)(n=>({title:n,text:[t]})))}normalizeFormattedAddress(t){return t.split(",").map(i=>i.trim()).filter(Boolean).join(", ")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(s.D7D),e.Y36(F))},r.\u0275cmp=e.Xpm({type:r,selectors:[["cx-unit-level-order-overview"]],decls:2,vars:3,consts:[["class","cx-order-summary",4,"ngIf"],[1,"cx-order-summary"],[1,"container"],[1,"cx-summary-card"],[3,"content"],[1,"cx-display-inline",3,"content"],[4,"ngIf"]],template:function(t,n){1&t&&(e.YNc(0,qe,24,27,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.order$))},dependencies:[v.O5,_.AkF,v.Ov,s.dgE],encapsulation:2,changeDetection:0}),r})(),$e=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[v.ez,s.LUR,_.dTQ]}),r})(),ze=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[(0,s.i51)({cmsComponents:{UnitLevelOrderDetailsOverviewComponent:{component:Ye,guards:[s.a1M,Z]},UnitLevelOrderDetailsItemsComponent:{component:b.vI,guards:[s.a1M,Z],providers:[{provide:b.SE,useExisting:F}]},UnitLevelOrderDetailsTotalsComponent:{component:b.sQ,guards:[s.a1M,Z],providers:[{provide:b.SE,useExisting:F}]}}})],imports:[v.ez,$e]}),r})(),Ke=(()=>{class r{constructor(t){this.unitLevelOrderDetailService=t,this.type=Oe.lM.UNIT_ORDER_DETAILS}getEntries(){return this.unitLevelOrderDetailService.getOrderDetails().pipe((0,c.U)(t=>t?.entries??[]))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(F))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Xe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[{provide:x.f4,useExisting:Ke}],imports:[U.Bz,Ve,ze]}),r})();var J=a(5503),We=a(529),et=a(3148);let tt=(()=>{class r{constructor(t,n,i){this.http=t,this.occEndpoints=n,this.converter=i}loadUnitOrderHistory(t,n,i,l,d){const f={};n&&(f.pageSize=n.toString()),i&&(f.currentPage=i.toString()),l&&(f.filters=l.toString()),d&&(f.sort=d.toString());const ot=this.occEndpoints.buildUrl("unitLevelOrderHistory",{urlParams:{userId:t},queryParams:f});return this.http.get(ot).pipe(this.converter.pipeable(J.Rc))}loadUnitOrderDetail(t,n){const i=this.occEndpoints.buildUrl("unitLevelOrderDetail",{urlParams:{userId:t,orderId:n}});return this.http.get(i).pipe(this.converter.pipeable(J.YA))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(We.eN),e.LFG(s.Lz0),e.LFG(s.IXI))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();const rt={backend:{occ:{endpoints:{unitLevelOrderHistory:"/orgUsers/${userId}/orgUnits/orders",unitLevelOrderDetail:"orgUsers/${userId}/orgUnits/orders/${orderId}?fields=FULL"}}}};let nt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[(0,s.i51)(rt),{provide:q,useClass:tt},{provide:J.YA,useExisting:et.mb,multi:!0}],imports:[v.ez]}),r})(),it=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[he.forRoot(),nt,Xe]}),r})()}}]);