/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ChangeDetectionStrategy, Component, Input } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "../amend-order.service";
import * as i2 from "@angular/common";
import * as i3 from "@spartacus/storefront";
import * as i4 from "@spartacus/core";
export class CancelOrReturnItemsComponent {
    constructor(orderAmendService) {
        this.orderAmendService = orderAmendService;
        this.isConfirmation = false;
        this.form$ = this.orderAmendService.getForm();
    }
    getControl(form, entry) {
        const control = (form.get('entries')?.get(entry.entryNumber?.toString() ?? ''));
        return control;
    }
    setAll(form) {
        this.entries.forEach((entry) => this.getControl(form, entry).setValue(this.getMaxAmendQuantity(entry)));
    }
    getItemPrice(entry) {
        return this.orderAmendService.getAmendedPrice(entry);
    }
    getMaxAmendQuantity(entry) {
        return this.orderAmendService.getMaxAmendQuantity(entry);
    }
    isCancellation() {
        return this.orderAmendService.isCancellation();
    }
}
CancelOrReturnItemsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: CancelOrReturnItemsComponent, deps: [{ token: i1.OrderAmendService }], target: i0.ɵɵFactoryTarget.Component });
CancelOrReturnItemsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: CancelOrReturnItemsComponent, selector: "cx-amend-order-items", inputs: { entries: "entries", isConfirmation: "isConfirmation" }, ngImport: i0, template: "<div *ngIf=\"form$ | async as form\">\n  <button\n    *ngIf=\"!isConfirmation\"\n    class=\"btn btn-link cx-action-link\"\n    (click)=\"setAll(form)\"\n  >\n    {{ 'orderDetails.cancellationAndReturn.setAll' | cxTranslate }}\n  </button>\n\n  <table class=\"cx-amend-order-items\">\n    <caption class=\"cx-visually-hidden\">\n      {{\n        'orderDetails.caption' | cxTranslate\n      }}\n    </caption>\n    <thead>\n      <tr>\n        <th role=\"columnheader\" class=\"cx-item-list-desc\">\n          {{ 'orderDetails.cancellationAndReturn.item' | cxTranslate }}\n        </th>\n        <th role=\"columnheader\" class=\"cx-item-list-price\">\n          {{ 'orderDetails.cancellationAndReturn.itemPrice' | cxTranslate }}\n        </th>\n        <th\n          *ngIf=\"!isConfirmation\"\n          role=\"columnheader\"\n          class=\"cx-item-list-amend-qty\"\n        >\n          {{ 'orderDetails.cancellationAndReturn.quantity' | cxTranslate }}\n        </th>\n        <th role=\"columnheader\" class=\"cx-item-list-qty\">\n          {{\n            (isCancellation()\n              ? 'orderDetails.cancellationAndReturn.cancelQty'\n              : 'orderDetails.cancellationAndReturn.returnQty'\n            ) | cxTranslate\n          }}\n        </th>\n        <th\n          *ngIf=\"isConfirmation\"\n          role=\"columnheader\"\n          class=\"cx-item-list-total\"\n        >\n          {{ 'orderDetails.cancellationAndReturn.totalPrice' | cxTranslate }}\n        </th>\n      </tr>\n    </thead>\n    <tbody class=\"cx-item-list-items\">\n      <!--    TODO: This should be a separate component-->\n      <tr\n        *ngFor=\"let item of entries; let i = index\"\n        class=\"cx-item-list-row cx-amend-order-item-row\"\n      >\n        <td role=\"cell\">\n          <div class=\"cx-table-item-container\">\n            <cx-media\n              [container]=\"item.product.images?.PRIMARY\"\n              format=\"thumbnail\"\n            ></cx-media>\n\n            <div class=\"cx-info\">\n              <div class=\"cx-name\">\n                {{ item.product.name }}\n              </div>\n\n              <div *ngIf=\"item.product.code\" class=\"cx-code\">\n                {{ 'cartItems.id' | cxTranslate }} {{ item.product.code }}\n              </div>\n            </div>\n\n            <ng-container *ngIf=\"item.product.baseOptions?.length\">\n              <div\n                *ngFor=\"\n                  let variant of item.product.baseOptions[0]?.selected\n                    ?.variantOptionQualifiers\n                \"\n                class=\"cx-property\"\n              >\n                <div class=\"cx-label\" *ngIf=\"variant.name\">\n                  {{ variant.name }}:\n                </div>\n                <div class=\"cx-value\" *ngIf=\"variant.value\">\n                  {{ variant.value }}\n                </div>\n              </div>\n            </ng-container>\n          </div>\n        </td>\n\n        <td role=\"cell\" class=\"cx-price\" *ngIf=\"item.basePrice\">\n          <div class=\"cx-mobile-header\">\n            {{ 'orderDetails.cancellationAndReturn.itemPrice' | cxTranslate }}\n          </div>\n          <div class=\"cx-value\">\n            {{ item.basePrice?.formattedValue }}\n          </div>\n        </td>\n\n        <td role=\"cell\" *ngIf=\"!isConfirmation\" class=\"cx-request-qty\">\n          <div\n            class=\"cx-mobile-header\"\n            title=\"{{ 'cartItems.quantityTitle' | cxTranslate }}\"\n          >\n            {{ 'orderDetails.cancellationAndReturn.quantity' | cxTranslate }}\n          </div>\n          <div class=\"cx-value\">\n            {{ getMaxAmendQuantity(item) }}\n          </div>\n        </td>\n\n        <td role=\"cell\" class=\"cx-quantity\">\n          <div class=\"cx-mobile-header\">\n            {{\n              (isCancellation()\n                ? 'orderDetails.cancellationAndReturn.cancelQty'\n                : 'orderDetails.cancellationAndReturn.returnQty'\n              ) | cxTranslate\n            }}\n          </div>\n          <div class=\"cx-value\">\n            <ng-container *ngIf=\"isConfirmation\">\n              {{ getControl(form, item).value }}\n            </ng-container>\n            <cx-item-counter\n              *ngIf=\"!isConfirmation\"\n              [min]=\"0\"\n              [max]=\"getMaxAmendQuantity(item)\"\n              [control]=\"getControl(form, item)\"\n            ></cx-item-counter>\n          </div>\n        </td>\n\n        <td role=\"cell\" *ngIf=\"isConfirmation\" class=\"cx-total\">\n          <div class=\"cx-mobile-header\">\n            {{ 'orderDetails.cancellationAndReturn.totalPrice' | cxTranslate }}\n          </div>\n          <div class=\"cx-value\">{{ getItemPrice(item)?.formattedValue }}</div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n", dependencies: [{ kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i3.MediaComponent, selector: "cx-media", inputs: ["container", "format", "alt", "role", "loading"], outputs: ["loaded"] }, { kind: "component", type: i3.ItemCounterComponent, selector: "cx-item-counter", inputs: ["control", "min", "max", "step", "allowZero", "readonly"] }, { kind: "pipe", type: i2.AsyncPipe, name: "async" }, { kind: "pipe", type: i4.TranslatePipe, name: "cxTranslate" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: CancelOrReturnItemsComponent, decorators: [{
            type: Component,
            args: [{ selector: 'cx-amend-order-items', changeDetection: ChangeDetectionStrategy.OnPush, template: "<div *ngIf=\"form$ | async as form\">\n  <button\n    *ngIf=\"!isConfirmation\"\n    class=\"btn btn-link cx-action-link\"\n    (click)=\"setAll(form)\"\n  >\n    {{ 'orderDetails.cancellationAndReturn.setAll' | cxTranslate }}\n  </button>\n\n  <table class=\"cx-amend-order-items\">\n    <caption class=\"cx-visually-hidden\">\n      {{\n        'orderDetails.caption' | cxTranslate\n      }}\n    </caption>\n    <thead>\n      <tr>\n        <th role=\"columnheader\" class=\"cx-item-list-desc\">\n          {{ 'orderDetails.cancellationAndReturn.item' | cxTranslate }}\n        </th>\n        <th role=\"columnheader\" class=\"cx-item-list-price\">\n          {{ 'orderDetails.cancellationAndReturn.itemPrice' | cxTranslate }}\n        </th>\n        <th\n          *ngIf=\"!isConfirmation\"\n          role=\"columnheader\"\n          class=\"cx-item-list-amend-qty\"\n        >\n          {{ 'orderDetails.cancellationAndReturn.quantity' | cxTranslate }}\n        </th>\n        <th role=\"columnheader\" class=\"cx-item-list-qty\">\n          {{\n            (isCancellation()\n              ? 'orderDetails.cancellationAndReturn.cancelQty'\n              : 'orderDetails.cancellationAndReturn.returnQty'\n            ) | cxTranslate\n          }}\n        </th>\n        <th\n          *ngIf=\"isConfirmation\"\n          role=\"columnheader\"\n          class=\"cx-item-list-total\"\n        >\n          {{ 'orderDetails.cancellationAndReturn.totalPrice' | cxTranslate }}\n        </th>\n      </tr>\n    </thead>\n    <tbody class=\"cx-item-list-items\">\n      <!--    TODO: This should be a separate component-->\n      <tr\n        *ngFor=\"let item of entries; let i = index\"\n        class=\"cx-item-list-row cx-amend-order-item-row\"\n      >\n        <td role=\"cell\">\n          <div class=\"cx-table-item-container\">\n            <cx-media\n              [container]=\"item.product.images?.PRIMARY\"\n              format=\"thumbnail\"\n            ></cx-media>\n\n            <div class=\"cx-info\">\n              <div class=\"cx-name\">\n                {{ item.product.name }}\n              </div>\n\n              <div *ngIf=\"item.product.code\" class=\"cx-code\">\n                {{ 'cartItems.id' | cxTranslate }} {{ item.product.code }}\n              </div>\n            </div>\n\n            <ng-container *ngIf=\"item.product.baseOptions?.length\">\n              <div\n                *ngFor=\"\n                  let variant of item.product.baseOptions[0]?.selected\n                    ?.variantOptionQualifiers\n                \"\n                class=\"cx-property\"\n              >\n                <div class=\"cx-label\" *ngIf=\"variant.name\">\n                  {{ variant.name }}:\n                </div>\n                <div class=\"cx-value\" *ngIf=\"variant.value\">\n                  {{ variant.value }}\n                </div>\n              </div>\n            </ng-container>\n          </div>\n        </td>\n\n        <td role=\"cell\" class=\"cx-price\" *ngIf=\"item.basePrice\">\n          <div class=\"cx-mobile-header\">\n            {{ 'orderDetails.cancellationAndReturn.itemPrice' | cxTranslate }}\n          </div>\n          <div class=\"cx-value\">\n            {{ item.basePrice?.formattedValue }}\n          </div>\n        </td>\n\n        <td role=\"cell\" *ngIf=\"!isConfirmation\" class=\"cx-request-qty\">\n          <div\n            class=\"cx-mobile-header\"\n            title=\"{{ 'cartItems.quantityTitle' | cxTranslate }}\"\n          >\n            {{ 'orderDetails.cancellationAndReturn.quantity' | cxTranslate }}\n          </div>\n          <div class=\"cx-value\">\n            {{ getMaxAmendQuantity(item) }}\n          </div>\n        </td>\n\n        <td role=\"cell\" class=\"cx-quantity\">\n          <div class=\"cx-mobile-header\">\n            {{\n              (isCancellation()\n                ? 'orderDetails.cancellationAndReturn.cancelQty'\n                : 'orderDetails.cancellationAndReturn.returnQty'\n              ) | cxTranslate\n            }}\n          </div>\n          <div class=\"cx-value\">\n            <ng-container *ngIf=\"isConfirmation\">\n              {{ getControl(form, item).value }}\n            </ng-container>\n            <cx-item-counter\n              *ngIf=\"!isConfirmation\"\n              [min]=\"0\"\n              [max]=\"getMaxAmendQuantity(item)\"\n              [control]=\"getControl(form, item)\"\n            ></cx-item-counter>\n          </div>\n        </td>\n\n        <td role=\"cell\" *ngIf=\"isConfirmation\" class=\"cx-total\">\n          <div class=\"cx-mobile-header\">\n            {{ 'orderDetails.cancellationAndReturn.totalPrice' | cxTranslate }}\n          </div>\n          <div class=\"cx-value\">{{ getItemPrice(item)?.formattedValue }}</div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.OrderAmendService }]; }, propDecorators: { entries: [{
                type: Input
            }], isConfirmation: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW1lbmQtb3JkZXItaXRlbXMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL29yZGVyL2NvbXBvbmVudHMvYW1lbmQtb3JkZXIvYW1lbmQtb3JkZXItaXRlbXMvYW1lbmQtb3JkZXItaXRlbXMuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vZmVhdHVyZS1saWJzL29yZGVyL2NvbXBvbmVudHMvYW1lbmQtb3JkZXIvYW1lbmQtb3JkZXItaXRlbXMvYW1lbmQtb3JkZXItaXRlbXMuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUVILE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sZUFBZSxDQUFDOzs7Ozs7QUFZMUUsTUFBTSxPQUFPLDRCQUE0QjtJQU12QyxZQUFzQixpQkFBb0M7UUFBcEMsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFtQjtRQUpqRCxtQkFBYyxHQUFHLEtBQUssQ0FBQztRQUVoQyxVQUFLLEdBQWlDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUVWLENBQUM7SUFFOUQsVUFBVSxDQUFDLElBQXNCLEVBQUUsS0FBaUI7UUFDbEQsTUFBTSxPQUFPLEdBQXVCLENBQ2xDLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDLENBQzlELENBQUM7UUFDRixPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDO0lBRUQsTUFBTSxDQUFDLElBQXNCO1FBQzNCLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FDN0IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUN2RSxDQUFDO0lBQ0osQ0FBQztJQUVELFlBQVksQ0FBQyxLQUFpQjtRQUM1QixPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVELG1CQUFtQixDQUFDLEtBQWlCO1FBQ25DLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFRCxjQUFjO1FBQ1osT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDakQsQ0FBQzs7eUhBL0JVLDRCQUE0Qjs2R0FBNUIsNEJBQTRCLDhIQ2xCekMsMHdKQThJQTsyRkQ1SGEsNEJBQTRCO2tCQUx4QyxTQUFTOytCQUNFLHNCQUFzQixtQkFFZix1QkFBdUIsQ0FBQyxNQUFNO3dHQUd0QyxPQUFPO3NCQUFmLEtBQUs7Z0JBQ0csY0FBYztzQkFBdEIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTUERYLUZpbGVDb3B5cmlnaHRUZXh0OiAyMDIzIFNBUCBTcGFydGFjdXMgdGVhbSA8c3BhcnRhY3VzLXRlYW1Ac2FwLmNvbT5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCB7IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBVbnR5cGVkRm9ybUNvbnRyb2wsIFVudHlwZWRGb3JtR3JvdXAgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBPcmRlckVudHJ5IH0gZnJvbSAnQHNwYXJ0YWN1cy9jYXJ0L2Jhc2Uvcm9vdCc7XG5pbXBvcnQgeyBQcmljZSB9IGZyb20gJ0BzcGFydGFjdXMvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBPcmRlckFtZW5kU2VydmljZSB9IGZyb20gJy4uL2FtZW5kLW9yZGVyLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjeC1hbWVuZC1vcmRlci1pdGVtcycsXG4gIHRlbXBsYXRlVXJsOiAnLi9hbWVuZC1vcmRlci1pdGVtcy5jb21wb25lbnQuaHRtbCcsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxufSlcbmV4cG9ydCBjbGFzcyBDYW5jZWxPclJldHVybkl0ZW1zQ29tcG9uZW50IHtcbiAgQElucHV0KCkgZW50cmllczogT3JkZXJFbnRyeVtdO1xuICBASW5wdXQoKSBpc0NvbmZpcm1hdGlvbiA9IGZhbHNlO1xuXG4gIGZvcm0kOiBPYnNlcnZhYmxlPFVudHlwZWRGb3JtR3JvdXA+ID0gdGhpcy5vcmRlckFtZW5kU2VydmljZS5nZXRGb3JtKCk7XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIG9yZGVyQW1lbmRTZXJ2aWNlOiBPcmRlckFtZW5kU2VydmljZSkge31cblxuICBnZXRDb250cm9sKGZvcm06IFVudHlwZWRGb3JtR3JvdXAsIGVudHJ5OiBPcmRlckVudHJ5KTogVW50eXBlZEZvcm1Db250cm9sIHtcbiAgICBjb25zdCBjb250cm9sID0gPFVudHlwZWRGb3JtQ29udHJvbD4oXG4gICAgICBmb3JtLmdldCgnZW50cmllcycpPy5nZXQoZW50cnkuZW50cnlOdW1iZXI/LnRvU3RyaW5nKCkgPz8gJycpXG4gICAgKTtcbiAgICByZXR1cm4gY29udHJvbDtcbiAgfVxuXG4gIHNldEFsbChmb3JtOiBVbnR5cGVkRm9ybUdyb3VwKTogdm9pZCB7XG4gICAgdGhpcy5lbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PlxuICAgICAgdGhpcy5nZXRDb250cm9sKGZvcm0sIGVudHJ5KS5zZXRWYWx1ZSh0aGlzLmdldE1heEFtZW5kUXVhbnRpdHkoZW50cnkpKVxuICAgICk7XG4gIH1cblxuICBnZXRJdGVtUHJpY2UoZW50cnk6IE9yZGVyRW50cnkpOiBQcmljZSB7XG4gICAgcmV0dXJuIHRoaXMub3JkZXJBbWVuZFNlcnZpY2UuZ2V0QW1lbmRlZFByaWNlKGVudHJ5KTtcbiAgfVxuXG4gIGdldE1heEFtZW5kUXVhbnRpdHkoZW50cnk6IE9yZGVyRW50cnkpIHtcbiAgICByZXR1cm4gdGhpcy5vcmRlckFtZW5kU2VydmljZS5nZXRNYXhBbWVuZFF1YW50aXR5KGVudHJ5KTtcbiAgfVxuXG4gIGlzQ2FuY2VsbGF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm9yZGVyQW1lbmRTZXJ2aWNlLmlzQ2FuY2VsbGF0aW9uKCk7XG4gIH1cbn1cbiIsIjxkaXYgKm5nSWY9XCJmb3JtJCB8IGFzeW5jIGFzIGZvcm1cIj5cbiAgPGJ1dHRvblxuICAgICpuZ0lmPVwiIWlzQ29uZmlybWF0aW9uXCJcbiAgICBjbGFzcz1cImJ0biBidG4tbGluayBjeC1hY3Rpb24tbGlua1wiXG4gICAgKGNsaWNrKT1cInNldEFsbChmb3JtKVwiXG4gID5cbiAgICB7eyAnb3JkZXJEZXRhaWxzLmNhbmNlbGxhdGlvbkFuZFJldHVybi5zZXRBbGwnIHwgY3hUcmFuc2xhdGUgfX1cbiAgPC9idXR0b24+XG5cbiAgPHRhYmxlIGNsYXNzPVwiY3gtYW1lbmQtb3JkZXItaXRlbXNcIj5cbiAgICA8Y2FwdGlvbiBjbGFzcz1cImN4LXZpc3VhbGx5LWhpZGRlblwiPlxuICAgICAge3tcbiAgICAgICAgJ29yZGVyRGV0YWlscy5jYXB0aW9uJyB8IGN4VHJhbnNsYXRlXG4gICAgICB9fVxuICAgIDwvY2FwdGlvbj5cbiAgICA8dGhlYWQ+XG4gICAgICA8dHI+XG4gICAgICAgIDx0aCByb2xlPVwiY29sdW1uaGVhZGVyXCIgY2xhc3M9XCJjeC1pdGVtLWxpc3QtZGVzY1wiPlxuICAgICAgICAgIHt7ICdvcmRlckRldGFpbHMuY2FuY2VsbGF0aW9uQW5kUmV0dXJuLml0ZW0nIHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgPC90aD5cbiAgICAgICAgPHRoIHJvbGU9XCJjb2x1bW5oZWFkZXJcIiBjbGFzcz1cImN4LWl0ZW0tbGlzdC1wcmljZVwiPlxuICAgICAgICAgIHt7ICdvcmRlckRldGFpbHMuY2FuY2VsbGF0aW9uQW5kUmV0dXJuLml0ZW1QcmljZScgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICA8L3RoPlxuICAgICAgICA8dGhcbiAgICAgICAgICAqbmdJZj1cIiFpc0NvbmZpcm1hdGlvblwiXG4gICAgICAgICAgcm9sZT1cImNvbHVtbmhlYWRlclwiXG4gICAgICAgICAgY2xhc3M9XCJjeC1pdGVtLWxpc3QtYW1lbmQtcXR5XCJcbiAgICAgICAgPlxuICAgICAgICAgIHt7ICdvcmRlckRldGFpbHMuY2FuY2VsbGF0aW9uQW5kUmV0dXJuLnF1YW50aXR5JyB8IGN4VHJhbnNsYXRlIH19XG4gICAgICAgIDwvdGg+XG4gICAgICAgIDx0aCByb2xlPVwiY29sdW1uaGVhZGVyXCIgY2xhc3M9XCJjeC1pdGVtLWxpc3QtcXR5XCI+XG4gICAgICAgICAge3tcbiAgICAgICAgICAgIChpc0NhbmNlbGxhdGlvbigpXG4gICAgICAgICAgICAgID8gJ29yZGVyRGV0YWlscy5jYW5jZWxsYXRpb25BbmRSZXR1cm4uY2FuY2VsUXR5J1xuICAgICAgICAgICAgICA6ICdvcmRlckRldGFpbHMuY2FuY2VsbGF0aW9uQW5kUmV0dXJuLnJldHVyblF0eSdcbiAgICAgICAgICAgICkgfCBjeFRyYW5zbGF0ZVxuICAgICAgICAgIH19XG4gICAgICAgIDwvdGg+XG4gICAgICAgIDx0aFxuICAgICAgICAgICpuZ0lmPVwiaXNDb25maXJtYXRpb25cIlxuICAgICAgICAgIHJvbGU9XCJjb2x1bW5oZWFkZXJcIlxuICAgICAgICAgIGNsYXNzPVwiY3gtaXRlbS1saXN0LXRvdGFsXCJcbiAgICAgICAgPlxuICAgICAgICAgIHt7ICdvcmRlckRldGFpbHMuY2FuY2VsbGF0aW9uQW5kUmV0dXJuLnRvdGFsUHJpY2UnIHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgPC90aD5cbiAgICAgIDwvdHI+XG4gICAgPC90aGVhZD5cbiAgICA8dGJvZHkgY2xhc3M9XCJjeC1pdGVtLWxpc3QtaXRlbXNcIj5cbiAgICAgIDwhLS0gICAgVE9ETzogVGhpcyBzaG91bGQgYmUgYSBzZXBhcmF0ZSBjb21wb25lbnQtLT5cbiAgICAgIDx0clxuICAgICAgICAqbmdGb3I9XCJsZXQgaXRlbSBvZiBlbnRyaWVzOyBsZXQgaSA9IGluZGV4XCJcbiAgICAgICAgY2xhc3M9XCJjeC1pdGVtLWxpc3Qtcm93IGN4LWFtZW5kLW9yZGVyLWl0ZW0tcm93XCJcbiAgICAgID5cbiAgICAgICAgPHRkIHJvbGU9XCJjZWxsXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImN4LXRhYmxlLWl0ZW0tY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8Y3gtbWVkaWFcbiAgICAgICAgICAgICAgW2NvbnRhaW5lcl09XCJpdGVtLnByb2R1Y3QuaW1hZ2VzPy5QUklNQVJZXCJcbiAgICAgICAgICAgICAgZm9ybWF0PVwidGh1bWJuYWlsXCJcbiAgICAgICAgICAgID48L2N4LW1lZGlhPlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtaW5mb1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtbmFtZVwiPlxuICAgICAgICAgICAgICAgIHt7IGl0ZW0ucHJvZHVjdC5uYW1lIH19XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJpdGVtLnByb2R1Y3QuY29kZVwiIGNsYXNzPVwiY3gtY29kZVwiPlxuICAgICAgICAgICAgICAgIHt7ICdjYXJ0SXRlbXMuaWQnIHwgY3hUcmFuc2xhdGUgfX0ge3sgaXRlbS5wcm9kdWN0LmNvZGUgfX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIml0ZW0ucHJvZHVjdC5iYXNlT3B0aW9ucz8ubGVuZ3RoXCI+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAqbmdGb3I9XCJcbiAgICAgICAgICAgICAgICAgIGxldCB2YXJpYW50IG9mIGl0ZW0ucHJvZHVjdC5iYXNlT3B0aW9uc1swXT8uc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgPy52YXJpYW50T3B0aW9uUXVhbGlmaWVyc1xuICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJjeC1wcm9wZXJ0eVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtbGFiZWxcIiAqbmdJZj1cInZhcmlhbnQubmFtZVwiPlxuICAgICAgICAgICAgICAgICAge3sgdmFyaWFudC5uYW1lIH19OlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjeC12YWx1ZVwiICpuZ0lmPVwidmFyaWFudC52YWx1ZVwiPlxuICAgICAgICAgICAgICAgICAge3sgdmFyaWFudC52YWx1ZSB9fVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3RkPlxuXG4gICAgICAgIDx0ZCByb2xlPVwiY2VsbFwiIGNsYXNzPVwiY3gtcHJpY2VcIiAqbmdJZj1cIml0ZW0uYmFzZVByaWNlXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImN4LW1vYmlsZS1oZWFkZXJcIj5cbiAgICAgICAgICAgIHt7ICdvcmRlckRldGFpbHMuY2FuY2VsbGF0aW9uQW5kUmV0dXJuLml0ZW1QcmljZScgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjeC12YWx1ZVwiPlxuICAgICAgICAgICAge3sgaXRlbS5iYXNlUHJpY2U/LmZvcm1hdHRlZFZhbHVlIH19XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvdGQ+XG5cbiAgICAgICAgPHRkIHJvbGU9XCJjZWxsXCIgKm5nSWY9XCIhaXNDb25maXJtYXRpb25cIiBjbGFzcz1cImN4LXJlcXVlc3QtcXR5XCI+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3M9XCJjeC1tb2JpbGUtaGVhZGVyXCJcbiAgICAgICAgICAgIHRpdGxlPVwie3sgJ2NhcnRJdGVtcy5xdWFudGl0eVRpdGxlJyB8IGN4VHJhbnNsYXRlIH19XCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7eyAnb3JkZXJEZXRhaWxzLmNhbmNlbGxhdGlvbkFuZFJldHVybi5xdWFudGl0eScgfCBjeFRyYW5zbGF0ZSB9fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjeC12YWx1ZVwiPlxuICAgICAgICAgICAge3sgZ2V0TWF4QW1lbmRRdWFudGl0eShpdGVtKSB9fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3RkPlxuXG4gICAgICAgIDx0ZCByb2xlPVwiY2VsbFwiIGNsYXNzPVwiY3gtcXVhbnRpdHlcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtbW9iaWxlLWhlYWRlclwiPlxuICAgICAgICAgICAge3tcbiAgICAgICAgICAgICAgKGlzQ2FuY2VsbGF0aW9uKClcbiAgICAgICAgICAgICAgICA/ICdvcmRlckRldGFpbHMuY2FuY2VsbGF0aW9uQW5kUmV0dXJuLmNhbmNlbFF0eSdcbiAgICAgICAgICAgICAgICA6ICdvcmRlckRldGFpbHMuY2FuY2VsbGF0aW9uQW5kUmV0dXJuLnJldHVyblF0eSdcbiAgICAgICAgICAgICAgKSB8IGN4VHJhbnNsYXRlXG4gICAgICAgICAgICB9fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjeC12YWx1ZVwiPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImlzQ29uZmlybWF0aW9uXCI+XG4gICAgICAgICAgICAgIHt7IGdldENvbnRyb2woZm9ybSwgaXRlbSkudmFsdWUgfX1cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgPGN4LWl0ZW0tY291bnRlclxuICAgICAgICAgICAgICAqbmdJZj1cIiFpc0NvbmZpcm1hdGlvblwiXG4gICAgICAgICAgICAgIFttaW5dPVwiMFwiXG4gICAgICAgICAgICAgIFttYXhdPVwiZ2V0TWF4QW1lbmRRdWFudGl0eShpdGVtKVwiXG4gICAgICAgICAgICAgIFtjb250cm9sXT1cImdldENvbnRyb2woZm9ybSwgaXRlbSlcIlxuICAgICAgICAgICAgPjwvY3gtaXRlbS1jb3VudGVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L3RkPlxuXG4gICAgICAgIDx0ZCByb2xlPVwiY2VsbFwiICpuZ0lmPVwiaXNDb25maXJtYXRpb25cIiBjbGFzcz1cImN4LXRvdGFsXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImN4LW1vYmlsZS1oZWFkZXJcIj5cbiAgICAgICAgICAgIHt7ICdvcmRlckRldGFpbHMuY2FuY2VsbGF0aW9uQW5kUmV0dXJuLnRvdGFsUHJpY2UnIHwgY3hUcmFuc2xhdGUgfX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY3gtdmFsdWVcIj57eyBnZXRJdGVtUHJpY2UoaXRlbSk/LmZvcm1hdHRlZFZhbHVlIH19PC9kaXY+XG4gICAgICAgIDwvdGQ+XG4gICAgICA8L3RyPlxuICAgIDwvdGJvZHk+XG4gIDwvdGFibGU+XG48L2Rpdj5cbiJdfQ==