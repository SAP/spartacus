import { Injectable } from '@angular/core';
import { ADDRESS_LIST_NORMALIZER, ADDRESS_NORMALIZER, ADDRESS_SERIALIZER, } from '@spartacus/core';
import { B2BUNIT_APPROVAL_PROCESSES_NORMALIZER, B2BUNIT_NODE_LIST_NORMALIZER, B2BUNIT_NODE_NORMALIZER, B2BUNIT_NORMALIZER, B2BUNIT_SERIALIZER, B2B_USERS_NORMALIZER, } from '@spartacus/organization/administration/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "@spartacus/core";
export class OccOrgUnitAdapter {
    constructor(http, occEndpoints, converter) {
        this.http = http;
        this.occEndpoints = occEndpoints;
        this.converter = converter;
    }
    load(userId, orgUnitId) {
        return this.http
            .get(this.getOrgUnitEndpoint(userId, orgUnitId))
            .pipe(this.converter.pipeable(B2BUNIT_NORMALIZER));
    }
    create(userId, orgUnit) {
        return this.http
            .post(this.getOrgUnitsEndpoint(userId), orgUnit)
            .pipe(this.converter.pipeable(B2BUNIT_NORMALIZER));
    }
    update(userId, orgUnitId, orgUnit) {
        orgUnit = this.converter.convert(orgUnit, B2BUNIT_SERIALIZER);
        return this.http
            .patch(this.getOrgUnitEndpoint(userId, orgUnitId), orgUnit)
            .pipe(this.converter.pipeable(B2BUNIT_NORMALIZER));
    }
    loadTree(userId) {
        return this.http
            .get(this.getOrgUnitsTreeEndpoint(userId))
            .pipe(this.converter.pipeable(B2BUNIT_NODE_NORMALIZER));
    }
    loadList(userId) {
        return this.http
            .get(this.getAvailableOrgUnitsEndpoint(userId))
            .pipe(this.converter.pipeable(B2BUNIT_NODE_LIST_NORMALIZER));
    }
    loadApprovalProcesses(userId) {
        return this.http
            .get(this.getOrgUnitsApprovalProcessesEndpoint(userId))
            .pipe(this.converter.pipeable(B2BUNIT_APPROVAL_PROCESSES_NORMALIZER));
    }
    loadUsers(userId, orgUnitId, roleId, params) {
        return this.http
            .get(this.getUsersEndpoint(userId, orgUnitId, roleId, params))
            .pipe(this.converter.pipeable(B2B_USERS_NORMALIZER));
    }
    assignRole(userId, orgCustomerId, roleId) {
        return this.http.post(this.getRolesEndpoint(userId, orgCustomerId, { roleId }), null);
    }
    unassignRole(userId, orgCustomerId, roleId) {
        return this.http.delete(this.getRoleEndpoint(userId, orgCustomerId, roleId));
    }
    assignApprover(userId, orgUnitId, orgCustomerId, roleId) {
        return this.http.post(this.getApproversEndpoint(userId, orgUnitId, orgCustomerId, { roleId }), null);
    }
    unassignApprover(userId, orgUnitId, orgCustomerId, roleId) {
        return this.http.delete(this.getApproverEndpoint(userId, orgUnitId, orgCustomerId, roleId));
    }
    loadAddresses(userId, orgUnitId) {
        return this.http
            .get(this.getAddressesEndpoint(userId, orgUnitId))
            .pipe(this.converter.pipeable(ADDRESS_LIST_NORMALIZER));
    }
    createAddress(userId, orgUnitId, address) {
        address = this.converter.convert(address, ADDRESS_SERIALIZER);
        return this.http
            .post(this.getAddressesEndpoint(userId, orgUnitId), address)
            .pipe(this.converter.pipeable(ADDRESS_NORMALIZER));
    }
    updateAddress(userId, orgUnitId, addressId, address) {
        address = this.converter.convert(address, ADDRESS_SERIALIZER);
        return this.http
            .patch(this.getAddressEndpoint(userId, orgUnitId, addressId), address)
            .pipe(this.converter.pipeable(ADDRESS_NORMALIZER));
    }
    deleteAddress(userId, orgUnitId, addressId) {
        return this.http
            .delete(this.getAddressEndpoint(userId, orgUnitId, addressId))
            .pipe(this.converter.pipeable(ADDRESS_NORMALIZER));
    }
    getOrgUnitEndpoint(userId, orgUnitId) {
        return this.occEndpoints.buildUrl('orgUnit', {
            urlParams: { userId, orgUnitId },
        });
    }
    getOrgUnitsEndpoint(userId) {
        return this.occEndpoints.buildUrl('orgUnits', { urlParams: { userId } });
    }
    getAvailableOrgUnitsEndpoint(userId) {
        return this.occEndpoints.buildUrl('orgUnitsAvailable', {
            urlParams: { userId },
        });
    }
    getOrgUnitsTreeEndpoint(userId) {
        return this.occEndpoints.buildUrl('orgUnitsTree', {
            urlParams: { userId },
        });
    }
    getOrgUnitsApprovalProcessesEndpoint(userId) {
        return this.occEndpoints.buildUrl('orgUnitsApprovalProcesses', {
            urlParams: { userId },
        });
    }
    getUsersEndpoint(userId, orgUnitId, roleId, params) {
        return this.occEndpoints.buildUrl('orgUnitUsers', {
            urlParams: {
                userId,
                orgUnitId,
                roleId,
            },
            queryParams: params,
        });
    }
    getRolesEndpoint(userId, orgCustomerId, params) {
        return this.occEndpoints.buildUrl('orgUnitUserRoles', {
            urlParams: { userId, orgCustomerId },
            queryParams: params,
        });
    }
    getRoleEndpoint(userId, orgCustomerId, roleId) {
        return this.occEndpoints.buildUrl('orgUnitUserRole', {
            urlParams: {
                userId,
                orgCustomerId,
                roleId,
            },
        });
    }
    getApproversEndpoint(userId, orgUnitId, orgCustomerId, params) {
        return this.occEndpoints.buildUrl('orgUnitApprovers', {
            urlParams: { userId, orgUnitId, orgCustomerId },
            queryParams: params,
        });
    }
    getApproverEndpoint(userId, orgUnitId, orgCustomerId, roleId) {
        return this.occEndpoints.buildUrl('orgUnitApprover', {
            urlParams: {
                userId,
                orgUnitId,
                orgCustomerId,
                roleId,
            },
        });
    }
    getAddressesEndpoint(userId, orgUnitId) {
        return this.occEndpoints.buildUrl('orgUnitsAddresses', {
            urlParams: {
                userId,
                orgUnitId,
            },
        });
    }
    getAddressEndpoint(userId, orgUnitId, addressId) {
        return this.occEndpoints.buildUrl('orgUnitsAddress', {
            urlParams: {
                userId,
                orgUnitId,
                addressId,
            },
        });
    }
}
OccOrgUnitAdapter.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: OccOrgUnitAdapter, deps: [{ token: i1.HttpClient }, { token: i2.OccEndpointsService }, { token: i2.ConverterService }], target: i0.ɵɵFactoryTarget.Injectable });
OccOrgUnitAdapter.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: OccOrgUnitAdapter });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: OccOrgUnitAdapter, decorators: [{
            type: Injectable
        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: i2.OccEndpointsService }, { type: i2.ConverterService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2NjLW9yZy11bml0LmFkYXB0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvb3JnYW5pemF0aW9uL2FkbWluaXN0cmF0aW9uL29jYy9hZGFwdGVycy9vY2Mtb3JnLXVuaXQuYWRhcHRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFPQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFFTCx1QkFBdUIsRUFDdkIsa0JBQWtCLEVBQ2xCLGtCQUFrQixHQVNuQixNQUFNLGlCQUFpQixDQUFDO0FBQ3pCLE9BQU8sRUFFTCxxQ0FBcUMsRUFDckMsNEJBQTRCLEVBQzVCLHVCQUF1QixFQUN2QixrQkFBa0IsRUFDbEIsa0JBQWtCLEVBQ2xCLG9CQUFvQixHQUVyQixNQUFNLDZDQUE2QyxDQUFDOzs7O0FBSXJELE1BQU0sT0FBTyxpQkFBaUI7SUFDNUIsWUFDWSxJQUFnQixFQUNoQixZQUFpQyxFQUNqQyxTQUEyQjtRQUYzQixTQUFJLEdBQUosSUFBSSxDQUFZO1FBQ2hCLGlCQUFZLEdBQVosWUFBWSxDQUFxQjtRQUNqQyxjQUFTLEdBQVQsU0FBUyxDQUFrQjtJQUNwQyxDQUFDO0lBRUosSUFBSSxDQUFDLE1BQWMsRUFBRSxTQUFpQjtRQUNwQyxPQUFPLElBQUksQ0FBQyxJQUFJO2FBQ2IsR0FBRyxDQUFjLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7YUFDNUQsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBRUQsTUFBTSxDQUFDLE1BQWMsRUFBRSxPQUFnQjtRQUNyQyxPQUFPLElBQUksQ0FBQyxJQUFJO2FBQ2IsSUFBSSxDQUFjLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsRUFBRSxPQUFPLENBQUM7YUFDNUQs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O1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVTLG9CQUFvQixDQUFDLE1BQWMsRUFBRSxTQUFpQjtRQUM5RCxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLG1CQUFtQixFQUFFO1lBQ3JELFNBQVMsRUFBRTtnQkFDVCxNQUFNO2dCQUNOLFNBQVM7YUFDVjtTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFUyxrQkFBa0IsQ0FDMUIsTUFBYyxFQUNkLFNBQWlCLEVBQ2pCLFNBQWlCO1FBRWpCLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLEVBQUU7WUFDbkQsU0FBUyxFQUFFO2dCQUNULE1BQU07Z0JBQ04sU0FBUztnQkFDVCxTQUFTO2FBQ1Y7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDOzs4R0FoUlUsaUJBQWlCO2tIQUFqQixpQkFBaUI7MkZBQWpCLGlCQUFpQjtrQkFEN0IsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTUERYLUZpbGVDb3B5cmlnaHRUZXh0OiAyMDIzIFNBUCBTcGFydGFjdXMgdGVhbSA8c3BhcnRhY3VzLXRlYW1Ac2FwLmNvbT5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICBBZGRyZXNzLFxuICBBRERSRVNTX0xJU1RfTk9STUFMSVpFUixcbiAgQUREUkVTU19OT1JNQUxJWkVSLFxuICBBRERSRVNTX1NFUklBTElaRVIsXG4gIEIyQkFwcHJvdmFsUHJvY2VzcyxcbiAgQjJCVW5pdCxcbiAgQjJCVXNlcixcbiAgQ29udmVydGVyU2VydmljZSxcbiAgRW50aXRpZXNNb2RlbCxcbiAgT2NjLFxuICBPY2NFbmRwb2ludHNTZXJ2aWNlLFxuICBTZWFyY2hDb25maWcsXG59IGZyb20gJ0BzcGFydGFjdXMvY29yZSc7XG5pbXBvcnQge1xuICBCMkJVbml0Tm9kZSxcbiAgQjJCVU5JVF9BUFBST1ZBTF9QUk9DRVNTRVNfTk9STUFMSVpFUixcbiAgQjJCVU5JVF9OT0RFX0xJU1RfTk9STUFMSVpFUixcbiAgQjJCVU5JVF9OT0RFX05PUk1BTElaRVIsXG4gIEIyQlVOSVRfTk9STUFMSVpFUixcbiAgQjJCVU5JVF9TRVJJQUxJWkVSLFxuICBCMkJfVVNFUlNfTk9STUFMSVpFUixcbiAgT3JnVW5pdEFkYXB0ZXIsXG59IGZyb20gJ0BzcGFydGFjdXMvb3JnYW5pemF0aW9uL2FkbWluaXN0cmF0aW9uL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgT2NjT3JnVW5pdEFkYXB0ZXIgaW1wbGVtZW50cyBPcmdVbml0QWRhcHRlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBodHRwOiBIdHRwQ2xpZW50LFxuICAgIHByb3RlY3RlZCBvY2NFbmRwb2ludHM6IE9jY0VuZHBvaW50c1NlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGNvbnZlcnRlcjogQ29udmVydGVyU2VydmljZVxuICApIHt9XG5cbiAgbG9hZCh1c2VySWQ6IHN0cmluZywgb3JnVW5pdElkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPEIyQlVuaXQ+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwXG4gICAgICAuZ2V0PE9jYy5CMkJVbml0Pih0aGlzLmdldE9yZ1VuaXRFbmRwb2ludCh1c2VySWQsIG9yZ1VuaXRJZCkpXG4gICAgICAucGlwZSh0aGlzLmNvbnZlcnRlci5waXBlYWJsZShCMkJVTklUX05PUk1BTElaRVIpKTtcbiAgfVxuXG4gIGNyZWF0ZSh1c2VySWQ6IHN0cmluZywgb3JnVW5pdDogQjJCVW5pdCk6IE9ic2VydmFibGU8QjJCVW5pdD4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBcbiAgICAgIC5wb3N0PE9jYy5CMkJVbml0Pih0aGlzLmdldE9yZ1VuaXRzRW5kcG9pbnQodXNlcklkKSwgb3JnVW5pdClcbiAgICAgIC5waXBlKHRoaXMuY29udmVydGVyLnBpcGVhYmxlKEIyQlVOSVRfTk9STUFMSVpFUikpO1xuICB9XG5cbiAgdXBkYXRlKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIG9yZ1VuaXRJZDogc3RyaW5nLFxuICAgIG9yZ1VuaXQ6IEIyQlVuaXRcbiAgKTogT2JzZXJ2YWJsZTxCMkJVbml0PiB7XG4gICAgb3JnVW5pdCA9IHRoaXMuY29udmVydGVyLmNvbnZlcnQob3JnVW5pdCwgQjJCVU5JVF9TRVJJQUxJWkVSKTtcbiAgICByZXR1cm4gdGhpcy5odHRwXG4gICAgICAucGF0Y2g8T2NjLkIyQlVuaXQ+KHRoaXMuZ2V0T3JnVW5pdEVuZHBvaW50KHVzZXJJZCwgb3JnVW5pdElkKSwgb3JnVW5pdClcbiAgICAgIC5waXBlKHRoaXMuY29udmVydGVyLnBpcGVhYmxlKEIyQlVOSVRfTk9STUFMSVpFUikpO1xuICB9XG5cbiAgbG9hZFRyZWUodXNlcklkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPEIyQlVuaXROb2RlPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cFxuICAgICAgLmdldDxPY2MuQjJCVW5pdE5vZGU+KHRoaXMuZ2V0T3JnVW5pdHNUcmVlRW5kcG9pbnQodXNlcklkKSlcbiAgICAgIC5waXBlKHRoaXMuY29udmVydGVyLnBpcGVhYmxlKEIyQlVOSVRfTk9ERV9OT1JNQUxJWkVSKSk7XG4gIH1cblxuICBsb2FkTGlzdCh1c2VySWQ6IHN0cmluZyk6IE9ic2VydmFibGU8QjJCVW5pdE5vZGVbXT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBcbiAgICAgIC5nZXQ8T2NjLkIyQlVuaXROb2RlTGlzdD4odGhpcy5nZXRBdmFpbGFibGVPcmdVbml0c0VuZHBvaW50KHVzZXJJZCkpXG4gICAgICAucGlwZSh0aGlzLmNvbnZlcnRlci5waXBlYWJsZShCMkJVTklUX05PREVfTElTVF9OT1JNQUxJWkVSKSk7XG4gIH1cblxuICBsb2FkQXBwcm92YWxQcm9jZXNzZXModXNlcklkOiBzdHJpbmcpOiBPYnNlcnZhYmxlPEIyQkFwcHJvdmFsUHJvY2Vzc1tdPiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cFxuICAgICAgLmdldDxPY2MuQjJCQXBwcm92YWxQcm9jZXNzTGlzdD4oXG4gICAgICAgIHRoaXMuZ2V0T3JnVW5pdHNBcHByb3ZhbFByb2Nlc3Nlc0VuZHBvaW50KHVzZXJJZClcbiAgICAgIClcbiAgICAgIC5waXBlKHRoaXMuY29udmVydGVyLnBpcGVhYmxlKEIyQlVOSVRfQVBQUk9WQUxfUFJPQ0VTU0VTX05PUk1BTElaRVIpKTtcbiAgfVxuXG4gIGxvYWRVc2VycyhcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBvcmdVbml0SWQ6IHN0cmluZyxcbiAgICByb2xlSWQ6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBTZWFyY2hDb25maWdcbiAgKTogT2JzZXJ2YWJsZTxFbnRpdGllc01vZGVsPEIyQlVzZXI+PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cFxuICAgICAgLmdldDxPY2MuT3JnVW5pdFVzZXJMaXN0PihcbiAgICAgICAgdGhpcy5nZXRVc2Vyc0VuZHBvaW50KHVzZXJJZCwgb3JnVW5pdElkLCByb2xlSWQsIHBhcmFtcylcbiAgICAgIClcbiAgICAgIC5waXBlKHRoaXMuY29udmVydGVyLnBpcGVhYmxlKEIyQl9VU0VSU19OT1JNQUxJWkVSKSk7XG4gIH1cblxuICBhc3NpZ25Sb2xlKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIG9yZ0N1c3RvbWVySWQ6IHN0cmluZyxcbiAgICByb2xlSWQ6IHN0cmluZ1xuICApOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdDxhbnk+KFxuICAgICAgdGhpcy5nZXRSb2xlc0VuZHBvaW50KHVzZXJJZCwgb3JnQ3VzdG9tZXJJZCwgeyByb2xlSWQgfSksXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuXG4gIHVuYXNzaWduUm9sZShcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBvcmdDdXN0b21lcklkOiBzdHJpbmcsXG4gICAgcm9sZUlkOiBzdHJpbmdcbiAgKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwLmRlbGV0ZTxhbnk+KFxuICAgICAgdGhpcy5nZXRSb2xlRW5kcG9pbnQodXNlcklkLCBvcmdDdXN0b21lcklkLCByb2xlSWQpXG4gICAgKTtcbiAgfVxuXG4gIGFzc2lnbkFwcHJvdmVyKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIG9yZ1VuaXRJZDogc3RyaW5nLFxuICAgIG9yZ0N1c3RvbWVySWQ6IHN0cmluZyxcbiAgICByb2xlSWQ6IHN0cmluZ1xuICApOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHAucG9zdDxhbnk+KFxuICAgICAgdGhpcy5nZXRBcHByb3ZlcnNFbmRwb2ludCh1c2VySWQsIG9yZ1VuaXRJZCwgb3JnQ3VzdG9tZXJJZCwgeyByb2xlSWQgfSksXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuXG4gIHVuYXNzaWduQXBwcm92ZXIoXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgb3JnVW5pdElkOiBzdHJpbmcsXG4gICAgb3JnQ3VzdG9tZXJJZDogc3RyaW5nLFxuICAgIHJvbGVJZDogc3RyaW5nXG4gICk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5kZWxldGU8YW55PihcbiAgICAgIHRoaXMuZ2V0QXBwcm92ZXJFbmRwb2ludCh1c2VySWQsIG9yZ1VuaXRJZCwgb3JnQ3VzdG9tZXJJZCwgcm9sZUlkKVxuICAgICk7XG4gIH1cblxuICBsb2FkQWRkcmVzc2VzKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIG9yZ1VuaXRJZDogc3RyaW5nXG4gICk6IE9ic2VydmFibGU8RW50aXRpZXNNb2RlbDxBZGRyZXNzPj4ge1xuICAgIHJldHVybiB0aGlzLmh0dHBcbiAgICAgIC5nZXQ8T2NjLkFkZHJlc3NMaXN0Pih0aGlzLmdldEFkZHJlc3Nlc0VuZHBvaW50KHVzZXJJZCwgb3JnVW5pdElkKSlcbiAgICAgIC5waXBlKHRoaXMuY29udmVydGVyLnBpcGVhYmxlKEFERFJFU1NfTElTVF9OT1JNQUxJWkVSKSk7XG4gIH1cblxuICBjcmVhdGVBZGRyZXNzKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIG9yZ1VuaXRJZDogc3RyaW5nLFxuICAgIGFkZHJlc3M6IEFkZHJlc3NcbiAgKTogT2JzZXJ2YWJsZTxBZGRyZXNzPiB7XG4gICAgYWRkcmVzcyA9IHRoaXMuY29udmVydGVyLmNvbnZlcnQoYWRkcmVzcywgQUREUkVTU19TRVJJQUxJWkVSKTtcbiAgICByZXR1cm4gdGhpcy5odHRwXG4gICAgICAucG9zdDxPY2MuQWRkcmVzcz4odGhpcy5nZXRBZGRyZXNzZXNFbmRwb2ludCh1c2VySWQsIG9yZ1VuaXRJZCksIGFkZHJlc3MpXG4gICAgICAucGlwZSh0aGlzLmNvbnZlcnRlci5waXBlYWJsZShBRERSRVNTX05PUk1BTElaRVIpKTtcbiAgfVxuXG4gIHVwZGF0ZUFkZHJlc3MoXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgb3JnVW5pdElkOiBzdHJpbmcsXG4gICAgYWRkcmVzc0lkOiBzdHJpbmcsXG4gICAgYWRkcmVzczogQWRkcmVzc1xuICApOiBPYnNlcnZhYmxlPEFkZHJlc3M+IHtcbiAgICBhZGRyZXNzID0gdGhpcy5jb252ZXJ0ZXIuY29udmVydChhZGRyZXNzLCBBRERSRVNTX1NFUklBTElaRVIpO1xuICAgIHJldHVybiB0aGlzLmh0dHBcbiAgICAgIC5wYXRjaDxPY2MuQWRkcmVzcz4oXG4gICAgICAgIHRoaXMuZ2V0QWRkcmVzc0VuZHBvaW50KHVzZXJJZCwgb3JnVW5pdElkLCBhZGRyZXNzSWQpLFxuICAgICAgICBhZGRyZXNzXG4gICAgICApXG4gICAgICAucGlwZSh0aGlzLmNvbnZlcnRlci5waXBlYWJsZShBRERSRVNTX05PUk1BTElaRVIpKTtcbiAgfVxuXG4gIGRlbGV0ZUFkZHJlc3MoXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgb3JnVW5pdElkOiBzdHJpbmcsXG4gICAgYWRkcmVzc0lkOiBzdHJpbmdcbiAgKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwXG4gICAgICAuZGVsZXRlPE9jYy5BZGRyZXNzPihcbiAgICAgICAgdGhpcy5nZXRBZGRyZXNzRW5kcG9pbnQodXNlcklkLCBvcmdVbml0SWQsIGFkZHJlc3NJZClcbiAgICAgIClcbiAgICAgIC5waXBlKHRoaXMuY29udmVydGVyLnBpcGVhYmxlKEFERFJFU1NfTk9STUFMSVpFUikpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldE9yZ1VuaXRFbmRwb2ludCh1c2VySWQ6IHN0cmluZywgb3JnVW5pdElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm9jY0VuZHBvaW50cy5idWlsZFVybCgnb3JnVW5pdCcsIHtcbiAgICAgIHVybFBhcmFtczogeyB1c2VySWQsIG9yZ1VuaXRJZCB9LFxuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldE9yZ1VuaXRzRW5kcG9pbnQodXNlcklkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm9jY0VuZHBvaW50cy5idWlsZFVybCgnb3JnVW5pdHMnLCB7IHVybFBhcmFtczogeyB1c2VySWQgfSB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRBdmFpbGFibGVPcmdVbml0c0VuZHBvaW50KHVzZXJJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5vY2NFbmRwb2ludHMuYnVpbGRVcmwoJ29yZ1VuaXRzQXZhaWxhYmxlJywge1xuICAgICAgdXJsUGFyYW1zOiB7IHVzZXJJZCB9LFxuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldE9yZ1VuaXRzVHJlZUVuZHBvaW50KHVzZXJJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5vY2NFbmRwb2ludHMuYnVpbGRVcmwoJ29yZ1VuaXRzVHJlZScsIHtcbiAgICAgIHVybFBhcmFtczogeyB1c2VySWQgfSxcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRPcmdVbml0c0FwcHJvdmFsUHJvY2Vzc2VzRW5kcG9pbnQodXNlcklkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm9jY0VuZHBvaW50cy5idWlsZFVybCgnb3JnVW5pdHNBcHByb3ZhbFByb2Nlc3NlcycsIHtcbiAgICAgIHVybFBhcmFtczogeyB1c2VySWQgfSxcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRVc2Vyc0VuZHBvaW50KFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIG9yZ1VuaXRJZDogc3RyaW5nLFxuICAgIHJvbGVJZDogc3RyaW5nLFxuICAgIHBhcmFtcz86IFNlYXJjaENvbmZpZ1xuICApOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm9jY0VuZHBvaW50cy5idWlsZFVybCgnb3JnVW5pdFVzZXJzJywge1xuICAgICAgdXJsUGFyYW1zOiB7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgb3JnVW5pdElkLFxuICAgICAgICByb2xlSWQsXG4gICAgICB9LFxuICAgICAgcXVlcnlQYXJhbXM6IHBhcmFtcyxcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRSb2xlc0VuZHBvaW50KFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIG9yZ0N1c3RvbWVySWQ6IHN0cmluZyxcbiAgICBwYXJhbXM6IHsgcm9sZUlkOiBzdHJpbmcgfVxuICApOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm9jY0VuZHBvaW50cy5idWlsZFVybCgnb3JnVW5pdFVzZXJSb2xlcycsIHtcbiAgICAgIHVybFBhcmFtczogeyB1c2VySWQsIG9yZ0N1c3RvbWVySWQgfSxcbiAgICAgIHF1ZXJ5UGFyYW1zOiBwYXJhbXMsXG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0Um9sZUVuZHBvaW50KFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIG9yZ0N1c3RvbWVySWQ6IHN0cmluZyxcbiAgICByb2xlSWQ6IHN0cmluZ1xuICApOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm9jY0VuZHBvaW50cy5idWlsZFVybCgnb3JnVW5pdFVzZXJSb2xlJywge1xuICAgICAgdXJsUGFyYW1zOiB7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgb3JnQ3VzdG9tZXJJZCxcbiAgICAgICAgcm9sZUlkLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRBcHByb3ZlcnNFbmRwb2ludChcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBvcmdVbml0SWQ6IHN0cmluZyxcbiAgICBvcmdDdXN0b21lcklkOiBzdHJpbmcsXG4gICAgcGFyYW1zOiB7IHJvbGVJZDogc3RyaW5nIH1cbiAgKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5vY2NFbmRwb2ludHMuYnVpbGRVcmwoJ29yZ1VuaXRBcHByb3ZlcnMnLCB7XG4gICAgICB1cmxQYXJhbXM6IHsgdXNlcklkLCBvcmdVbml0SWQsIG9yZ0N1c3RvbWVySWQgfSxcbiAgICAgIHF1ZXJ5UGFyYW1zOiBwYXJhbXMsXG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0QXBwcm92ZXJFbmRwb2ludChcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBvcmdVbml0SWQ6IHN0cmluZyxcbiAgICBvcmdDdXN0b21lcklkOiBzdHJpbmcsXG4gICAgcm9sZUlkOiBzdHJpbmdcbiAgKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5vY2NFbmRwb2ludHMuYnVpbGRVcmwoJ29yZ1VuaXRBcHByb3ZlcicsIHtcbiAgICAgIHVybFBhcmFtczoge1xuICAgICAgICB1c2VySWQsXG4gICAgICAgIG9yZ1VuaXRJZCxcbiAgICAgICAgb3JnQ3VzdG9tZXJJZCxcbiAgICAgICAgcm9sZUlkLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRBZGRyZXNzZXNFbmRwb2ludCh1c2VySWQ6IHN0cmluZywgb3JnVW5pdElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm9jY0VuZHBvaW50cy5idWlsZFVybCgnb3JnVW5pdHNBZGRyZXNzZXMnLCB7XG4gICAgICB1cmxQYXJhbXM6IHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBvcmdVbml0SWQsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldEFkZHJlc3NFbmRwb2ludChcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBvcmdVbml0SWQ6IHN0cmluZyxcbiAgICBhZGRyZXNzSWQ6IHN0cmluZ1xuICApOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm9jY0VuZHBvaW50cy5idWlsZFVybCgnb3JnVW5pdHNBZGRyZXNzJywge1xuICAgICAgdXJsUGFyYW1zOiB7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgb3JnVW5pdElkLFxuICAgICAgICBhZGRyZXNzSWQsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG59XG4iXX0=