"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=434,exports.ids=[434],exports.modules={43434:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{OrganizationUserRegistrationWrapperModule:()=>OrganizationUserRegistrationWrapperModule});var core=__webpack_require__(40305),fesm2020_forms=__webpack_require__(43070),spartacus_cdc_root=__webpack_require__(95834),spartacus_core=__webpack_require__(46167),router=__webpack_require__(9664),common=__webpack_require__(89318),ng_select_ng_select=__webpack_require__(80060),spartacus_storefront=__webpack_require__(25907),of=__webpack_require__(95202),BehaviorSubject=__webpack_require__(60403),Subscription=__webpack_require__(31765),tap=__webpack_require__(85171),filter=__webpack_require__(2026),switchMap=__webpack_require__(63714),take=__webpack_require__(95426),spartacus_user_profile_root=__webpack_require__(86842),spartacus_organization_user_registration_root=__webpack_require__(72752);const _c0=__name(function(a0){return{ariaLabel:a0}},"_c0");function UserRegistrationFormComponent_section_0_ng_container_40_label_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"label")(1,"span",4),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core._UZ(4,"ng-select",24),core.ALo(5,"cxTranslate"),core.ALo(6,"cxTranslate"),core._UZ(7,"cx-form-errors",8),core.qZA()),2&rf){const countries_r5=core.oxw().ngIf,ctx_r6=core.oxw(2);core.xp6(2),core.Oqu(core.lcZ(3,7,"userRegistrationForm.fields.country.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(5,9,"userRegistrationForm.fields.country.placeholder")),core.Q6J("searchable",!0)("clearable",!1)("items",countries_r5)("cxNgSelectA11y",core.VKq(13,_c0,core.lcZ(6,11,"userRegistrationForm.fields.country.label"))),core.xp6(3),core.Q6J("control",ctx_r6.registerForm.get("country.isocode"))}}function UserRegistrationFormComponent_section_0_ng_container_40_Template(rf,ctx){if(1&rf&&(core.ynx(0,22),core.YNc(1,UserRegistrationFormComponent_section_0_ng_container_40_label_1_Template,8,15,"label",23),core.BQk()),2&rf){const countries_r5=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",0!==countries_r5.length)}}function UserRegistrationFormComponent_section_0_ng_container_70_label_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"label")(1,"span",4),core._uU(2),core.ALo(3,"cxTranslate"),core.qZA(),core._UZ(4,"ng-select",26),core.ALo(5,"cxTranslate"),core.ALo(6,"cxTranslate"),core._UZ(7,"cx-form-errors",8),core.qZA()),2&rf){const regions_r8=core.oxw().ngIf,ctx_r9=core.oxw(2);core.xp6(2),core.Oqu(core.lcZ(3,7,"userRegistrationForm.fields.state.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(5,9,"userRegistrationForm.fields.state.placeholder")),core.Q6J("searchable",!0)("clearable",!1)("items",regions_r8)("cxNgSelectA11y",core.VKq(13,_c0,core.lcZ(6,11,"userRegistrationForm.fields.state.label"))),core.xp6(3),core.Q6J("control",ctx_r9.registerForm.get("region.isocode"))}}function UserRegistrationFormComponent_section_0_ng_container_70_Template(rf,ctx){if(1&rf&&(core.ynx(0,25),core.YNc(1,UserRegistrationFormComponent_section_0_ng_container_70_label_1_Template,8,15,"label",23),core.BQk()),2&rf){const regions_r8=ctx.ngIf;core.xp6(1),core.Q6J("ngIf",0!==regions_r8.length)}}__name(UserRegistrationFormComponent_section_0_ng_container_40_label_1_Template,"UserRegistrationFormComponent_section_0_ng_container_40_label_1_Template"),__name(UserRegistrationFormComponent_section_0_ng_container_40_Template,"UserRegistrationFormComponent_section_0_ng_container_40_Template"),__name(UserRegistrationFormComponent_section_0_ng_container_70_label_1_Template,"UserRegistrationFormComponent_section_0_ng_container_70_label_1_Template"),__name(UserRegistrationFormComponent_section_0_ng_container_70_Template,"UserRegistrationFormComponent_section_0_ng_container_70_Template");const _c1=__name(function(){return{cxRoute:"login"}},"_c1");function UserRegistrationFormComponent_section_0_Template(rf,ctx){if(1&rf){const _r12=core.EpF();core.TgZ(0,"section"),core._UZ(1,"div",2),core.ALo(2,"cxTranslate"),core.TgZ(3,"form",3),core.NdJ("ngSubmit",__name(function(){core.CHM(_r12);const ctx_r11=core.oxw();return core.KtG(ctx_r11.submit())},"UserRegistrationFormComponent_section_0_Template_form_ngSubmit_3_listener")),core.TgZ(4,"label")(5,"span",4),core._uU(6),core.ALo(7,"cxTranslate"),core.qZA(),core._UZ(8,"ng-select",5),core.ALo(9,"async"),core.ALo(10,"cxTranslate"),core.ALo(11,"cxTranslate"),core.qZA(),core.TgZ(12,"label")(13,"span",6),core._uU(14),core.ALo(15,"cxTranslate"),core.qZA(),core._UZ(16,"input",7),core.ALo(17,"cxTranslate"),core._UZ(18,"cx-form-errors",8),core.qZA(),core.TgZ(19,"label")(20,"span",6),core._uU(21),core.ALo(22,"cxTranslate"),core.qZA(),core._UZ(23,"input",9),core.ALo(24,"cxTranslate"),core._UZ(25,"cx-form-errors",8),core.qZA(),core.TgZ(26,"label")(27,"span",6),core._uU(28),core.ALo(29,"cxTranslate"),core.qZA(),core._UZ(30,"input",10),core.ALo(31,"cxTranslate"),core._UZ(32,"cx-form-errors",8),core.qZA(),core.TgZ(33,"label")(34,"span",6),core._uU(35),core.ALo(36,"cxTranslate"),core.qZA(),core._UZ(37,"input",11),core.ALo(38,"cxTranslate"),core._UZ(39,"cx-form-errors",8),core.qZA(),core.YNc(40,UserRegistrationFormComponent_section_0_ng_container_40_Template,2,1,"ng-container",12),core.ALo(41,"async"),core.TgZ(42,"label")(43,"span",4),core._uU(44),core.ALo(45,"cxTranslate"),core.qZA(),core._UZ(46,"input",13),core.ALo(47,"cxTranslate"),core._UZ(48,"cx-form-errors",8),core.qZA(),core.TgZ(49,"label")(50,"span",4),core._uU(51),core.ALo(52,"cxTranslate"),core.qZA(),core._UZ(53,"input",14),core.ALo(54,"cxTranslate"),core._UZ(55,"cx-form-errors",8),core.qZA(),core.TgZ(56,"label")(57,"span",4),core._uU(58),core.ALo(59,"cxTranslate"),core.qZA(),core._UZ(60,"input",15),core.ALo(61,"cxTranslate"),core._UZ(62,"cx-form-errors",8),core.qZA(),core.TgZ(63,"label")(64,"span",4),core._uU(65),core.ALo(66,"cxTranslate"),core.qZA(),core._UZ(67,"input",16),core.ALo(68,"cxTranslate"),core._UZ(69,"cx-form-errors",8),core.qZA(),core.YNc(70,UserRegistrationFormComponent_section_0_ng_container_70_Template,2,1,"ng-container",17),core.ALo(71,"async"),core.TgZ(72,"label")(73,"span",4),core._uU(74),core.ALo(75,"cxTranslate"),core.qZA(),core._UZ(76,"input",18),core.ALo(77,"cxTranslate"),core._UZ(78,"cx-form-errors",8),core.qZA(),core.TgZ(79,"label")(80,"span",4),core._uU(81),core.ALo(82,"cxTranslate"),core.qZA(),core._UZ(83,"textarea",19),core.ALo(84,"cxTranslate"),core._UZ(85,"cx-form-errors",8),core.qZA(),core.TgZ(86,"button",20),core._uU(87),core.ALo(88,"cxTranslate"),core.qZA(),core.TgZ(89,"a",21),core.ALo(90,"cxUrl"),core._uU(91),core.ALo(92,"cxTranslate"),core.qZA()()()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.uIk("aria-label",core.lcZ(2,43,"common.loaded")),core.xp6(2),core.Q6J("formGroup",ctx_r0.registerForm),core.xp6(3),core.Oqu(core.lcZ(7,45,"userRegistrationForm.fields.titleCode.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(10,49,"userRegistrationForm.fields.titleCode.placeholder")),core.Q6J("searchable",!1)("clearable",!1)("items",core.lcZ(9,47,ctx_r0.titles$))("cxNgSelectA11y",core.VKq(103,_c0,core.lcZ(11,51,"userRegistrationForm.fields.titleCode.label"))),core.xp6(6),core.Oqu(core.lcZ(15,53,"userRegistrationForm.fields.firstName.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(17,55,"userRegistrationForm.fields.firstName.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("firstName")),core.xp6(3),core.Oqu(core.lcZ(22,57,"userRegistrationForm.fields.lastName.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(24,59,"userRegistrationForm.fields.lastName.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("lastName")),core.xp6(3),core.Oqu(core.lcZ(29,61,"userRegistrationForm.fields.companyName.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(31,63,"userRegistrationForm.fields.companyName.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("companyName")),core.xp6(3),core.Oqu(core.lcZ(36,65,"userRegistrationForm.fields.email.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(38,67,"userRegistrationForm.fields.email.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("email")),core.xp6(1),core.Q6J("ngIf",core.lcZ(41,69,ctx_r0.countries$)),core.xp6(4),core.Oqu(core.lcZ(45,71,"userRegistrationForm.fields.addressLine.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(47,73,"userRegistrationForm.fields.addressLine.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("line1")),core.xp6(3),core.Oqu(core.lcZ(52,75,"userRegistrationForm.fields.secondAddressLine.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(54,77,"userRegistrationForm.fields.secondAddressLine.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("line2")),core.xp6(3),core.Oqu(core.lcZ(59,79,"userRegistrationForm.fields.city.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(61,81,"userRegistrationForm.fields.city.label")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("town")),core.xp6(3),core.Oqu(core.lcZ(66,83,"userRegistrationForm.fields.postalCode.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(68,85,"userRegistrationForm.fields.postalCode.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("postalCode")),core.xp6(1),core.Q6J("ngIf",core.lcZ(71,87,ctx_r0.regions$)),core.xp6(4),core.Oqu(core.lcZ(75,89,"userRegistrationForm.fields.phoneNumber.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(77,91,"userRegistrationForm.fields.phoneNumber.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("phoneNumber")),core.xp6(3),core.Oqu(core.lcZ(82,93,"userRegistrationForm.fields.message.label")),core.xp6(2),core.s9C("placeholder",core.lcZ(84,95,"userRegistrationForm.fields.message.placeholder")),core.xp6(2),core.Q6J("control",ctx_r0.registerForm.get("message")),core.xp6(2),core.hij(" ",core.lcZ(88,97,"userRegistrationForm.formSubmitButtonLabel")," "),core.xp6(2),core.Q6J("routerLink",core.lcZ(90,99,core.DdM(105,_c1))),core.xp6(2),core.Oqu(core.lcZ(92,101,"userRegistrationForm.goToLoginButtonLabel"))}}function UserRegistrationFormComponent_ng_template_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",27),core._UZ(1,"cx-spinner"),core.qZA())}__name(UserRegistrationFormComponent_section_0_Template,"UserRegistrationFormComponent_section_0_Template"),__name(UserRegistrationFormComponent_ng_template_2_Template,"UserRegistrationFormComponent_ng_template_2_Template");class UserRegistrationFormService{buildForm(){return this.formBuilder.group({titleCode:[null],firstName:["",fesm2020_forms.kI.required],lastName:["",fesm2020_forms.kI.required],companyName:["",fesm2020_forms.kI.required],email:["",[fesm2020_forms.kI.required,spartacus_storefront.kal.emailValidator]],country:this.formBuilder.group({isocode:[null]}),line1:[""],line2:[""],town:[""],region:this.formBuilder.group({isocode:[null]}),postalCode:[""],phoneNumber:[""],message:[""]})}get form(){return this._form}get countryControl(){return this.form.get("country.isocode")}get regionControl(){return this.form.get("region.isocode")}constructor(userRegisterFacade,userAddressService,organizationUserRegistrationFacade,translationService,globalMessageService,authConfigService,routingService,formBuilder){this.userRegisterFacade=userRegisterFacade,this.userAddressService=userAddressService,this.organizationUserRegistrationFacade=organizationUserRegistrationFacade,this.translationService=translationService,this.globalMessageService=globalMessageService,this.authConfigService=authConfigService,this.routingService=routingService,this.formBuilder=formBuilder,this._form=this.buildForm()}getTitles(){return this.userRegisterFacade.getTitles()}getCountries(){return this.userAddressService.getDeliveryCountries().pipe((0,tap.b)(countries=>{0===Object.keys(countries).length&&this.userAddressService.loadDeliveryCountries()}))}getRegions(){return this.countryControl?.valueChanges.pipe((0,filter.h)(countryIsoCode=>!!countryIsoCode),(0,switchMap.w)(countryIsoCode=>(this.regionControl?.reset(),this.userAddressService.getRegions(countryIsoCode))))??(0,of.of)([])}buildMessageContent(form){return this.translationService.translate("userRegistrationForm.messageToApproverTemplate",{phoneNumber:form.get("phoneNumber")?.value,addressLine:form.get("line1")?.value,secondAddressLine:form.get("line2")?.value,city:form.get("city")?.value,state:form.get("region")?.get("isocode")?.value,postalCode:form.get("postalCode")?.value,country:form.get("country")?.get("isocode")?.value,companyName:form.get("companyName")?.value,message:form.get("message")?.value})}displayGlobalMessage(){return this.globalMessageService.add({key:"userRegistrationForm.successFormSubmitMessage"},spartacus_core.xUg.MSG_TYPE_CONFIRMATION)}redirectToLogin(){this.authConfigService.getOAuthFlow()===spartacus_core.C8C.ResourceOwnerPasswordFlow&&this.routingService.go({cxRoute:"login"})}registerUser(form){return this.buildMessageContent(form).pipe((0,take.q)(1),(0,switchMap.w)(message=>this.organizationUserRegistrationFacade.registerUser({titleCode:form.get("titleCode")?.value,firstName:form.get("firstName")?.value,lastName:form.get("lastName")?.value,email:form.get("email")?.value,message})),(0,tap.b)(()=>{this.displayGlobalMessage(),this.redirectToLogin(),form.reset()}))}}__name(UserRegistrationFormService,"UserRegistrationFormService"),UserRegistrationFormService.\u0275fac=__name(function(t){return new(t||UserRegistrationFormService)(core.LFG(spartacus_user_profile_root.zm),core.LFG(spartacus_core.kFJ),core.LFG(spartacus_organization_user_registration_root._n),core.LFG(spartacus_core.D7D),core.LFG(spartacus_core.IWp),core.LFG(spartacus_core.dSP),core.LFG(spartacus_core.Znh),core.LFG(fesm2020_forms.qu))},"UserRegistrationFormService_Factory"),UserRegistrationFormService.\u0275prov=core.Yz7({token:UserRegistrationFormService,factory:UserRegistrationFormService.\u0275fac,providedIn:"root"});class UserRegistrationFormComponent{constructor(userRegistrationFormService){this.userRegistrationFormService=userRegistrationFormService,this.titles$=this.userRegistrationFormService.getTitles(),this.countries$=this.userRegistrationFormService.getCountries(),this.regions$=this.userRegistrationFormService.getRegions(),this.registerForm=this.userRegistrationFormService.form,this.isLoading$=new BehaviorSubject.X(!1),this.subscriptions=new Subscription.w}submit(){this.registerForm.valid?(this.isLoading$.next(!0),this.subscriptions.add(this.userRegistrationFormService.registerUser(this.registerForm).subscribe({complete:()=>this.isLoading$.next(!1),error:()=>this.isLoading$.next(!1)}))):this.registerForm.markAllAsTouched()}ngOnDestroy(){this.subscriptions.unsubscribe()}}__name(UserRegistrationFormComponent,"UserRegistrationFormComponent"),UserRegistrationFormComponent.\u0275fac=__name(function(t){return new(t||UserRegistrationFormComponent)(core.Y36(UserRegistrationFormService))},"UserRegistrationFormComponent_Factory"),UserRegistrationFormComponent.\u0275cmp=core.Xpm({type:UserRegistrationFormComponent,selectors:[["cx-user-registration-form"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["role","status"],[3,"formGroup","ngSubmit"],[1,"label-content"],["id","title-code-select","formControlName","titleCode","bindLabel","name","bindValue","code",3,"searchable","clearable","items","placeholder","cxNgSelectA11y"],[1,"label-content","required"],["required","true","type","text","name","firstname","formControlName","firstName",1,"form-control",3,"placeholder"],[3,"control"],["required","true","type","text","name","lastname","formControlName","lastName",1,"form-control",3,"placeholder"],["required","true","type","text","name","companyName","formControlName","companyName",1,"form-control",3,"placeholder"],["required","true","type","email","name","email","formControlName","email",1,"form-control",3,"placeholder"],["formGroupName","country",4,"ngIf"],["type","text","formControlName","line1",1,"form-control",3,"placeholder"],["type","text","formControlName","line2",1,"form-control",3,"placeholder"],["type","text","formControlName","town",1,"form-control",3,"placeholder"],["type","text","formControlName","postalCode",1,"form-control",3,"placeholder"],["formGroupName","region",4,"ngIf"],["type","tel","formControlName","phoneNumber",1,"form-control",3,"placeholder"],["formControlName","message","rows","5",1,"form-control",3,"placeholder"],["type","submit",1,"btn","btn-block","btn-primary"],[1,"cx-login-link","btn-link",3,"routerLink"],["formGroupName","country"],[4,"ngIf"],["id","country-select","formControlName","isocode","bindLabel","name","bindValue","isocode",1,"country-select",3,"searchable","clearable","items","placeholder","cxNgSelectA11y"],["formGroupName","region"],["formControlName","isocode","bindLabel","name","bindValue","isocode","id","region-select",1,"region-select",3,"searchable","clearable","items","placeholder","cxNgSelectA11y"],[1,"cx-spinner"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,UserRegistrationFormComponent_section_0_Template,93,106,"section",0),core.ALo(1,"async"),core.YNc(2,UserRegistrationFormComponent_ng_template_2_Template,2,0,"ng-template",null,1,core.W1O)),2&rf){const _r1=core.MAs(3);core.Q6J("ngIf",!core.lcZ(1,2,ctx.isLoading$))("ngIfElse",_r1)}},"UserRegistrationFormComponent_Template"),dependencies:[common.O5,fesm2020_forms._Y,fesm2020_forms.Fj,fesm2020_forms.JJ,fesm2020_forms.JL,fesm2020_forms.Q7,fesm2020_forms.sg,fesm2020_forms.u,fesm2020_forms.x0,router.rH,spartacus_storefront.ORR,spartacus_storefront.Ahv,ng_select_ng_select.w9,spartacus_storefront.VnX,common.Ov,spartacus_core.l2T,spartacus_core.X$D],encapsulation:2,changeDetection:0});class UserRegistrationFormModule{}__name(UserRegistrationFormModule,"UserRegistrationFormModule"),UserRegistrationFormModule.\u0275fac=__name(function(t){return new(t||UserRegistrationFormModule)},"UserRegistrationFormModule_Factory"),UserRegistrationFormModule.\u0275mod=core.oAB({type:UserRegistrationFormModule}),UserRegistrationFormModule.\u0275inj=core.cJS({providers:[UserRegistrationFormService],imports:[common.ez,fesm2020_forms.UX,router.Bz,spartacus_core.bhT,spartacus_core.LUR,spartacus_storefront.Fme,spartacus_storefront.Fym,ng_select_ng_select.A0,spartacus_storefront.LcC,spartacus_core.pEA.withConfig({cmsComponents:{OrganizationUserRegistrationComponent:{component:UserRegistrationFormComponent,guards:[spartacus_core.aOY]}}})]});class UserRegistrationComponentsModule{}__name(UserRegistrationComponentsModule,"UserRegistrationComponentsModule"),UserRegistrationComponentsModule.\u0275fac=__name(function(t){return new(t||UserRegistrationComponentsModule)},"UserRegistrationComponentsModule_Factory"),UserRegistrationComponentsModule.\u0275mod=core.oAB({type:UserRegistrationComponentsModule}),UserRegistrationComponentsModule.\u0275inj=core.cJS({imports:[router.Bz,UserRegistrationFormModule]});var throwError=__webpack_require__(84724),map=__webpack_require__(86466);class CDCB2BRegisterComponentService extends UserRegistrationFormService{constructor(command,cdcJSService,authService,eventService,userRegisterFacade,userAddressService,organizationUserRegistrationFacade,translationService,globalMessageService,authConfigService,routingService,formBuilder){super(userRegisterFacade,userAddressService,organizationUserRegistrationFacade,translationService,globalMessageService,authConfigService,routingService,formBuilder),this.command=command,this.cdcJSService=cdcJSService,this.authService=authService,this.eventService=eventService,this.userRegisterFacade=userRegisterFacade,this.userAddressService=userAddressService,this.organizationUserRegistrationFacade=organizationUserRegistrationFacade,this.translationService=translationService,this.globalMessageService=globalMessageService,this.authConfigService=authConfigService,this.routingService=routingService,this.formBuilder=formBuilder,this.registerCommand=this.command.create(({orgInfo})=>this.cdcJSService.registerOrganisationWithoutScreenSet(orgInfo)),this.loadUserTokenFailed$=this.eventService.get(spartacus_cdc_root.yB).pipe((0,map.U)(event=>!!event),(0,tap.b)(failed=>{if(failed)throw new Error("User token failed to load.")}))}registerUser(form){if(!(form.get("firstName")?.value&&form.get("lastName")?.value&&form.get("email")?.value&&form.get("companyName")?.value))return(0,throwError._)(`The provided user is not valid: ${form.value}`);const orgInfo={firstName:form.get("firstName")?.value,lastName:form.get("lastName")?.value,email:form.get("email")?.value,companyName:form.get("companyName")?.value,addressLine1:form.get("line1")?.value,addressLine2:form.get("line2")?.value,postalCode:form.get("postalCode")?.value,town:form.get("town")?.value,region:form.get("region")?.get("isocode")?.value,country:form.get("country")?.get("isocode")?.value,phoneNumber:form.get("phoneNumber")?.value,message:form.get("message")?.value};return this.cdcJSService.didLoad().pipe((0,tap.b)(cdcLoaded=>{if(!cdcLoaded)throw this.globalMessageService.add({key:"errorHandlers.scriptFailedToLoad"},spartacus_core.xUg.MSG_TYPE_ERROR),new Error("CDC script didn't load.")}),(0,switchMap.w)(()=>this.registerCommand.execute({orgInfo})),(0,tap.b)(()=>{this.displayGlobalMessage(),this.redirectToLogin(),form.reset()}))}postRegisterMessage(){}}__name(CDCB2BRegisterComponentService,"CDCB2BRegisterComponentService"),CDCB2BRegisterComponentService.\u0275fac=__name(function(t){return new(t||CDCB2BRegisterComponentService)(core.LFG(spartacus_core.VDr),core.LFG(spartacus_cdc_root.bF),core.LFG(spartacus_core.e80),core.LFG(spartacus_core.POd),core.LFG(spartacus_user_profile_root.zm),core.LFG(spartacus_core.kFJ),core.LFG(spartacus_organization_user_registration_root._n),core.LFG(spartacus_core.D7D),core.LFG(spartacus_core.IWp),core.LFG(spartacus_core.dSP),core.LFG(spartacus_core.Znh),core.LFG(fesm2020_forms.qu))},"CDCB2BRegisterComponentService_Factory"),CDCB2BRegisterComponentService.\u0275prov=core.Yz7({token:CDCB2BRegisterComponentService,factory:CDCB2BRegisterComponentService.\u0275fac});class CDCB2BRegisterModule{}__name(CDCB2BRegisterModule,"CDCB2BRegisterModule"),CDCB2BRegisterModule.\u0275fac=__name(function(t){return new(t||CDCB2BRegisterModule)},"CDCB2BRegisterModule_Factory"),CDCB2BRegisterModule.\u0275mod=core.oAB({type:CDCB2BRegisterModule}),CDCB2BRegisterModule.\u0275inj=core.cJS({providers:[{provide:UserRegistrationFormService,useClass:CDCB2BRegisterComponentService}],imports:[common.ez,fesm2020_forms.UX,router.Bz,spartacus_core.bhT,spartacus_core.LUR,spartacus_storefront.Fme,spartacus_storefront.Fym,ng_select_ng_select.A0,spartacus_storefront.LcC]});const ORGANIZATION_USER_REGISTRATION_SERIALIZER=new core.OlP("OrganizationUserRegistrationSerializer");class UserRegistrationAdapter{}__name(UserRegistrationAdapter,"UserRegistrationAdapter");class UserRegistrationConnector{constructor(adapter){this.adapter=adapter}registerUser(userData){return this.adapter.registerUser(userData)}}__name(UserRegistrationConnector,"UserRegistrationConnector"),UserRegistrationConnector.\u0275fac=__name(function(t){return new(t||UserRegistrationConnector)(core.LFG(UserRegistrationAdapter))},"UserRegistrationConnector_Factory"),UserRegistrationConnector.\u0275prov=core.Yz7({token:UserRegistrationConnector,factory:UserRegistrationConnector.\u0275fac});class UserRegistrationService{constructor(userRegistrationConnector,command){this.userRegistrationConnector=userRegistrationConnector,this.command=command,this.registerOrganizationUserCommand=this.command.create(payload=>this.userRegistrationConnector.registerUser(payload.userData))}registerUser(userData){return this.registerOrganizationUserCommand.execute({userData})}}__name(UserRegistrationService,"UserRegistrationService"),UserRegistrationService.\u0275fac=__name(function(t){return new(t||UserRegistrationService)(core.LFG(UserRegistrationConnector),core.LFG(spartacus_core.VDr))},"UserRegistrationService_Factory"),UserRegistrationService.\u0275prov=core.Yz7({token:UserRegistrationService,factory:UserRegistrationService.\u0275fac});const facadeProviders=[UserRegistrationService,{provide:spartacus_organization_user_registration_root._n,useExisting:UserRegistrationService}];class OrganizationUserRegistrationConflictHandler extends spartacus_core.kck{constructor(){super(...arguments),this.responseStatus=spartacus_core.sdw.CONFLICT}handleError(request,response){request&&this.getErrors(response)?.length&&this.globalMessageService.add({key:"userRegistrationForm.httpHandlers.conflict"},spartacus_core.xUg.MSG_TYPE_ERROR)}getErrors(response){return response.error?.errors.filter(error=>"AlreadyExistsError"===error?.type)}getPriority(){return 0}}__name(OrganizationUserRegistrationConflictHandler,"OrganizationUserRegistrationConflictHandler"),OrganizationUserRegistrationConflictHandler.\u0275fac=function(){let \u0275OrganizationUserRegistrationConflictHandler_BaseFactory;return __name(function(t){return(\u0275OrganizationUserRegistrationConflictHandler_BaseFactory||(\u0275OrganizationUserRegistrationConflictHandler_BaseFactory=core.n5z(OrganizationUserRegistrationConflictHandler)))(t||OrganizationUserRegistrationConflictHandler)},"OrganizationUserRegistrationConflictHandler_Factory")}(),OrganizationUserRegistrationConflictHandler.\u0275prov=core.Yz7({token:OrganizationUserRegistrationConflictHandler,factory:OrganizationUserRegistrationConflictHandler.\u0275fac,providedIn:"root"});class UserRegistrationCoreModule{static forRoot(){return{ngModule:UserRegistrationCoreModule,providers:[...facadeProviders,UserRegistrationConnector,{provide:spartacus_core.kck,useExisting:OrganizationUserRegistrationConflictHandler,multi:!0}]}}}__name(UserRegistrationCoreModule,"UserRegistrationCoreModule"),UserRegistrationCoreModule.\u0275fac=__name(function(t){return new(t||UserRegistrationCoreModule)},"UserRegistrationCoreModule_Factory"),UserRegistrationCoreModule.\u0275mod=core.oAB({type:UserRegistrationCoreModule}),UserRegistrationCoreModule.\u0275inj=core.cJS({});var http=__webpack_require__(48664),catchError=__webpack_require__(2155);class OccUserRegistrationAdapter{constructor(http2,occEndpoints,converter){this.http=http2,this.occEndpoints=occEndpoints,this.converter=converter,this.logger=(0,core.f3M)(spartacus_core.mQy)}registerUser(userData){const url=this.getOrganizationUserRegistrationEndpoint();let headers=new http.WM({"Content-Type":"application/json"});return headers=spartacus_core.Fox.createHeader(spartacus_core._Re,!0,headers),userData=this.converter.convert(userData,ORGANIZATION_USER_REGISTRATION_SERIALIZER),this.http.post(url,userData,{headers}).pipe((0,catchError.K)(error=>(0,throwError._)((0,spartacus_core.cxH)(error,this.logger))))}getOrganizationUserRegistrationEndpoint(){return this.occEndpoints.buildUrl("organizationUserRegistration")}}__name(OccUserRegistrationAdapter,"OccUserRegistrationAdapter"),OccUserRegistrationAdapter.\u0275fac=__name(function(t){return new(t||OccUserRegistrationAdapter)(core.LFG(http.eN),core.LFG(spartacus_core.Lz0),core.LFG(spartacus_core.IXI))},"OccUserRegistrationAdapter_Factory"),OccUserRegistrationAdapter.\u0275prov=core.Yz7({token:OccUserRegistrationAdapter,factory:OccUserRegistrationAdapter.\u0275fac,providedIn:"root"});class UserRegistrationOccModule{}__name(UserRegistrationOccModule,"UserRegistrationOccModule"),UserRegistrationOccModule.\u0275fac=__name(function(t){return new(t||UserRegistrationOccModule)},"UserRegistrationOccModule_Factory"),UserRegistrationOccModule.\u0275mod=core.oAB({type:UserRegistrationOccModule}),UserRegistrationOccModule.\u0275inj=core.cJS({providers:[(0,spartacus_core.i51)({backend:{occ:{endpoints:{organizationUserRegistration:"/orgUsers"}}}}),{provide:UserRegistrationAdapter,useExisting:OccUserRegistrationAdapter}],imports:[common.ez]});class OrganizationUserRegistrationModule{}__name(OrganizationUserRegistrationModule,"OrganizationUserRegistrationModule"),OrganizationUserRegistrationModule.\u0275fac=__name(function(t){return new(t||OrganizationUserRegistrationModule)},"OrganizationUserRegistrationModule_Factory"),OrganizationUserRegistrationModule.\u0275mod=core.oAB({type:OrganizationUserRegistrationModule}),OrganizationUserRegistrationModule.\u0275inj=core.cJS({imports:[UserRegistrationCoreModule.forRoot(),UserRegistrationComponentsModule,UserRegistrationOccModule]});const extensions=[];__webpack_require__(90595).N.cdc&&extensions.push(CDCB2BRegisterModule);class OrganizationUserRegistrationWrapperModule{}__name(OrganizationUserRegistrationWrapperModule,"OrganizationUserRegistrationWrapperModule"),OrganizationUserRegistrationWrapperModule.\u0275fac=__name(function(t){return new(t||OrganizationUserRegistrationWrapperModule)},"OrganizationUserRegistrationWrapperModule_Factory"),OrganizationUserRegistrationWrapperModule.\u0275mod=core.oAB({type:OrganizationUserRegistrationWrapperModule}),OrganizationUserRegistrationWrapperModule.\u0275inj=core.cJS({imports:[OrganizationUserRegistrationModule,extensions]})}};