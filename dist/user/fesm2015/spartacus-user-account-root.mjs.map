{"version":3,"file":"spartacus-user-account-root.mjs","sources":["../../../feature-libs/user/account/root/events/user-account-event.listener.ts","../../../feature-libs/user/account/root/events/user-account-event.module.ts","../../../feature-libs/user/account/root/feature-name.ts","../../../feature-libs/user/account/root/user-account-root.module.ts","../../../feature-libs/user/account/root/facade/user-account.facade.ts","../../../feature-libs/user/account/root/facade/index.ts","../../../feature-libs/user/account/root/model/index.ts","../../../feature-libs/user/account/root/events/user-account.events.ts","../../../feature-libs/user/account/root/events/index.ts","../../../feature-libs/user/account/root/public_api.ts","../../../feature-libs/user/account/root/spartacus-user-account-root.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable, OnDestroy } from '@angular/core';\nimport {\n  EventService,\n  GlobalMessageService,\n  GlobalMessageType,\n  LogoutEvent,\n} from '@spartacus/core';\nimport { Subscription } from 'rxjs';\n\n/**\n * User account event listener.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class UserAccountEventListener implements OnDestroy {\n  protected subscriptions = new Subscription();\n\n  constructor(\n    protected eventService: EventService,\n    protected globalMessageService: GlobalMessageService\n  ) {\n    this.onAuth();\n  }\n\n  /**\n   * Registers events for the auth events.\n   */\n  protected onAuth(): void {\n    this.subscriptions.add(\n      this.eventService.get(LogoutEvent).subscribe(() => {\n        this.globalMessageService.add(\n          { key: 'authMessages.signedOutSuccessfully' },\n          GlobalMessageType.MSG_TYPE_CONFIRMATION\n        );\n      })\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NgModule } from '@angular/core';\nimport { UserAccountEventListener } from './user-account-event.listener';\n\n@NgModule({})\nexport class UserAccountEventModule {\n  constructor(_userAccountEventListener: UserAccountEventListener) {\n    // Intentional empty constructor\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const USER_ACCOUNT_FEATURE = 'userAccount';\nexport const USER_ACCOUNT_CORE_FEATURE = 'userAccountCore';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, provideDefaultConfigFactory } from '@spartacus/core';\nimport { UserAccountEventModule } from './events/user-account-event.module';\nimport {\n  USER_ACCOUNT_CORE_FEATURE,\n  USER_ACCOUNT_FEATURE,\n} from './feature-name';\n\n// TODO: Inline this factory when we start releasing Ivy compiled libraries\nexport function defaultUserAccountComponentsConfig(): CmsConfig {\n  const config: CmsConfig = {\n    featureModules: {\n      [USER_ACCOUNT_FEATURE]: {\n        cmsComponents: [\n          'LoginComponent',\n          'ReturningCustomerLoginComponent',\n          'ReturningCustomerRegisterComponent',\n          'MyAccountViewUserComponent',\n        ],\n      },\n      // by default core is bundled together with components\n      [USER_ACCOUNT_CORE_FEATURE]: USER_ACCOUNT_FEATURE,\n    },\n  };\n  return config;\n}\n\n@NgModule({\n  imports: [UserAccountEventModule],\n  providers: [provideDefaultConfigFactory(defaultUserAccountComponentsConfig)],\n})\nexport class UserAccountRootModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { Injectable } from '@angular/core';\nimport { facadeFactory } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { USER_ACCOUNT_CORE_FEATURE } from '../feature-name';\nimport { User } from '../model/user.model';\n\n@Injectable({\n  providedIn: 'root',\n  useFactory: () =>\n    facadeFactory({\n      facade: UserAccountFacade,\n      feature: USER_ACCOUNT_CORE_FEATURE,\n      methods: ['get', 'getById'],\n    }),\n})\nexport abstract class UserAccountFacade {\n  abstract get(): Observable<User | undefined>;\n  abstract getById(userId: string): Observable<User | undefined>;\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './user-account.facade';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './user.model';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { CxEvent } from '@spartacus/core';\nimport { User } from '../model/user.model';\n\nexport abstract class UserAccountEvent extends CxEvent {\n  user: User;\n}\n\nexport class UserAccountChangedEvent extends UserAccountEvent {\n  static readonly type = 'UserAccountChangedEvent';\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './user-account-event.listener';\nexport * from './user-account-event.module';\nexport * from './user-account.events';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './user-account-root.module';\nexport * from './facade/index';\nexport * from './model/index';\nexport * from './events/index';\nexport * from './feature-name';\n\n/** AUGMENTABLE_TYPES_START */\nexport { User } from './model/user.model';\n/** AUGMENTABLE_TYPES_END */\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i1.UserAccountEventListener"],"mappings":"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"}