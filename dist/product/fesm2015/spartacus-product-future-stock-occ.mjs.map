{"version":3,"file":"spartacus-product-future-stock-occ.mjs","sources":["../../../feature-libs/product/future-stock/occ/adapters/occ-future-stock.adapter.ts","../../../feature-libs/product/future-stock/occ/adapters/index.ts","../../../feature-libs/product/future-stock/occ/model/index.ts","../../../feature-libs/product/future-stock/occ/config/default-occ-future-stock.config.ts","../../../feature-libs/product/future-stock/occ/future-stock-occ.module.ts","../../../feature-libs/product/future-stock/occ/public_api.ts","../../../feature-libs/product/future-stock/occ/spartacus-product-future-stock-occ.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable, inject } from '@angular/core';\n\nimport {\n  ConverterService,\n  LoggerService,\n  OccEndpointsService,\n  normalizeHttpError,\n} from '@spartacus/core';\n\nimport {\n  FUTURE_STOCK_LIST_NORMALIZER,\n  FUTURE_STOCK_NORMALIZER,\n  FutureStockAdapter,\n  ProductFutureStock,\n  ProductFutureStockList,\n} from '@spartacus/product/future-stock/core';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\n@Injectable()\nexport class OccFutureStockAdapter implements FutureStockAdapter {\n  protected logger = inject(LoggerService);\n\n  constructor(\n    protected http: HttpClient,\n    protected occEndpoints: OccEndpointsService,\n    protected converter: ConverterService\n  ) {}\n\n  getFutureStock(\n    userId: string,\n    productCode: string\n  ): Observable<ProductFutureStock> {\n    return this.http\n      .get<ProductFutureStock>(this.getFutureStockEndpoint(userId, productCode))\n      .pipe(\n        catchError((error) =>\n          throwError(normalizeHttpError(error, this.logger))\n        ),\n        this.converter.pipeable(FUTURE_STOCK_NORMALIZER)\n      );\n  }\n\n  getFutureStocks(\n    userId: string,\n    productCodes: string\n  ): Observable<ProductFutureStockList> {\n    return this.http\n      .get<ProductFutureStockList>(\n        this.getFutureStocksEndpoint(userId, productCodes)\n      )\n      .pipe(\n        catchError((error) =>\n          throwError(normalizeHttpError(error, this.logger))\n        ),\n        this.converter.pipeable(FUTURE_STOCK_LIST_NORMALIZER)\n      );\n  }\n\n  protected getFutureStockEndpoint(\n    userId: string,\n    productCode: string\n  ): string {\n    return this.occEndpoints.buildUrl('futureStock', {\n      urlParams: { userId, productCode },\n    });\n  }\n\n  protected getFutureStocksEndpoint(\n    userId: string,\n    productCodes: string\n  ): string {\n    const params = <any>{};\n    params['productCodes'] = productCodes;\n\n    return this.occEndpoints.buildUrl('futureStocks', {\n      urlParams: { userId },\n      queryParams: params,\n    });\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './occ-future-stock.adapter';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './occ-future-stock-endpoints.model';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { OccConfig } from '@spartacus/core';\nimport { FutureStockOccEndpoints } from '../model/occ-future-stock-endpoints.model';\n\nconst futureStockEndpoints: FutureStockOccEndpoints = {\n  futureStock: 'users/${userId}/futureStocks/${productCode}',\n  futureStocks: 'users/${userId}/futureStocks',\n};\n\nexport const defaultOccFutureStockConfig: OccConfig = {\n  backend: {\n    occ: {\n      endpoints: {\n        ...futureStockEndpoints,\n      },\n    },\n  },\n};\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { provideDefaultConfig } from '@spartacus/core';\nimport { FutureStockAdapter } from '@spartacus/product/future-stock/core';\nimport { OccFutureStockAdapter } from './adapters/occ-future-stock.adapter';\nimport { defaultOccFutureStockConfig } from './config/default-occ-future-stock.config';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [\n    provideDefaultConfig(defaultOccFutureStockConfig),\n    {\n      provide: FutureStockAdapter,\n      useClass: OccFutureStockAdapter,\n    },\n  ],\n})\nexport class FutureStockOccModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './adapters/index';\nexport * from './model/index';\nexport * from './future-stock-occ.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}