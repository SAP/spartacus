{"version":3,"file":"spartacus-product-image-zoom-components.mjs","sources":["../../../feature-libs/product/image-zoom/components/product-image-zoom/product-image-zoom-thumbnails/product-image-zoom-thumbnails.component.ts","../../../feature-libs/product/image-zoom/components/product-image-zoom/product-image-zoom-thumbnails/product-image-zoom-thumbnails.component.html","../../../feature-libs/product/image-zoom/components/product-image-zoom/product-image-zoom-view/product-image-zoom-view.component.ts","../../../feature-libs/product/image-zoom/components/product-image-zoom/product-image-zoom-view/product-image-zoom-view.component.html","../../../feature-libs/product/image-zoom/components/product-image-zoom/product-image-zoom-dialog/product-image-zoom-dialog.component.ts","../../../feature-libs/product/image-zoom/components/product-image-zoom/product-image-zoom-dialog/product-image-zoom-dialog.component.html","../../../feature-libs/product/image-zoom/components/product-image-zoom/default-product-image-zoom-layout.config.ts","../../../feature-libs/product/image-zoom/components/product-image-zoom/product-image-zoom-trigger/product-image-zoom-trigger.component.ts","../../../feature-libs/product/image-zoom/components/product-image-zoom/product-image-zoom-trigger/product-image-zoom-trigger.component.html","../../../feature-libs/product/image-zoom/components/product-image-zoom/product-image-zoom-product-images/product-image-zoom-product-images.component.ts","../../../feature-libs/product/image-zoom/components/product-image-zoom/product-image-zoom-product-images/product-image-zoom-product-images.component.html","../../../feature-libs/product/image-zoom/components/product-image-zoom/product-image-zoom.module.ts","../../../feature-libs/product/image-zoom/components/product-image-zoom-components.module.ts","../../../feature-libs/product/image-zoom/components/product-image-zoom/index.ts","../../../feature-libs/product/image-zoom/components/public_api.ts","../../../feature-libs/product/image-zoom/components/spartacus-product-image-zoom-components.ts"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n  OnInit,\n  OnDestroy,\n} from '@angular/core';\nimport { ImageGroup, isNotNullable } from '@spartacus/core';\nimport { ThumbnailsGroup } from '@spartacus/product/image-zoom/root';\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-product-image-zoom-thumbnails',\n  templateUrl: './product-image-zoom-thumbnails.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductImageZoomThumbnailsComponent implements OnInit, OnDestroy {\n  private mainMediaContainer = new BehaviorSubject<ImageGroup>({});\n\n  @Output() productImage = new EventEmitter<{ image: any; index: number }>();\n\n  @Input() thumbs$: Observable<ThumbnailsGroup[]>;\n\n  @Input() activeThumb: EventEmitter<ImageGroup>;\n\n  protected subscription = new Subscription();\n\n  selectedIndex: number;\n\n  constructor() {\n    // Intentional empty constructor\n  }\n\n  ngOnInit() {\n    this.subscription.add(\n      this.activeThumb.subscribe((image) => {\n        this.mainMediaContainer.next(image);\n      })\n    );\n  }\n\n  openImage(image: ImageGroup): void {\n    this.mainMediaContainer.next(image);\n    if (typeof image.zoom?.galleryIndex === 'number') {\n      this.productImage.emit({ image, index: image.zoom.galleryIndex });\n    }\n  }\n\n  isActive(thumbnail: ImageGroup): Observable<boolean> {\n    return this.mainMediaContainer.asObservable().pipe(\n      filter(isNotNullable),\n      map((container: ImageGroup) => {\n        return (container.zoom?.url &&\n          thumbnail.zoom?.url &&\n          container.zoom.url === thumbnail.zoom.url) as boolean;\n      })\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n}\n","<ng-container *ngIf=\"thumbs$ | async as thumbs\">\n  <cx-carousel\n    *ngIf=\"thumbs.length\"\n    class=\"thumbs\"\n    [items]=\"thumbs\"\n    itemWidth=\"70px\"\n    [hideIndicators]=\"false\"\n    [template]=\"thumb\"\n  ></cx-carousel>\n</ng-container>\n\n<ng-template #thumb let-item=\"item\">\n  <cx-media\n    [container]=\"item.container\"\n    tabindex=\"0\"\n    (focus)=\"openImage(item.container)\"\n    [class.is-active]=\"isActive(item.container) | async\"\n  >\n  </cx-media>\n</ng-template>\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  ViewChild,\n} from '@angular/core';\nimport { ImageGroup, isNotNullable, Product } from '@spartacus/core';\nimport { ThumbnailsGroup } from '@spartacus/product/image-zoom/root';\nimport {\n  BREAKPOINT,\n  BreakpointService,\n  CurrentProductService,\n  ICON_TYPE,\n} from '@spartacus/storefront';\nimport {\n  BehaviorSubject,\n  combineLatest,\n  fromEvent,\n  merge,\n  Observable,\n  of,\n  Subscription,\n} from 'rxjs';\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  shareReplay,\n  switchMap,\n  tap,\n} from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-product-image-zoom-view',\n  templateUrl: './product-image-zoom-view.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductImageZoomViewComponent implements OnInit, OnDestroy {\n  iconType = ICON_TYPE;\n\n  @Input() galleryIndex: number;\n\n  private mainMediaContainer = new BehaviorSubject<ImageGroup | null>(null);\n  private defaultImageReady = new BehaviorSubject<boolean>(false);\n  private zoomReady = new BehaviorSubject<boolean>(false);\n  private _defaultImage: ElementRef;\n  private _zoomImage: ElementRef;\n\n  protected subscription = new Subscription();\n  protected mainMediaContainer$: Observable<ImageGroup | null> =\n    this.mainMediaContainer.asObservable();\n  protected defaultImageReady$: Observable<boolean> =\n    this.defaultImageReady.asObservable();\n  protected zoomReady$: Observable<boolean> = this.zoomReady.asObservable();\n\n  activeThumb: EventEmitter<ImageGroup> = new EventEmitter<ImageGroup>();\n\n  defaultImageClickHandler$: Observable<any[]> = this.defaultImageReady$.pipe(\n    filter(Boolean),\n    switchMap((_) =>\n      merge(...this.clickOrDoubleClick(this.defaultImage)).pipe(\n        tap(() => this.zoom())\n      )\n    )\n  );\n\n  get defaultImage(): ElementRef {\n    return this._defaultImage;\n  }\n\n  @ViewChild('defaultImage', { read: ElementRef }) set defaultImage(\n    el: ElementRef\n  ) {\n    if (el) {\n      this._defaultImage = el;\n      this.defaultImageReady.next(true);\n    }\n  }\n\n  zoomImageClickHandler$: Observable<any[]> = this.zoomReady$.pipe(\n    filter(Boolean),\n    switchMap((_) =>\n      merge(...this.clickOrDoubleClick(this.zoomImage)).pipe(\n        tap(() => this.zoom())\n      )\n    )\n  );\n\n  get zoomImage(): ElementRef {\n    return this._zoomImage;\n  }\n\n  @ViewChild('zoomContainer', { read: ElementRef }) set zoomImage(\n    el: ElementRef\n  ) {\n    if (el) {\n      this._zoomImage = el;\n      this.zoomReady.next(true);\n    }\n  }\n\n  @ViewChild('zoomedImage', { read: ElementRef }) zoomedImage: ElementRef;\n\n  startCoords: { x: number; y: number } | null = null;\n  left = 0;\n  top = 0;\n  isZoomed = false;\n\n  protected product$: Observable<Product> = this.currentProductService\n    .getProduct()\n    .pipe(\n      filter(isNotNullable),\n      distinctUntilChanged(),\n      tap((p: Product) => {\n        if (this.galleryIndex) {\n          const image = Array.isArray(p.images?.GALLERY)\n            ? p.images?.GALLERY.find(\n                (img) => img.zoom?.galleryIndex === this.galleryIndex\n              )\n            : p.images?.GALLERY;\n          this.mainMediaContainer.next(image || null);\n        } else {\n          this.mainMediaContainer.next(\n            p.images?.PRIMARY ? (p.images.PRIMARY as ImageGroup) : {}\n          );\n        }\n      }),\n      shareReplay(1)\n    );\n\n  thumbnails$: Observable<Observable<ThumbnailsGroup>[]> = this.product$.pipe(\n    map((p: Product) => this.createThumbs(p)),\n    shareReplay(1)\n  );\n\n  mainImage$: Observable<ImageGroup | null> = combineLatest([\n    this.product$,\n    this.mainMediaContainer$,\n  ]).pipe(map(([, container]) => container));\n\n  constructor(\n    protected currentProductService: CurrentProductService,\n    protected renderer: Renderer2,\n    protected cdRef: ChangeDetectorRef,\n    protected breakpointService: BreakpointService\n  ) {}\n\n  ngOnInit() {\n    this.subscription.add(this.defaultImageClickHandler$.subscribe());\n    this.subscription.add(this.zoomImageClickHandler$.subscribe());\n  }\n\n  openImage(item: ImageGroup): void {\n    this.mainMediaContainer.next(item);\n    this.activeThumb.emit(item);\n  }\n\n  /** find the index of the main media in the list of media */\n  protected getActive(): number {\n    if (Array.isArray(this.mainMediaContainer.value)) {\n      return this.mainMediaContainer.value[0].thumbnail?.galleryIndex || 0;\n    }\n    return this.mainMediaContainer?.value?.thumbnail?.galleryIndex || 0;\n  }\n\n  getPreviousProduct(thumbs: Observable<ImageGroup>[]): Observable<ImageGroup> {\n    const active = this.getActive();\n    if (active === 0) {\n      return thumbs[active];\n    }\n    return thumbs[active - 1];\n  }\n\n  getNextProduct(thumbs: Observable<ImageGroup>[]): Observable<ImageGroup> {\n    const active = this.getActive();\n    if (active === thumbs.length - 1) {\n      return thumbs[active];\n    }\n    return thumbs[active + 1];\n  }\n\n  /**\n   * Zoom in or out of the image\n   */\n  zoom(): void {\n    this.isZoomed = !this.isZoomed;\n    this.startCoords = null;\n    this.left = 0;\n    this.top = 0;\n    this.cdRef.markForCheck();\n  }\n\n  /**\n   * Touch screen image pan\n   *\n   * @param event\n   */\n  touchMove(event: TouchEvent): void {\n    const touch = event.touches[0] || event.changedTouches[0];\n    const boundingRect =\n      this.zoomedImage?.nativeElement?.getBoundingClientRect() as DOMRect;\n    const imageElement = this.zoomedImage?.nativeElement?.firstChild;\n\n    if (!this.startCoords) {\n      this.startCoords = { x: touch.clientX, y: touch.clientY };\n    }\n    this.left += touch.clientX - this.startCoords.x;\n    this.top += touch.clientY - this.startCoords.y;\n\n    this.moveImage(this.left, this.top, boundingRect, imageElement);\n\n    this.startCoords = { x: touch.clientX, y: touch.clientY };\n  }\n\n  /**\n   * Clears touch location\n   */\n  clearTouch(): void {\n    this.startCoords = null;\n  }\n\n  /**\n   * Pointer image pan\n   *\n   * @param event\n   */\n  pointerMove(event: MouseEvent): void {\n    const boundingRect =\n      this.zoomedImage.nativeElement.getBoundingClientRect() as DOMRect;\n    const imageElement = this.zoomedImage.nativeElement.firstChild;\n\n    const { positionX, positionY } = this.calculatePointerMovePosition(\n      this.zoomedImage,\n      event.clientX,\n      event.clientY\n    );\n\n    this.moveImage(positionX, positionY, boundingRect, imageElement);\n  }\n\n  changeImage(event: { image: ImageGroup; index: number }): void {\n    this.mainMediaContainer.next(event.image);\n  }\n\n  /**\n   * Applies the offset from touchMove or pointerMove to the image element\n   *\n   * @param positionX\n   * @param positionY\n   * @param boundingRect\n   * @param imageElement\n   */\n  protected moveImage(\n    positionX: number,\n    positionY: number,\n    boundingRect: any,\n    imageElement: DOMRect\n  ): void {\n    const { x, y } = this.handleOutOfBounds(\n      positionX,\n      positionY,\n      imageElement,\n      boundingRect\n    );\n\n    if (imageElement) {\n      this.renderer.setStyle(imageElement, 'left', x + 'px');\n      this.renderer.setStyle(imageElement, 'top', y + 'px');\n    }\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n  /**\n   * Returns click and dblclick event mapping for the given element\n   *\n   * @param element\n   */\n  private clickOrDoubleClick(element: ElementRef): Observable<any>[] {\n    return [\n      fromEvent(element.nativeElement, 'click').pipe(\n        switchMap(() => this.breakpointService.isUp(BREAKPOINT.md)),\n        filter(Boolean)\n      ),\n      fromEvent(element.nativeElement, 'dblclick').pipe(\n        switchMap(() => this.breakpointService.isDown(BREAKPOINT.lg)),\n        filter(Boolean)\n      ),\n    ];\n  }\n\n  /**\n   * Return an array of CarouselItems for the product thumbnails.\n   * In case there are less then 2 thumbs, we return null.\n   */\n  private createThumbs(product: Product): Observable<ThumbnailsGroup>[] {\n    if (\n      !product.images ||\n      !product.images.GALLERY ||\n      product.images.GALLERY.length < 2\n    ) {\n      return [];\n    }\n\n    const images: ImageGroup[] = product.images.GALLERY as ImageGroup[];\n\n    return images.map((c) => of({ container: c }));\n  }\n\n  /**\n   * Keeps the zoom image from leaving the bounding container\n   *\n   * @param positionX\n   * @param positionY\n   * @param imageElement\n   * @param boundingRect\n   */\n  handleOutOfBounds(\n    positionX: number,\n    positionY: number,\n    imageElement: any,\n    boundingRect: DOMRect\n  ): { x: number; y: number } {\n    const paddingX = 60;\n    const paddingY = 60;\n\n    if (positionY <= -imageElement?.height + paddingY) {\n      positionY = -imageElement?.height + paddingY;\n    }\n    if (positionY >= boundingRect?.height - paddingY) {\n      positionY = boundingRect?.height - paddingY;\n    }\n    if (\n      positionX <=\n      -imageElement?.width - boundingRect?.width / 2 + paddingX\n    ) {\n      positionX = -imageElement?.width - boundingRect?.width / 2 + paddingX;\n    }\n    if (positionX >= imageElement?.width + boundingRect?.width / 2 - paddingX) {\n      positionX = imageElement?.width + boundingRect?.width / 2 - paddingX;\n    }\n\n    return { x: positionX, y: positionY };\n  }\n\n  /**\n   * Returns the position of the image based on the cursor pointer\n   *\n   * @param element\n   * @param clientX\n   * @param clientY\n   */\n  calculatePointerMovePosition(\n    element: ElementRef,\n    clientX: number,\n    clientY: number\n  ): { positionX: number; positionY: number } {\n    const boundingRect =\n      element.nativeElement.getBoundingClientRect() as DOMRect;\n\n    const x = clientX - boundingRect.left;\n    const y = clientY - boundingRect.top;\n\n    const positionX = -x + element.nativeElement.clientWidth / 2;\n    const positionY = -y + element.nativeElement.clientHeight / 2;\n\n    return { positionX, positionY };\n  }\n}\n","<ng-container *ngIf=\"mainImage$ | async as main\">\n  <div class=\"cx-main-image-group\" *ngIf=\"thumbnails$ | async as thumbs\">\n    <div class=\"cx-navigate-image\">\n      <button\n        class=\"btn btn-link\"\n        *ngIf=\"getPreviousProduct(thumbs) | async as previousProduct\"\n        (click)=\"openImage(previousProduct.container)\"\n      >\n        <cx-icon [type]=\"iconType.CARET_LEFT\"></cx-icon>\n      </button>\n    </div>\n    <cx-media\n      #defaultImage\n      class=\"cx-default-image-zoom\"\n      *ngIf=\"!isZoomed\"\n      [container]=\"main\"\n    >\n    </cx-media>\n    <div #zoomContainer class=\"cx-zoom-container\" *ngIf=\"isZoomed\">\n      <cx-media\n        #zoomedImage\n        class=\"cx-image-zoomed\"\n        [container]=\"main\"\n        (mousemove)=\"pointerMove($event)\"\n        (touchmove)=\"touchMove($event)\"\n        (touchend)=\"clearTouch()\"\n      >\n      </cx-media>\n    </div>\n    <div class=\"cx-navigate-image\">\n      <button\n        class=\"btn btn-link\"\n        *ngIf=\"getNextProduct(thumbs) | async as nextProduct\"\n        (click)=\"openImage(nextProduct.container)\"\n      >\n        <cx-icon [type]=\"iconType.CARET_RIGHT\"></cx-icon>\n      </button>\n    </div>\n  </div>\n</ng-container>\n\n<cx-product-image-zoom-thumbnails\n  [thumbs$]=\"thumbnails$\"\n  [activeThumb]=\"activeThumb\"\n  (productImage)=\"changeImage($event)\"\n></cx-product-image-zoom-thumbnails>\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  HostListener,\n  Input,\n} from '@angular/core';\nimport {\n  FocusConfig,\n  ICON_TYPE,\n  LaunchDialogService,\n} from '@spartacus/storefront';\n\n@Component({\n  selector: 'cx-product-image-zoom-dialog',\n  templateUrl: 'product-image-zoom-dialog.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductImageZoomDialogComponent {\n  iconType = ICON_TYPE;\n\n  focusConfig: FocusConfig = {\n    trap: true,\n    block: true,\n    autofocus: 'button',\n    focusOnEscape: true,\n  };\n\n  @Input() galleryIndex: number;\n\n  @HostListener('click', ['$event'])\n  handleClick(event: UIEvent): void {\n    // Close on click outside the dialog window\n    if ((event.target as any).tagName === this.el.nativeElement.tagName) {\n      this.close('Cross click');\n    }\n  }\n\n  constructor(\n    protected launchDialogService: LaunchDialogService,\n    protected el: ElementRef\n  ) {}\n\n  close(reason = ''): void {\n    this.launchDialogService.closeDialog(reason);\n  }\n}\n","<div class=\"cx-image-zoom-dialog\" [cxFocus]=\"focusConfig\">\n  <div class=\"cx-dialog-content\">\n    <div class=\"cx-dialog-header\">\n      <button\n        type=\"button\"\n        class=\"close\"\n        [attr.aria-label]=\"'productImageZoomDialog.close' | cxTranslate\"\n        (click)=\"close('cross click')\"\n      >\n        <span aria-hidden=\"true\">\n          <cx-icon [type]=\"iconType.CLOSE\"></cx-icon>\n        </span>\n      </button>\n    </div>\n    <div class=\"cx-dialog-body\">\n      <cx-product-image-zoom-view\n        [galleryIndex]=\"galleryIndex\"\n      ></cx-product-image-zoom-view>\n    </div>\n  </div>\n</div>\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { DIALOG_TYPE, LayoutConfig } from '@spartacus/storefront';\nimport { ProductImageZoomDialogComponent } from './product-image-zoom-dialog/product-image-zoom-dialog.component';\n\nexport const defaultProductImageZoomLayoutConfig: LayoutConfig = {\n  launch: {\n    PRODUCT_IMAGE_ZOOM: {\n      inline: true,\n      component: ProductImageZoomDialogComponent,\n      dialogType: DIALOG_TYPE.DIALOG,\n    },\n  },\n};\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  ChangeDetectionStrategy,\n  Component,\n  ComponentRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  Output,\n  ViewContainerRef,\n  ViewChild,\n  ElementRef,\n} from '@angular/core';\nimport {\n  ICON_TYPE,\n  LaunchDialogService,\n  LAUNCH_CALLER,\n} from '@spartacus/storefront';\nimport { combineLatest, Subscription } from 'rxjs';\nimport { filter, tap } from 'rxjs/operators';\nimport { ProductImageZoomDialogComponent } from '../product-image-zoom-dialog/product-image-zoom-dialog.component';\n\n@Component({\n  selector: 'cx-product-image-zoom-trigger',\n  templateUrl: 'product-image-zoom-trigger.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductImageZoomTriggerComponent implements OnDestroy {\n  iconType = ICON_TYPE;\n  protected subscriptions = new Subscription();\n\n  //Expose the expand button so it can gain focus on closing the zoom window\n  @ViewChild('expandButton') expandButton: ElementRef;\n\n  @Input() galleryIndex: number;\n  @Input() set expandImage(expand: boolean) {\n    if (expand) {\n      this.triggerZoom();\n    }\n  }\n\n  @Output() dialogClose = new EventEmitter<void>();\n\n  constructor(\n    protected launchDialogService: LaunchDialogService,\n    protected vcr: ViewContainerRef\n  ) {}\n\n  triggerZoom(): void {\n    const component = this.launchDialogService.launch(\n      LAUNCH_CALLER.PRODUCT_IMAGE_ZOOM,\n      this.vcr\n    );\n    if (component) {\n      this.subscriptions.add(\n        combineLatest([component, this.launchDialogService.dialogClose])\n          .pipe(\n            tap(([comp]) => {\n              if (this.galleryIndex) {\n                (\n                  comp as ComponentRef<ProductImageZoomDialogComponent>\n                ).instance.galleryIndex = this.galleryIndex;\n              }\n            }),\n            filter(([, close]) => Boolean(close)),\n            tap(([comp]) => {\n              this.launchDialogService.clear(LAUNCH_CALLER.PRODUCT_IMAGE_ZOOM);\n              comp?.destroy();\n              this.dialogClose.emit();\n              this.expandButton.nativeElement.focus();\n            })\n          )\n          .subscribe()\n      );\n    }\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n}\n","<button\n  #expandButton\n  class=\"btn btn-link cx-action-link\"\n  (click)=\"triggerZoom()\"\n>\n  <span>\n    {{ 'productImageZoomTrigger.expand' | cxTranslate }}\n    <cx-icon [type]=\"iconType.EXPAND_ARROWS\"></cx-icon\n  ></span>\n</button>\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport {\n  CurrentProductService,\n  ProductImagesComponent,\n} from '@spartacus/storefront';\nimport { Product } from '@spartacus/core';\n\n@Component({\n  selector: 'cx-product-images',\n  templateUrl: './product-image-zoom-product-images.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductImageZoomProductImagesComponent extends ProductImagesComponent {\n  expandImage = new BehaviorSubject(false);\n  selectedIndex: number | undefined;\n\n  product$: Observable<Product> = this.product$;\n\n  constructor(protected currentProductService: CurrentProductService) {\n    super(currentProductService);\n  }\n\n  openImage(item: any): void {\n    this.mainMediaContainer.next(item);\n    this.selectedIndex = this.mainMediaContainer.value?.zoom?.galleryIndex;\n  }\n\n  /**\n   * Opens image zoom dialog.\n   */\n  triggerZoom(value: boolean): void {\n    this.expandImage.next(value);\n  }\n}\n","<ng-container *ngIf=\"mainImage$ | async as main\">\n  <cx-media [container]=\"main\" (click)=\"triggerZoom(true)\"></cx-media>\n  <cx-product-image-zoom-trigger\n    [expandImage]=\"expandImage.value\"\n    [galleryIndex]=\"selectedIndex\"\n    (dialogClose)=\"triggerZoom(false)\"\n  ></cx-product-image-zoom-trigger>\n</ng-container>\n\n<ng-container *ngIf=\"thumbs$ | async as thumbs\">\n  <ng-container *ngIf=\"product$ | async as product\">\n    <cx-carousel\n      role=\"region\"\n      [attr.aria-label]=\"\n        'carousel.carouselForProduct' | cxTranslate: { product: product.name }\n      \"\n      tabindex=\"-1\"\n      *ngIf=\"thumbs.length\"\n      class=\"thumbs\"\n      [items]=\"thumbs\"\n      itemWidth=\"120px\"\n      [hideIndicators]=\"false\"\n      [template]=\"thumb\"\n    ></cx-carousel>\n  </ng-container>\n</ng-container>\n\n<ng-template #thumb let-item=\"item\">\n  <cx-media\n    [container]=\"item.container\"\n    tabindex=\"0\"\n    (focus)=\"openImage(item.container)\"\n    [class.is-active]=\"isActive(item.container) | async\"\n    format=\"product\"\n  >\n  </cx-media>\n</ng-template>\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { I18nModule, provideDefaultConfig, CmsConfig } from '@spartacus/core';\nimport {\n  CarouselModule,\n  IconModule,\n  KeyboardFocusModule,\n  MediaModule,\n  OutletModule,\n} from '@spartacus/storefront';\nimport { defaultProductImageZoomLayoutConfig } from './default-product-image-zoom-layout.config';\nimport { ProductImageZoomDialogComponent } from './product-image-zoom-dialog/product-image-zoom-dialog.component';\nimport { ProductImageZoomProductImagesComponent } from './product-image-zoom-product-images/product-image-zoom-product-images.component';\nimport { ProductImageZoomThumbnailsComponent } from './product-image-zoom-thumbnails/product-image-zoom-thumbnails.component';\nimport { ProductImageZoomTriggerComponent } from './product-image-zoom-trigger/product-image-zoom-trigger.component';\nimport { ProductImageZoomViewComponent } from './product-image-zoom-view/product-image-zoom-view.component';\n\n@NgModule({\n  imports: [\n    CarouselModule,\n    CommonModule,\n    I18nModule,\n    IconModule,\n    KeyboardFocusModule,\n    MediaModule,\n    OutletModule,\n    RouterModule,\n  ],\n  providers: [\n    provideDefaultConfig(defaultProductImageZoomLayoutConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductImagesComponent: {\n          component: ProductImageZoomProductImagesComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [\n    ProductImageZoomDialogComponent,\n    ProductImageZoomProductImagesComponent,\n    ProductImageZoomThumbnailsComponent,\n    ProductImageZoomTriggerComponent,\n    ProductImageZoomViewComponent,\n  ],\n  exports: [\n    ProductImageZoomDialogComponent,\n    ProductImageZoomProductImagesComponent,\n    ProductImageZoomThumbnailsComponent,\n    ProductImageZoomTriggerComponent,\n    ProductImageZoomViewComponent,\n  ],\n})\nexport class ProductImageZoomModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { NgModule } from '@angular/core';\nimport { ProductImageZoomModule } from './product-image-zoom/product-image-zoom.module';\n\n@NgModule({\n  imports: [ProductImageZoomModule],\n})\nexport class ProductImageZoomComponentsModule {}\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './product-image-zoom.module';\nexport * from './product-image-zoom-view/product-image-zoom-view.component';\nexport * from './product-image-zoom-trigger/product-image-zoom-trigger.component';\nexport * from './product-image-zoom-thumbnails/product-image-zoom-thumbnails.component';\nexport * from './product-image-zoom-product-images/product-image-zoom-product-images.component';\nexport * from './default-product-image-zoom-layout.config';\nexport * from './product-image-zoom-dialog/product-image-zoom-dialog.component';\n","/*\n * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from './product-image-zoom-components.module';\nexport * from './product-image-zoom/index';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i3.ProductImageZoomThumbnailsComponent","i2.ProductImageZoomViewComponent","i2","i3.ProductImageZoomTriggerComponent","i4"],"mappings":"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"}