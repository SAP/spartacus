"use strict";(self.webpackChunkstorefrontapp=self.webpackChunkstorefrontapp||[]).push([[6190],{6190:(we,ue,i)=>{i.d(ue,{As:()=>a,CM:()=>ce,Cb:()=>Ie,Cq:()=>he,GP:()=>Fe,HD:()=>Ge,PL:()=>Oe,QI:()=>Be,T2:()=>U,bi:()=>re,bz:()=>le,d6:()=>De,dx:()=>Ue,gE:()=>Pe,gS:()=>F,hj:()=>xe,jn:()=>ke,n7:()=>oe});var P=i(6895),r=i(4650),c=i(5955),_=i(8353),m=i(4850),ie=i(2986),ae=i(1406),O=i(7545),D=i(7221),Se=i(2198),me=i(9309),u=i(5359),C=i(5024),p=i(1086),Ce=i(2654),de=i(6053);class F{}let d=(()=>{class e{constructor(t){this.asmAdapter=t}customerSearch(t){return this.asmAdapter.customerSearch(t)}customerLists(){return this.asmAdapter.customerLists()}bindCart(t){return this.asmAdapter.bindCart(t)}createCustomer(t){return this.asmAdapter.createCustomer(t)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(F))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const he=new r.OlP("CustomerSearchPageNormalizer"),le=new r.OlP("CustomerListsNormalizer");let I=(()=>{class e{constructor(t,o,n){this.commandService=t,this.asmConnector=o,this.userAccountFacade=n,this.bindCartCommand$=this.commandService.create(S=>this.userAccountFacade.get().pipe((0,m.U)(E=>{if(E?.uid)return E.uid;throw new Error("No identifier for authenticated user found.")}),(0,ie.q)(1),(0,ae.b)(E=>this.asmConnector.bindCart({cartId:S,customerId:E}))))}bindCart(t){return this.bindCartCommand$.execute(t)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c.VDr),r.LFG(d),r.LFG(me.gf))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),G=(()=>{class e{constructor(t,o){this.asmConnector=t,this.command=o,this.createCustomerCommand=this.command.create(({user:n})=>this.asmConnector.createCustomer(n))}createCustomer(t){return this.createCustomerCommand.execute({user:t})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(d),r.LFG(c.VDr))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const R="[Asm] UI Update";class L{constructor(s){this.payload=s,this.type=R}}const h="[asm] Customer search data",l="[asm] Customer list customers search data",g="[Asm] Customer Search",M="[Asm] Customer List Customers Search";class j extends c.kPG.LoaderLoadAction{constructor(s){super(h),this.payload=s,this.type=g}}class K extends c.kPG.LoaderFailAction{constructor(s){super(h),this.payload=s,this.type="[Asm] Customer Search Fail"}}class N extends c.kPG.LoaderSuccessAction{constructor(s){super(h),this.payload=s,this.type="[Asm] Customer Search Success"}}class z extends c.kPG.LoaderResetAction{constructor(){super(h),this.type="[Asm] Customer Search Reset"}}class Y extends c.kPG.LoaderLoadAction{constructor(s){super(l),this.payload=s,this.type=M}}class $ extends c.kPG.LoaderFailAction{constructor(s){super(l),this.payload=s,this.type="[Asm] Customer List Customers Search Fail"}}class J extends c.kPG.LoaderSuccessAction{constructor(s){super(l),this.payload=s,this.type="[Asm] Customer List Customers Search Success"}}class Q extends c.kPG.LoaderResetAction{constructor(){super(l),this.type="[Asm] Customer List Customers Search Reset"}}const Ae=[(()=>{class e{constructor(t,o){this.actions$=t,this.asmConnector=o,this.logger=(0,r.f3M)(c.mQy),this.customerSearch$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(g),(0,m.U)(n=>n.payload),(0,O.w)(n=>this.asmConnector.customerSearch(n).pipe((0,m.U)(S=>new N(S)),(0,D.K)(S=>(0,p.of)(new K((0,c.cxH)(S,this.logger)))))))),this.customerListCustomersSearch$=(0,C.GW)(()=>this.actions$.pipe((0,C.l4)(M),(0,m.U)(n=>n.payload),(0,O.w)(n=>this.asmConnector.customerSearch(n).pipe((0,m.U)(S=>new J(S)),(0,D.K)(S=>(0,p.of)(new $((0,c.cxH)(S,this.logger))))))))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(C.eX),r.LFG(d))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})()],fe={collapsed:!1};function Ee(e=fe,s){return s.type===R?{...e,...s.payload}:e}const V=new r.OlP("AsmReducers"),Re={provide:V,useFactory:function pe(){return{customerSearchResult:c.kPG.loaderReducer(h),customerListCustomersSearchResult:c.kPG.loaderReducer(l),asmUi:Ee}}},ge=[function Le(e){return function(s,t){return"[Auth] Logout Customer Support Agent"===t.type&&(s={...s,customerSearchResult:{}}),e(s,t)}}],A=(0,u.ZF)("asm"),y=(0,u.P1)(A,e=>e.asmUi),T=(0,u.P1)(A,e=>e.customerSearchResult),Z=(0,u.P1)(T,e=>c.kPG.loaderValueSelector(e)),X=(0,u.P1)(T,e=>c.kPG.loaderLoadingSelector(e)),f=(0,u.P1)(A,e=>e.customerListCustomersSearchResult),q=(0,u.P1)(f,e=>c.kPG.loaderValueSelector(e)),ee=(0,u.P1)(f,e=>c.kPG.loaderLoadingSelector(e)),te=(0,u.P1)(f,e=>c.kPG.loaderErrorSelector(e));let se=(()=>{class e{constructor(t,o,n){this.queryService=t,this.asmConnector=o,this.store=n,this.customerListQuery$=this.queryService.create(()=>this.asmConnector.customerLists(),{reloadOn:void 0,resetOn:void 0})}getCustomerLists(){return this.customerListQuery$.get()}getCustomerListsState(){return this.customerListQuery$.getState()}customerListCustomersSearch(t){this.store.dispatch(new Y(t))}getCustomerListCustomersSearchResults(){return this.store.pipe((0,u.Ys)(q))}getCustomerListCustomersSearchResultsLoading(){return this.store.pipe((0,u.Ys)(ee))}customerListCustomersSearchReset(){this.store.dispatch(new Q)}getCustomerListCustomersSearchResultsError(){return this.store.pipe((0,u.Ys)(te))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c._7J),r.LFG(d),r.LFG(u.yh))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const Me=[se,{provide:_.AH,useExisting:se},I,{provide:_.AE,useExisting:I},G,{provide:_.Jf,useExisting:G}];let ve=(()=>{class e{constructor(t,o,n){this.statePersistenceService=t,this.store=o,this.authStorageService=n,this.subscription=new Ce.w,this.key="asm"}initSync(){this.subscription.add(this.statePersistenceService.syncWithStorage({key:this.key,state$:this.getAsmState(),onRead:t=>this.onRead(t)}))}getAsmState(){return(0,de.aj)([this.store.pipe((0,Se.h)(t=>!!t.asm),(0,u.Ys)(y)),(0,p.of)(this.authStorageService.getEmulatedUserToken()),this.authStorageService.getTokenTarget()]).pipe((0,m.U)(([t,o,n])=>{let S=o;return S&&(S={...o},delete S.refresh_token),{ui:t,emulatedUserToken:S,tokenTarget:n}}))}onRead(t){t&&(t.ui&&this.store.dispatch(new L(t.ui)),t.emulatedUserToken&&this.authStorageService.setEmulatedUserToken(t.emulatedUserToken),t.tokenTarget&&this.authStorageService.setTokenTarget(t.tokenTarget))}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c.WBb),r.LFG(u.yh),r.LFG(_.JW))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ye=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[Re],imports:[P.ez,c.vUS,u.Aw.forFeature("asm",V,{metaReducers:ge}),C.sQ.forFeature(Ae)]}),e})();function Te(e){return()=>e.initSync()}let Ue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[d,{provide:c.z4I,useFactory:Te,deps:[ve],multi:!0},...Me],imports:[P.ez,ye]}),e})(),Pe=(()=>{class e{constructor(t){this.store=t}customerSearch(t){this.store.dispatch(new j(t))}customerSearchReset(){this.store.dispatch(new z)}getCustomerSearchResults(){return this.store.pipe((0,u.Ys)(Z))}getCustomerSearchResultsLoading(){return this.store.pipe((0,u.Ys)(X))}updateAsmUiState(t){this.store.dispatch(new L(t))}getAsmUiState(){return this.store.pipe((0,u.Ys)(y))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(u.yh))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Oe=(()=>{class e{transform(t,...o){return t(...o)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Yjl({name:"cxArgs",type:e,pure:!0}),e})(),De=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();var a=(()=>{return(e=a||(a={}))[e.ASC=1]="ASC",e[e.DESC=-1]="DESC",a;var e})();function re(e=a.ASC){return(s,t)=>s===t?0:(!0===s?-1:1)*e}function oe(e=a.ASC){return(s,t)=>s===t?0:(s<t?-1:1)*e}function U(e=a.ASC){return(s,t)=>{const o=null==s;return o===(null==t)?0:(o?-1:1)*e}}function ne(e=a.ASC){return(s,t)=>s===t?0:(s-t<0?-1:1)*e}function ce(e=a.ASC,s,t){return(o,n)=>(o??"").localeCompare(n??"",s,t)*e}function Fe(...e){return(s,t)=>{for(const o of e){const n=o(s,t);if(0!==n)return n}return 0}}function Ie(e,s,t){if("function"==typeof s)return(o,n)=>s(o[e],n[e]);if(t)return(o,n)=>t(o[e][s],n[e][s]);throw new Error("No comparator provided")}re(a.ASC),oe(a.ASC),U(a.ASC),U(a.DESC),ne(a.ASC),ne(a.DESC),ce(a.ASC);const Ge=e=>"string"==typeof e,xe=e=>"number"==typeof e,ke=e=>"boolean"==typeof e;function Be(e,s){return(t,o)=>e(t)&&e(o)?s(t,o):0}}}]);