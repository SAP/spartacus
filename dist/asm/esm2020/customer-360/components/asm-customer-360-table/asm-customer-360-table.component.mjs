/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output, ViewChild, } from '@angular/core';
import { byBoolean, byComparison, byNullish, byString, isBoolean, isNumber, isString, itemsWith, property, SortOrder, whenType, } from '@spartacus/asm/core';
import { DirectionMode } from '@spartacus/storefront';
import { BehaviorSubject } from 'rxjs';
import { CustomerTableTextAlign, } from './asm-customer-360-table.model';
import { KeyBoardEventCode } from '@spartacus/asm/customer-360/root';
import * as i0 from "@angular/core";
import * as i1 from "../config/asm-customer-360-config";
import * as i2 from "@spartacus/storefront";
import * as i3 from "@angular/common";
import * as i4 from "@spartacus/core";
import * as i5 from "@spartacus/asm/core";
export class AsmCustomer360TableComponent {
    constructor(asmCustomer360Config, directionService) {
        this.asmCustomer360Config = asmCustomer360Config;
        this.directionService = directionService;
        this.selectItem = new EventEmitter();
        this.SortOrder = SortOrder;
        this.CustomerTableTextAlign = CustomerTableTextAlign;
        this.currentPageNumber = 0;
        this.currentPage$ = new BehaviorSubject(undefined);
        this.listSortOrder = SortOrder.DESC;
        this.focusedTableColumnIndex = 0;
        this.focusedTableRowIndex = 0;
        this.setFocusOnStartTableItem = false;
    }
    ngOnChanges(changes) {
        if (changes?.entries) {
            const entries = this.sortEntries(this.entries, this.sortProperty, this.listSortOrder);
            this.entryPages = this.updateEntryPages(entries);
            this.setPageNumber(this.currentPageNumber);
        }
    }
    ngAfterViewChecked() {
        if (this.setFocusOnStartTableItem) {
            this.setSelectedTabIndex(0, 1);
            this.setFocusOnStartTableItem = false;
        }
    }
    sortEntriesAndUpdatePages(sortProperty) {
        const currentProperty = this.sortProperty;
        let newSortOrder;
        if (sortProperty !== currentProperty) {
            newSortOrder = SortOrder.ASC;
        }
        else {
            newSortOrder =
                this.listSortOrder === SortOrder.ASC ? SortOrder.DESC : SortOrder.ASC;
        }
        this.sortProperty = sortProperty;
        this.listSortOrder = newSortOrder;
        this.entries = this.sortEntries(this.entries, this.sortProperty, this.listSortOrder);
        this.entryPages = this.updateEntryPages(this.entries);
        this.setPageNumber(this.currentPageNumber);
    }
    setPageNumber(pageNumber, selectFirstRecord = false) {
        this.currentPageNumber = pageNumber;
        this.currentPage$.next(this.entryPages[this.currentPageNumber]);
        if (selectFirstRecord) {
            this.setFocusOnStartTableItem = true;
        }
    }
    /**
     * returns sort direction
     * @param columnProperty column property
     * @param sortProperty current sort property
     * @param listSortOrder current sort order
     */
    sortDirection(columnProperty, sortProperty, listSortOrder) {
        if (columnProperty === sortProperty) {
            return listSortOrder === SortOrder.ASC ? 'ascending' : 'descending';
        }
        else {
            return 'none';
        }
    }
    /**
     * returns tabIndex value
     * @param focusedTableColumnIndex saved column index
     * @param focusedTableRowIndex saved row index
     * @param columnIndex selected column index
     */
    tabIndexValue(focusedTableColumnIndex, focusedTableRowIndex, columnIndex) {
        return focusedTableColumnIndex === columnIndex && focusedTableRowIndex === 0
            ? 0
            : -1;
    }
    /**
     * Update cell's focus When keyboard key is pressed:
     * handles arrowUp, arrowDown, arrowRight, arrowLeft, Home, End, Home+Ctrl, End+Ctrl
     * PageDown, PageUp
     * @param event KeyboardEvent
     * @param columnIndex selected column index of table
     * @param rowIndex selected row index of table
     */
    onKeyDownCell(event, columnIndex, rowIndex) {
        let knownKeyPressed = true;
        switch (event.code) {
            case KeyBoardEventCode.ARROW_LEFT:
            case KeyBoardEventCode.ARROW_RIGHT:
                this.moveFocusLeftRight(event, columnIndex, rowIndex);
                break;
            case KeyBoardEventCode.ARROW_DOWN:
                this.moveFocusDown(columnIndex, rowIndex);
                break;
            case KeyBoardEventCode.ARROW_UP:
                this.moveFocusUp(columnIndex, rowIndex);
                break;
            case KeyBoardEventCode.HOME:
                this.moveFocusHome(event, rowIndex);
                break;
            case KeyBoardEventCode.END:
                this.moveFocusEnd(event, rowIndex);
                break;
            case KeyBoardEventCode.PAGE_DOWN:
                this.handlePageDown();
                break;
            case KeyBoardEventCode.PAGE_UP:
                this.handlePageUp();
                break;
            default:
                knownKeyPressed = false;
        }
        if (knownKeyPressed) {
            event.stopPropagation();
            event.preventDefault();
        }
    }
    /**
     * Update selected cell's tabIndex (change tabIndex to 0).
     * if cell contains link(button) then update link
     * @param columnIndex selected column index of table
     * @param rowIndex selected row index of table
     */
    setSelectedTabIndex(columnIndex, rowIndex) {
        const maxColumn = this.columns.length - 1;
        const maxRow = this.table.nativeElement.rows.length - 1;
        if (columnIndex > maxColumn || rowIndex > maxRow) {
            return;
        }
        this.removeCellTabIndex(this.focusedTableColumnIndex, this.focusedTableRowIndex);
        this.focusedTableColumnIndex = columnIndex;
        this.focusedTableRowIndex = rowIndex;
        const tableCell = this.table.nativeElement.rows[rowIndex].cells[columnIndex];
        const childElement = tableCell.firstChild;
        const elementToFocus = childElement.tagName === 'BUTTON' ? childElement : tableCell;
        elementToFocus.tabIndex = 0;
        elementToFocus.focus();
    }
    handlePageUp() {
        if (this.entryPages.length > 1 && this.currentPageNumber > 0) {
            const pageNumber = Math.max(0, this.currentPageNumber - 1);
            this.setPageNumber(pageNumber, true);
        }
    }
    handlePageDown() {
        const maxPage = this.entryPages.length - 1;
        if (this.entryPages.length > 1 && this.currentPageNumber < maxPage) {
            const pageNumber = Math.min(maxPage, this.currentPageNumber + 1);
            this.setPageNumber(pageNumber, true);
        }
    }
    moveFocusEnd(event, rowIndex) {
        const maxRow = this.table.nativeElement.rows.length - 1;
        rowIndex = event.ctrlKey ? maxRow : rowIndex;
        this.setSelectedTabIndex(this.columns.length - 1, rowIndex);
    }
    moveFocusHome(event, rowIndex) {
        rowIndex = event.ctrlKey ? 0 : rowIndex;
        this.setSelectedTabIndex(0, rowIndex);
    }
    moveFocusUp(columnIndex, rowIndex) {
        rowIndex = Math.max(0, rowIndex - 1);
        this.setSelectedTabIndex(columnIndex, rowIndex);
    }
    moveFocusDown(columnIndex, rowIndex) {
        const maxRow = this.table.nativeElement.rows.length - 1;
        rowIndex = Math.min(maxRow, rowIndex + 1);
        this.setSelectedTabIndex(columnIndex, rowIndex);
    }
    moveFocusLeftRight(event, columnIndex, rowIndex) {
        const maxColumn = this.columns.length - 1;
        if (this.isBackNavigation(event)) {
            columnIndex = Math.max(0, columnIndex - 1);
        }
        else {
            columnIndex = Math.min(maxColumn, columnIndex + 1);
        }
        this.setSelectedTabIndex(columnIndex, rowIndex);
    }
    /**
     * Removes tabindex and CSS focus class from a cell in the table.
     * @param columnIndex The index of the column containing the cell.
     * @param rowIndex The index of the row containing the cell.
     */
    removeCellTabIndex(columnIndex, rowIndex) {
        const tableCell = this.table.nativeElement.rows?.[rowIndex]?.cells?.[columnIndex];
        const childElement = tableCell?.firstChild;
        if (childElement) {
            if (childElement.tagName === 'BUTTON') {
                childElement.tabIndex = -1;
            }
            else {
                if (tableCell) {
                    tableCell.tabIndex = -1;
                }
            }
        }
    }
    /**
     * Verifies whether the user navigates from a subgroup back to the main group menu.
     * @param {KeyboardEvent} event - Keyboard event
     * @returns {boolean} -'true' if the user navigates back into the main group menu, otherwise 'false'.
     * @protected
     */
    isBackNavigation(event) {
        return ((event.code === KeyBoardEventCode.ARROW_LEFT && this.isLTRDirection()) ||
            (event.code === KeyBoardEventCode.ARROW_RIGHT && this.isRTLDirection()));
    }
    isLTRDirection() {
        return this.directionService.getDirection() === DirectionMode.LTR;
    }
    isRTLDirection() {
        return this.directionService.getDirection() === DirectionMode.RTL;
    }
    updateEntryPages(entries) {
        const newEntryPages = [];
        for (let i = 0; i < entries.length; i += this.pageSize) {
            newEntryPages.push(entries.slice(i, i + this.pageSize));
        }
        return newEntryPages;
    }
    sortEntries(entries, sortByProperty, sortOrder) {
        if (entries?.length) {
            return entries.sort(itemsWith(property(sortByProperty, itemsWith(byNullish(SortOrder.DESC), whenType(isString, byString(sortOrder)), whenType(isNumber, byComparison(sortOrder)), whenType(isBoolean, byBoolean(sortOrder))))));
        }
        else {
            return [];
        }
    }
}
AsmCustomer360TableComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: AsmCustomer360TableComponent, deps: [{ token: i1.AsmCustomer360Config }, { token: i2.DirectionService }], target: i0.ɵɵFactoryTarget.Component });
AsmCustomer360TableComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: AsmCustomer360TableComponent, selector: "cx-asm-customer-360-table", inputs: { columns: "columns", emptyStateText: "emptyStateText", entries: "entries", headerText: "headerText", pageSize: "pageSize", sortProperty: "sortProperty" }, outputs: { selectItem: "selectItem" }, viewQueries: [{ propertyName: "table", first: true, predicate: ["table"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div class=\"cx-asm-customer-360-table-heading\" *ngIf=\"headerText\">\n  <h4 class=\"cx-asm-customer-360-table-heading-text\">\n    {{ headerText }}\n  </h4>\n  <div\n    [attr.aria-label]=\"'asmCustomer360.pagination' | cxTranslate\"\n    class=\"cx-asm-customer-360-table-heading-pages\"\n    *ngIf=\"entryPages\"\n  >\n    <ng-container *ngFor=\"let page of entryPages; let pageNumber = index\">\n      <button\n        *ngIf=\"entryPages.length > 1\"\n        (click)=\"setPageNumber(pageNumber, true)\"\n        class=\"cx-asm-customer-360-table-heading-page link\"\n        [class.active]=\"currentPageNumber === pageNumber\"\n        [attr.aria-current]=\"currentPageNumber === pageNumber ? 'page' : null\"\n        [disabled]=\"currentPageNumber === pageNumber\"\n        [attr.aria-label]=\"\n          'asmCustomer360.page' | cxTranslate: { number: pageNumber + 1 }\n        \"\n      >\n        {{ pageNumber + 1 }}\n      </button>\n    </ng-container>\n  </div>\n</div>\n<hr class=\"cx-asm-customer-360-table-separator\" aria-hidden=\"true\" />\n<ng-container *ngIf=\"entryPages?.length && columns?.length\">\n  <table\n    #table\n    class=\"cx-asm-customer-360-table\"\n    role=\"grid\"\n    [attr.aria-rowcount]=\"entries.length\"\n    [attr.aria-colcount]=\"columns.length\"\n    [attr.data-per-page]=\"pageSize\"\n  >\n    <caption class=\"cx-visually-hidden\">\n      {{\n        headerText\n      }}\n    </caption>\n    <thead>\n      <tr class=\"cx-asm-customer-360-table-row-header\" role=\"row\">\n        <th\n          class=\"cx-asm-customer-360-table-header\"\n          role=\"columnheader\"\n          *ngFor=\"let column of columns; let columnIndex = index\"\n          [class.active]=\"sortProperty === column.property\"\n          [class.asc]=\"listSortOrder === SortOrder.ASC\"\n          [class.desc]=\"listSortOrder !== SortOrder.ASC\"\n          [attr.aria-sort]=\"\n            sortDirection | cxArgs: column.property:sortProperty:listSortOrder\n          \"\n          [ngClass]=\"{\n            'text-start':\n              column.headerTextAlign === CustomerTableTextAlign.START,\n            'text-center':\n              column.headerTextAlign === CustomerTableTextAlign.CENTER,\n            'text-end': column.headerTextAlign === CustomerTableTextAlign.END\n          }\"\n          (click)=\"setSelectedTabIndex(columnIndex, 0)\"\n        >\n          <button\n            [tabindex]=\"\n              tabIndexValue\n                | cxArgs\n                  : focusedTableColumnIndex\n                  : focusedTableRowIndex\n                  : columnIndex\n            \"\n            class=\"link\"\n            (click)=\"sortEntriesAndUpdatePages(column.property)\"\n            (keydown)=\"onKeyDownCell($event, columnIndex, 0)\"\n          >\n            <span *ngIf=\"column?.i18nTextKey\">{{\n              column.i18nTextKey | cxTranslate\n            }}</span>\n            <span *ngIf=\"!column?.i18nTextKey\">{{ column.text }}</span>\n          </button>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr\n        class=\"cx-asm-customer-360-table-row\"\n        role=\"row\"\n        *ngFor=\"let entry of currentPage$ | async; let rowIndex = index\"\n      >\n        <td\n          role=\"cell\"\n          tabindex=\"-1\"\n          *ngFor=\"let column of columns; let columnIndex = index\"\n          (keydown)=\"onKeyDownCell($event, columnIndex, rowIndex + 1)\"\n          (click)=\"setSelectedTabIndex(columnIndex, rowIndex + 1)\"\n          [ngClass]=\"{\n            'text-start': column.textAlign === CustomerTableTextAlign.START,\n            'text-center': column.textAlign === CustomerTableTextAlign.CENTER,\n            'text-end': column.textAlign === CustomerTableTextAlign.END\n          }\"\n        >\n          <ng-container\n            *ngIf=\"column.navigatable; then linkTemplate; else starRating\"\n          ></ng-container>\n\n          <ng-template #linkTemplate>\n            <button\n              tabindex=\"-1\"\n              [attr.aria-label]=\"entry[column.property]\"\n              (click)=\"selectItem.emit(entry)\"\n              class=\"cx-asm-customer-360-table-link link\"\n              [title]=\"\n                entry[column.property] ||\n                ('asmCustomer360.emptyCellValue' | cxTranslate)\n              \"\n            >\n              {{\n                entry[column.property] ||\n                  ('asmCustomer360.emptyCellValue' | cxTranslate)\n              }}\n            </button>\n          </ng-template>\n\n          <ng-template #starRating>\n            <cx-star-rating\n              tabindex=\"-1\"\n              *ngIf=\"column.renderAsStarRating; else dateCell\"\n              [rating]=\"entry[column.property]\"\n            ></cx-star-rating>\n          </ng-template>\n\n          <ng-template #dateCell>\n            <ng-container\n              *ngIf=\"column?.isDate && entry[column.property]; else tableCell\"\n              ><span>{{\n                entry[column.property]\n                  | cxDate: asmCustomer360Config?.asmCustomer360?.dateTimeFormat\n              }}</span></ng-container\n            >\n          </ng-template>\n\n          <ng-template #tableCell>\n            <ng-container\n              ><span\n                [title]=\"\n                  entry[column.property] ||\n                  ('asmCustomer360.emptyCellValue' | cxTranslate)\n                \"\n                >{{\n                  entry[column.property] ||\n                    ('asmCustomer360.emptyCellValue' | cxTranslate)\n                }}</span\n              ></ng-container\n            >\n          </ng-template>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</ng-container>\n<div class=\"cx-asm-customer-360-table-empty\" *ngIf=\"!entryPages?.length\">\n  {{ emptyStateText }}\n</div>\n", dependencies: [{ kind: "directive", type: i3.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i3.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i2.StarRatingComponent, selector: "cx-star-rating", inputs: ["disabled", "rating"], outputs: ["change"] }, { kind: "pipe", type: i3.AsyncPipe, name: "async" }, { kind: "pipe", type: i4.TranslatePipe, name: "cxTranslate" }, { kind: "pipe", type: i4.CxDatePipe, name: "cxDate" }, { kind: "pipe", type: i5.ArgsPipe, name: "cxArgs" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: AsmCustomer360TableComponent, decorators: [{
            type: Component,
            args: [{ changeDetection: ChangeDetectionStrategy.OnPush, selector: 'cx-asm-customer-360-table', template: "<div class=\"cx-asm-customer-360-table-heading\" *ngIf=\"headerText\">\n  <h4 class=\"cx-asm-customer-360-table-heading-text\">\n    {{ headerText }}\n  </h4>\n  <div\n    [attr.aria-label]=\"'asmCustomer360.pagination' | cxTranslate\"\n    class=\"cx-asm-customer-360-table-heading-pages\"\n    *ngIf=\"entryPages\"\n  >\n    <ng-container *ngFor=\"let page of entryPages; let pageNumber = index\">\n      <button\n        *ngIf=\"entryPages.length > 1\"\n        (click)=\"setPageNumber(pageNumber, true)\"\n        class=\"cx-asm-customer-360-table-heading-page link\"\n        [class.active]=\"currentPageNumber === pageNumber\"\n        [attr.aria-current]=\"currentPageNumber === pageNumber ? 'page' : null\"\n        [disabled]=\"currentPageNumber === pageNumber\"\n        [attr.aria-label]=\"\n          'asmCustomer360.page' | cxTranslate: { number: pageNumber + 1 }\n        \"\n      >\n        {{ pageNumber + 1 }}\n      </button>\n    </ng-container>\n  </div>\n</div>\n<hr class=\"cx-asm-customer-360-table-separator\" aria-hidden=\"true\" />\n<ng-container *ngIf=\"entryPages?.length && columns?.length\">\n  <table\n    #table\n    class=\"cx-asm-customer-360-table\"\n    role=\"grid\"\n    [attr.aria-rowcount]=\"entries.length\"\n    [attr.aria-colcount]=\"columns.length\"\n    [attr.data-per-page]=\"pageSize\"\n  >\n    <caption class=\"cx-visually-hidden\">\n      {{\n        headerText\n      }}\n    </caption>\n    <thead>\n      <tr class=\"cx-asm-customer-360-table-row-header\" role=\"row\">\n        <th\n          class=\"cx-asm-customer-360-table-header\"\n          role=\"columnheader\"\n          *ngFor=\"let column of columns; let columnIndex = index\"\n          [class.active]=\"sortProperty === column.property\"\n          [class.asc]=\"listSortOrder === SortOrder.ASC\"\n          [class.desc]=\"listSortOrder !== SortOrder.ASC\"\n          [attr.aria-sort]=\"\n            sortDirection | cxArgs: column.property:sortProperty:listSortOrder\n          \"\n          [ngClass]=\"{\n            'text-start':\n              column.headerTextAlign === CustomerTableTextAlign.START,\n            'text-center':\n              column.headerTextAlign === CustomerTableTextAlign.CENTER,\n            'text-end': column.headerTextAlign === CustomerTableTextAlign.END\n          }\"\n          (click)=\"setSelectedTabIndex(columnIndex, 0)\"\n        >\n          <button\n            [tabindex]=\"\n              tabIndexValue\n                | cxArgs\n                  : focusedTableColumnIndex\n                  : focusedTableRowIndex\n                  : columnIndex\n            \"\n            class=\"link\"\n            (click)=\"sortEntriesAndUpdatePages(column.property)\"\n            (keydown)=\"onKeyDownCell($event, columnIndex, 0)\"\n          >\n            <span *ngIf=\"column?.i18nTextKey\">{{\n              column.i18nTextKey | cxTranslate\n            }}</span>\n            <span *ngIf=\"!column?.i18nTextKey\">{{ column.text }}</span>\n          </button>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr\n        class=\"cx-asm-customer-360-table-row\"\n        role=\"row\"\n        *ngFor=\"let entry of currentPage$ | async; let rowIndex = index\"\n      >\n        <td\n          role=\"cell\"\n          tabindex=\"-1\"\n          *ngFor=\"let column of columns; let columnIndex = index\"\n          (keydown)=\"onKeyDownCell($event, columnIndex, rowIndex + 1)\"\n          (click)=\"setSelectedTabIndex(columnIndex, rowIndex + 1)\"\n          [ngClass]=\"{\n            'text-start': column.textAlign === CustomerTableTextAlign.START,\n            'text-center': column.textAlign === CustomerTableTextAlign.CENTER,\n            'text-end': column.textAlign === CustomerTableTextAlign.END\n          }\"\n        >\n          <ng-container\n            *ngIf=\"column.navigatable; then linkTemplate; else starRating\"\n          ></ng-container>\n\n          <ng-template #linkTemplate>\n            <button\n              tabindex=\"-1\"\n              [attr.aria-label]=\"entry[column.property]\"\n              (click)=\"selectItem.emit(entry)\"\n              class=\"cx-asm-customer-360-table-link link\"\n              [title]=\"\n                entry[column.property] ||\n                ('asmCustomer360.emptyCellValue' | cxTranslate)\n              \"\n            >\n              {{\n                entry[column.property] ||\n                  ('asmCustomer360.emptyCellValue' | cxTranslate)\n              }}\n            </button>\n          </ng-template>\n\n          <ng-template #starRating>\n            <cx-star-rating\n              tabindex=\"-1\"\n              *ngIf=\"column.renderAsStarRating; else dateCell\"\n              [rating]=\"entry[column.property]\"\n            ></cx-star-rating>\n          </ng-template>\n\n          <ng-template #dateCell>\n            <ng-container\n              *ngIf=\"column?.isDate && entry[column.property]; else tableCell\"\n              ><span>{{\n                entry[column.property]\n                  | cxDate: asmCustomer360Config?.asmCustomer360?.dateTimeFormat\n              }}</span></ng-container\n            >\n          </ng-template>\n\n          <ng-template #tableCell>\n            <ng-container\n              ><span\n                [title]=\"\n                  entry[column.property] ||\n                  ('asmCustomer360.emptyCellValue' | cxTranslate)\n                \"\n                >{{\n                  entry[column.property] ||\n                    ('asmCustomer360.emptyCellValue' | cxTranslate)\n                }}</span\n              ></ng-container\n            >\n          </ng-template>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</ng-container>\n<div class=\"cx-asm-customer-360-table-empty\" *ngIf=\"!entryPages?.length\">\n  {{ emptyStateText }}\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.AsmCustomer360Config }, { type: i2.DirectionService }]; }, propDecorators: { table: [{
                type: ViewChild,
                args: ['table']
            }], columns: [{
                type: Input
            }], emptyStateText: [{
                type: Input
            }], entries: [{
                type: Input
            }], headerText: [{
                type: Input
            }], pageSize: [{
                type: Input
            }], sortProperty: [{
                type: Input
            }], selectItem: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNtLWN1c3RvbWVyLTM2MC10YWJsZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvYXNtL2N1c3RvbWVyLTM2MC9jb21wb25lbnRzL2FzbS1jdXN0b21lci0zNjAtdGFibGUvYXNtLWN1c3RvbWVyLTM2MC10YWJsZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9mZWF0dXJlLWxpYnMvYXNtL2N1c3RvbWVyLTM2MC9jb21wb25lbnRzL2FzbS1jdXN0b21lci0zNjAtdGFibGUvYXNtLWN1c3RvbWVyLTM2MC10YWJsZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztHQUlHO0FBRUgsT0FBTyxFQUVMLHVCQUF1QixFQUN2QixTQUFTLEVBRVQsWUFBWSxFQUNaLEtBQUssRUFFTCxNQUFNLEVBRU4sU0FBUyxHQUNWLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUNaLFNBQVMsRUFDVCxRQUFRLEVBQ1IsU0FBUyxFQUNULFFBQVEsRUFDUixRQUFRLEVBQ1IsU0FBUyxFQUNULFFBQVEsRUFDUixTQUFTLEVBQ1QsUUFBUSxHQUNULE1BQU0scUJBQXFCLENBQUM7QUFDN0IsT0FBTyxFQUFFLGFBQWEsRUFBb0IsTUFBTSx1QkFBdUIsQ0FBQztBQUN4RSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3ZDLE9BQU8sRUFFTCxzQkFBc0IsR0FFdkIsTUFBTSxnQ0FBZ0MsQ0FBQztBQUV4QyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQzs7Ozs7OztBQU9yRSxNQUFNLE9BQU8sNEJBQTRCO0lBcUN2QyxZQUNZLG9CQUEwQyxFQUMxQyxnQkFBa0M7UUFEbEMseUJBQW9CLEdBQXBCLG9CQUFvQixDQUFzQjtRQUMxQyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtC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QkFBbkIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBTUERYLUZpbGVDb3B5cmlnaHRUZXh0OiAyMDIzIFNBUCBTcGFydGFjdXMgdGVhbSA8c3BhcnRhY3VzLXRlYW1Ac2FwLmNvbT5cbiAqXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbmltcG9ydCB7XG4gIEFmdGVyVmlld0NoZWNrZWQsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5wdXQsXG4gIE9uQ2hhbmdlcyxcbiAgT3V0cHV0LFxuICBTaW1wbGVDaGFuZ2VzLFxuICBWaWV3Q2hpbGQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgYnlCb29sZWFuLFxuICBieUNvbXBhcmlzb24sXG4gIGJ5TnVsbGlzaCxcbiAgYnlTdHJpbmcsXG4gIGlzQm9vbGVhbixcbiAgaXNOdW1iZXIsXG4gIGlzU3RyaW5nLFxuICBpdGVtc1dpdGgsXG4gIHByb3BlcnR5LFxuICBTb3J0T3JkZXIsXG4gIHdoZW5UeXBlLFxufSBmcm9tICdAc3BhcnRhY3VzL2FzbS9jb3JlJztcbmltcG9ydCB7IERpcmVjdGlvbk1vZGUsIERpcmVjdGlvblNlcnZpY2UgfSBmcm9tICdAc3BhcnRhY3VzL3N0b3JlZnJvbnQnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQge1xuICBDdXN0b21lclRhYmxlQ29sdW1uLFxuICBDdXN0b21lclRhYmxlVGV4dEFsaWduLFxuICBUYWJsZUVudHJ5LFxufSBmcm9tICcuL2FzbS1jdXN0b21lci0zNjAtdGFibGUubW9kZWwnO1xuaW1wb3J0IHsgQXNtQ3VzdG9tZXIzNjBDb25maWcgfSBmcm9tICcuLi9jb25maWcvYXNtLWN1c3RvbWVyLTM2MC1jb25maWcnO1xuaW1wb3J0IHsgS2V5Qm9hcmRFdmVudENvZGUgfSBmcm9tICdAc3BhcnRhY3VzL2FzbS9jdXN0b21lci0zNjAvcm9vdCc7XG5cbkBDb21wb25lbnQoe1xuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgc2VsZWN0b3I6ICdjeC1hc20tY3VzdG9tZXItMzYwLXRhYmxlJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2FzbS1jdXN0b21lci0zNjAtdGFibGUuY29tcG9uZW50Lmh0bWwnLFxufSlcbmV4cG9ydCBjbGFzcyBBc21DdXN0b21lcjM2MFRhYmxlQ29tcG9uZW50XG4gIGltcGxlbWVudHMgT25DaGFuZ2VzLCBBZnRlclZpZXdDaGVja2VkXG57XG4gIEBWaWV3Q2hpbGQoJ3RhYmxlJykgdGFibGU6IEVsZW1lbnRSZWY7XG5cbiAgQElucHV0KCkgY29sdW1uczogQXJyYXk8Q3VzdG9tZXJUYWJsZUNvbHVtbj47XG5cbiAgQElucHV0KCkgZW1wdHlTdGF0ZVRleHQ6IHN0cmluZztcblxuICBASW5wdXQoKSBlbnRyaWVzOiBBcnJheTxUYWJsZUVudHJ5PjtcblxuICBASW5wdXQoKSBoZWFkZXJUZXh0OiBzdHJpbmc7XG5cbiAgQElucHV0KCkgcGFnZVNpemU6IG51bWJlcjtcblxuICBASW5wdXQoKSBzb3J0UHJvcGVydHk6IGtleW9mIFRhYmxlRW50cnk7XG5cbiAgQE91dHB1dCgpIHNlbGVjdEl0ZW0gPSBuZXcgRXZlbnRFbWl0dGVyPFRhYmxlRW50cnk+KCk7XG5cbiAgU29ydE9yZGVyID0gU29ydE9yZGVyO1xuXG4gIEN1c3RvbWVyVGFibGVUZXh0QWxpZ24gPSBDdXN0b21lclRhYmxlVGV4dEFsaWduO1xuXG4gIGN1cnJlbnRQYWdlTnVtYmVyID0gMDtcblxuICBjdXJyZW50UGFnZSQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PEFycmF5PFRhYmxlRW50cnk+IHwgdW5kZWZpbmVkPih1bmRlZmluZWQpO1xuXG4gIGxpc3RTb3J0T3JkZXIgPSBTb3J0T3JkZXIuREVTQztcblxuICBlbnRyeVBhZ2VzOiBBcnJheTxBcnJheTxUYWJsZUVudHJ5Pj47XG5cbiAgZm9jdXNlZFRhYmxlQ29sdW1uSW5kZXggPSAwO1xuXG4gIGZvY3VzZWRUYWJsZVJvd0luZGV4ID0gMDtcblxuICBzZXRGb2N1c09uU3RhcnRUYWJsZUl0ZW0gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgYXNtQ3VzdG9tZXIzNjBDb25maWc6IEFzbUN1c3RvbWVyMzYwQ29uZmlnLFxuICAgIHByb3RlY3RlZCBkaXJlY3Rpb25TZXJ2aWNlOiBEaXJlY3Rpb25TZXJ2aWNlXG4gICkge31cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzPzogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGlmIChjaGFuZ2VzPy5lbnRyaWVzKSB7XG4gICAgICBjb25zdCBlbnRyaWVzID0gdGhpcy5zb3J0RW50cmllcyhcbiAgICAgICAgdGhpcy5lbnRyaWVzLFxuICAgICAgICB0aGlzLnNvcnRQcm9wZXJ0eSxcbiAgICAgICAgdGhpcy5saXN0U29ydE9yZGVyXG4gICAgICApO1xuICAgICAgdGhpcy5lbnRyeVBhZ2VzID0gdGhpcy51cGRhdGVFbnRyeVBhZ2VzKGVudHJpZXMpO1xuICAgICAgdGhpcy5zZXRQYWdlTnVtYmVyKHRoaXMuY3VycmVudFBhZ2VOdW1iZXIpO1xuICAgIH1cbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zZXRGb2N1c09uU3RhcnRUYWJsZUl0ZW0pIHtcbiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRUYWJJbmRleCgwLCAxKTtcbiAgICAgIHRoaXMuc2V0Rm9jdXNPblN0YXJ0VGFibGVJdGVtID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc29ydEVudHJpZXNBbmRVcGRhdGVQYWdlcyhzb3J0UHJvcGVydHk6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGN1cnJlbnRQcm9wZXJ0eSA9IHRoaXMuc29ydFByb3BlcnR5O1xuXG4gICAgbGV0IG5ld1NvcnRPcmRlcjogU29ydE9yZGVyO1xuICAgIGlmIChzb3J0UHJvcGVydHkgIT09IGN1cnJlbnRQcm9wZXJ0eSkge1xuICAgICAgbmV3U29ydE9yZGVyID0gU29ydE9yZGVyLkFTQztcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3U29ydE9yZGVyID1cbiAgICAgICAgdGhpcy5saXN0U29ydE9yZGVyID09PSBTb3J0T3JkZXIuQVNDID8gU29ydE9yZGVyLkRFU0MgOiBTb3J0T3JkZXIuQVNDO1xuICAgIH1cblxuICAgIHRoaXMuc29ydFByb3BlcnR5ID0gc29ydFByb3BlcnR5O1xuICAgIHRoaXMubGlzdFNvcnRPcmRlciA9IG5ld1NvcnRPcmRlcjtcblxuICAgIHRoaXMuZW50cmllcyA9IHRoaXMuc29ydEVudHJpZXMoXG4gICAgICB0aGlzLmVudHJpZXMsXG4gICAgICB0aGlzLnNvcnRQcm9wZXJ0eSxcbiAgICAgIHRoaXMubGlzdFNvcnRPcmRlclxuICAgICk7XG4gICAgdGhpcy5lbnRyeVBhZ2VzID0gdGhpcy51cGRhdGVFbnRyeVBhZ2VzKHRoaXMuZW50cmllcyk7XG4gICAgdGhpcy5zZXRQYWdlTnVtYmVyKHRoaXMuY3VycmVudFBhZ2VOdW1iZXIpO1xuICB9XG5cbiAgc2V0UGFnZU51bWJlcihwYWdlTnVtYmVyOiBudW1iZXIsIHNlbGVjdEZpcnN0UmVjb3JkID0gZmFsc2UpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnJlbnRQYWdlTnVtYmVyID0gcGFnZU51bWJlcjtcbiAgICB0aGlzLmN1cnJlbnRQYWdlJC5uZXh0KHRoaXMuZW50cnlQYWdlc1t0aGlzLmN1cnJlbnRQYWdlTnVtYmVyXSk7XG4gICAgaWYgKHNlbGVjdEZpcnN0UmVjb3JkKSB7XG4gICAgICB0aGlzLnNldEZvY3VzT25TdGFydFRhYmxlSXRlbSA9IHRydWU7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiByZXR1cm5zIHNvcnQgZGlyZWN0aW9uXG4gICAqIEBwYXJhbSBjb2x1bW5Qcm9wZXJ0eSBjb2x1bW4gcHJvcGVydHlcbiAgICogQHBhcmFtIHNvcnRQcm9wZXJ0eSBjdXJyZW50IHNvcnQgcHJvcGVydHlcbiAgICogQHBhcmFtIGxpc3RTb3J0T3JkZXIgY3VycmVudCBzb3J0IG9yZGVyXG4gICAqL1xuICBzb3J0RGlyZWN0aW9uKFxuICAgIGNvbHVtblByb3BlcnR5OiBzdHJpbmcsXG4gICAgc29ydFByb3BlcnR5OiBrZXlvZiBUYWJsZUVudHJ5LFxuICAgIGxpc3RTb3J0T3JkZXI6IFNvcnRPcmRlclxuICApOiBzdHJpbmcge1xuICAgIGlmIChjb2x1bW5Qcm9wZXJ0eSA9PT0gc29ydFByb3BlcnR5KSB7XG4gICAgICByZXR1cm4gbGlzdFNvcnRPcmRlciA9PT0gU29ydE9yZGVyLkFTQyA/ICdhc2NlbmRpbmcnIDogJ2Rlc2NlbmRpbmcnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ25vbmUnO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogcmV0dXJucyB0YWJJbmRleCB2YWx1ZVxuICAgKiBAcGFyYW0gZm9jdXNlZFRhYmxlQ29sdW1uSW5kZXggc2F2ZWQgY29sdW1uIGluZGV4XG4gICAqIEBwYXJhbSBmb2N1c2VkVGFibGVSb3dJbmRleCBzYXZlZCByb3cgaW5kZXhcbiAgICogQHBhcmFtIGNvbHVtbkluZGV4IHNlbGVjdGVkIGNvbHVtbiBpbmRleFxuICAgKi9cbiAgdGFiSW5kZXhWYWx1ZShcbiAgICBmb2N1c2VkVGFibGVDb2x1bW5JbmRleDogbnVtYmVyLFxuICAgIGZvY3VzZWRUYWJsZVJvd0luZGV4OiBudW1iZXIsXG4gICAgY29sdW1uSW5kZXg6IG51bWJlclxuICApOiBudW1iZXIge1xuICAgIHJldHVybiBmb2N1c2VkVGFibGVDb2x1bW5JbmRleCA9PT0gY29sdW1uSW5kZXggJiYgZm9jdXNlZFRhYmxlUm93SW5kZXggPT09IDBcbiAgICAgID8gMFxuICAgICAgOiAtMTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIGNlbGwncyBmb2N1cyBXaGVuIGtleWJvYXJkIGtleSBpcyBwcmVzc2VkOlxuICAgKiBoYW5kbGVzIGFycm93VXAsIGFycm93RG93biwgYXJyb3dSaWdodCwgYXJyb3dMZWZ0LCBIb21lLCBFbmQsIEhvbWUrQ3RybCwgRW5kK0N0cmxcbiAgICogUGFnZURvd24sIFBhZ2VVcFxuICAgKiBAcGFyYW0gZXZlbnQgS2V5Ym9hcmRFdmVudFxuICAgKiBAcGFyYW0gY29sdW1uSW5kZXggc2VsZWN0ZWQgY29sdW1uIGluZGV4IG9mIHRhYmxlXG4gICAqIEBwYXJhbSByb3dJbmRleCBzZWxlY3RlZCByb3cgaW5kZXggb2YgdGFibGVcbiAgICovXG4gIG9uS2V5RG93bkNlbGwoXG4gICAgZXZlbnQ6IEtleWJvYXJkRXZlbnQsXG4gICAgY29sdW1uSW5kZXg6IG51bWJlcixcbiAgICByb3dJbmRleDogbnVtYmVyXG4gICk6IHZvaWQge1xuICAgIGxldCBrbm93bktleVByZXNzZWQgPSB0cnVlO1xuICAgIHN3aXRjaCAoZXZlbnQuY29kZSkge1xuICAgICAgY2FzZSBLZXlCb2FyZEV2ZW50Q29kZS5BUlJPV19MRUZUOlxuICAgICAgY2FzZSBLZXlCb2FyZEV2ZW50Q29kZS5BUlJPV19SSUdIVDpcbiAgICAgICAgdGhpcy5tb3ZlRm9jdXNMZWZ0UmlnaHQoZXZlbnQsIGNvbHVtbkluZGV4LCByb3dJbmRleCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBLZXlCb2FyZEV2ZW50Q29kZS5BUlJPV19ET1dOOlxuICAgICAgICB0aGlzLm1vdmVGb2N1c0Rvd24oY29sdW1uSW5kZXgsIHJvd0luZGV4KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEtleUJvYXJkRXZlbnRDb2RlLkFSUk9XX1VQOlxuICAgICAgICB0aGlzLm1vdmVGb2N1c1VwKGNvbHVtbkluZGV4LCByb3dJbmRleCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBLZXlCb2FyZEV2ZW50Q29kZS5IT01FOlxuICAgICAgICB0aGlzLm1vdmVGb2N1c0hvbWUoZXZlbnQsIHJvd0luZGV4KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEtleUJvYXJkRXZlbnRDb2RlLkVORDpcbiAgICAgICAgdGhpcy5tb3ZlRm9jdXNFbmQoZXZlbnQsIHJvd0luZGV4KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEtleUJvYXJkRXZlbnRDb2RlLlBBR0VfRE9XTjpcbiAgICAgICAgdGhpcy5oYW5kbGVQYWdlRG93bigpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgS2V5Qm9hcmRFdmVudENvZGUuUEFHRV9VUDpcbiAgICAgICAgdGhpcy5oYW5kbGVQYWdlVXAoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBrbm93bktleVByZXNzZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGtub3duS2V5UHJlc3NlZCkge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHNlbGVjdGVkIGNlbGwncyB0YWJJbmRleCAoY2hhbmdlIHRhYkluZGV4IHRvIDApLlxuICAgKiBpZiBjZWxsIGNvbnRhaW5zIGxpbmsoYnV0dG9uKSB0aGVuIHVwZGF0ZSBsaW5rXG4gICAqIEBwYXJhbSBjb2x1bW5JbmRleCBzZWxlY3RlZCBjb2x1bW4gaW5kZXggb2YgdGFibGVcbiAgICogQHBhcmFtIHJvd0luZGV4IHNlbGVjdGVkIHJvdyBpbmRleCBvZiB0YWJsZVxuICAgKi9cbiAgc2V0U2VsZWN0ZWRUYWJJbmRleChjb2x1bW5JbmRleDogbnVtYmVyLCByb3dJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbWF4Q29sdW1uID0gdGhpcy5jb2x1bW5zLmxlbmd0aCAtIDE7XG4gICAgY29uc3QgbWF4Um93ID0gdGhpcy50YWJsZS5uYXRpdmVFbGVtZW50LnJvd3MubGVuZ3RoIC0gMTtcbiAgICBpZiAoY29sdW1uSW5kZXggPiBtYXhDb2x1bW4gfHwgcm93SW5kZXggPiBtYXhSb3cpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVDZWxsVGFiSW5kZXgoXG4gICAgICB0aGlzLmZvY3VzZWRUYWJsZUNvbHVtbkluZGV4LFxuICAgICAgdGhpcy5mb2N1c2VkVGFibGVSb3dJbmRleFxuICAgICk7XG4gICAgdGhpcy5mb2N1c2VkVGFibGVDb2x1bW5JbmRleCA9IGNvbHVtbkluZGV4O1xuICAgIHRoaXMuZm9jdXNlZFRhYmxlUm93SW5kZXggPSByb3dJbmRleDtcbiAgICBjb25zdCB0YWJsZUNlbGwgPVxuICAgICAgdGhpcy50YWJsZS5uYXRpdmVFbGVtZW50LnJvd3Nbcm93SW5kZXhdLmNlbGxzW2NvbHVtbkluZGV4XTtcbiAgICBjb25zdCBjaGlsZEVsZW1lbnQgPSB0YWJsZUNlbGwuZmlyc3RDaGlsZDtcbiAgICBjb25zdCBlbGVtZW50VG9Gb2N1cyA9XG4gICAgICBjaGlsZEVsZW1lbnQudGFnTmFtZSA9PT0gJ0JVVFRPTicgPyBjaGlsZEVsZW1lbnQgOiB0YWJsZUNlbGw7XG4gICAgZWxlbWVudFRvRm9jdXMudGFiSW5kZXggPSAwO1xuICAgIGVsZW1lbnRUb0ZvY3VzLmZvY3VzKCk7XG4gIH1cbiAgcHJvdGVjdGVkIGhhbmRsZVBhZ2VVcCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5lbnRyeVBhZ2VzLmxlbmd0aCA+IDEgJiYgdGhpcy5jdXJyZW50UGFnZU51bWJlciA+IDApIHtcbiAgICAgIGNvbnN0IHBhZ2VOdW1iZXIgPSBNYXRoLm1heCgwLCB0aGlzLmN1cnJlbnRQYWdlTnVtYmVyIC0gMSk7XG4gICAgICB0aGlzLnNldFBhZ2VOdW1iZXIocGFnZU51bWJlciwgdHJ1ZSk7XG4gICAgfVxuICB9XG4gIHByb3RlY3RlZCBoYW5kbGVQYWdlRG93bigpOiB2b2lkIHtcbiAgICBjb25zdCBtYXhQYWdlID0gdGhpcy5lbnRyeVBhZ2VzLmxlbmd0aCAtIDE7XG4gICAgaWYgKHRoaXMuZW50cnlQYWdlcy5sZW5ndGggPiAxICYmIHRoaXMuY3VycmVudFBhZ2VOdW1iZXIgPCBtYXhQYWdlKSB7XG4gICAgICBjb25zdCBwYWdlTnVtYmVyID0gTWF0aC5taW4obWF4UGFnZSwgdGhpcy5jdXJyZW50UGFnZU51bWJlciArIDEpO1xuICAgICAgdGhpcy5zZXRQYWdlTnVtYmVyKHBhZ2VOdW1iZXIsIHRydWUpO1xuICAgIH1cbiAgfVxuICBwcm90ZWN0ZWQgbW92ZUZvY3VzRW5kKGV2ZW50OiBLZXlib2FyZEV2ZW50LCByb3dJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgbWF4Um93ID0gdGhpcy50YWJsZS5uYXRpdmVFbGVtZW50LnJvd3MubGVuZ3RoIC0gMTtcbiAgICByb3dJbmRleCA9IGV2ZW50LmN0cmxLZXkgPyBtYXhSb3cgOiByb3dJbmRleDtcbiAgICB0aGlzLnNldFNlbGVjdGVkVGFiSW5kZXgodGhpcy5jb2x1bW5zLmxlbmd0aCAtIDEsIHJvd0luZGV4KTtcbiAgfVxuICBwcm90ZWN0ZWQgbW92ZUZvY3VzSG9tZShldmVudDogS2V5Ym9hcmRFdmVudCwgcm93SW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgIHJvd0luZGV4ID0gZXZlbnQuY3RybEtleSA/IDAgOiByb3dJbmRleDtcbiAgICB0aGlzLnNldFNlbGVjdGVkVGFiSW5kZXgoMCwgcm93SW5kZXgpO1xuICB9XG4gIHByb3RlY3RlZCBtb3ZlRm9jdXNVcChjb2x1bW5JbmRleDogbnVtYmVyLCByb3dJbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgcm93SW5kZXggPSBNYXRoLm1heCgwLCByb3dJbmRleCAtIDEpO1xuICAgIHRoaXMuc2V0U2VsZWN0ZWRUYWJJbmRleChjb2x1bW5JbmRleCwgcm93SW5kZXgpO1xuICB9XG4gIHByb3RlY3RlZCBtb3ZlRm9jdXNEb3duKGNvbHVtbkluZGV4OiBudW1iZXIsIHJvd0luZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBtYXhSb3cgPSB0aGlzLnRhYmxlLm5hdGl2ZUVsZW1lbnQucm93cy5sZW5ndGggLSAxO1xuICAgIHJvd0luZGV4ID0gTWF0aC5taW4obWF4Um93LCByb3dJbmRleCArIDEpO1xuICAgIHRoaXMuc2V0U2VsZWN0ZWRUYWJJbmRleChjb2x1bW5JbmRleCwgcm93SW5kZXgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG1vdmVGb2N1c0xlZnRSaWdodChcbiAgICBldmVudDogS2V5Ym9hcmRFdmVudCxcbiAgICBjb2x1bW5JbmRleDogbnVtYmVyLFxuICAgIHJvd0luZGV4OiBudW1iZXJcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgbWF4Q29sdW1uID0gdGhpcy5jb2x1bW5zLmxlbmd0aCAtIDE7XG4gICAgaWYgKHRoaXMuaXNCYWNrTmF2aWdhdGlvbihldmVudCkpIHtcbiAgICAgIGNvbHVtbkluZGV4ID0gTWF0aC5tYXgoMCwgY29sdW1uSW5kZXggLSAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29sdW1uSW5kZXggPSBNYXRoLm1pbihtYXhDb2x1bW4sIGNvbHVtbkluZGV4ICsgMSk7XG4gICAgfVxuICAgIHRoaXMuc2V0U2VsZWN0ZWRUYWJJbmRleChjb2x1bW5JbmRleCwgcm93SW5kZXgpO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIHRhYmluZGV4IGFuZCBDU1MgZm9jdXMgY2xhc3MgZnJvbSBhIGNlbGwgaW4gdGhlIHRhYmxlLlxuICAgKiBAcGFyYW0gY29sdW1uSW5kZXggVGhlIGluZGV4IG9mIHRoZSBjb2x1bW4gY29udGFpbmluZyB0aGUgY2VsbC5cbiAgICogQHBhcmFtIHJvd0luZGV4IFRoZSBpbmRleCBvZiB0aGUgcm93IGNvbnRhaW5pbmcgdGhlIGNlbGwuXG4gICAqL1xuICBwcm90ZWN0ZWQgcmVtb3ZlQ2VsbFRhYkluZGV4KGNvbHVtbkluZGV4OiBudW1iZXIsIHJvd0luZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB0YWJsZUNlbGwgPVxuICAgICAgdGhpcy50YWJsZS5uYXRpdmVFbGVtZW50LnJvd3M/Lltyb3dJbmRleF0/LmNlbGxzPy5bY29sdW1uSW5kZXhdO1xuICAgIGNvbnN0IGNoaWxkRWxlbWVudCA9IHRhYmxlQ2VsbD8uZmlyc3RDaGlsZDtcbiAgICBpZiAoY2hpbGRFbGVtZW50KSB7XG4gICAgICBpZiAoY2hpbGRFbGVtZW50LnRhZ05hbWUgPT09ICdCVVRUT04nKSB7XG4gICAgICAgIGNoaWxkRWxlbWVudC50YWJJbmRleCA9IC0xO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRhYmxlQ2VsbCkge1xuICAgICAgICAgIHRhYmxlQ2VsbC50YWJJbmRleCA9IC0xO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBWZXJpZmllcyB3aGV0aGVyIHRoZSB1c2VyIG5hdmlnYXRlcyBmcm9tIGEgc3ViZ3JvdXAgYmFjayB0byB0aGUgbWFpbiBncm91cCBtZW51LlxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGV2ZW50IC0gS2V5Ym9hcmQgZXZlbnRcbiAgICogQHJldHVybnMge2Jvb2xlYW59IC0ndHJ1ZScgaWYgdGhlIHVzZXIgbmF2aWdhdGVzIGJhY2sgaW50byB0aGUgbWFpbiBncm91cCBtZW51LCBvdGhlcndpc2UgJ2ZhbHNlJy5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgcHJvdGVjdGVkIGlzQmFja05hdmlnYXRpb24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgKGV2ZW50LmNvZGUgPT09IEtleUJvYXJkRXZlbnRDb2RlLkFSUk9XX0xFRlQgJiYgdGhpcy5pc0xUUkRpcmVjdGlvbigpKSB8fFxuICAgICAgKGV2ZW50LmNvZGUgPT09IEtleUJvYXJkRXZlbnRDb2RlLkFSUk9XX1JJR0hUICYmIHRoaXMuaXNSVExEaXJlY3Rpb24oKSlcbiAgICApO1xuICB9XG4gIHByb3RlY3RlZCBpc0xUUkRpcmVjdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb25TZXJ2aWNlLmdldERpcmVjdGlvbigpID09PSBEaXJlY3Rpb25Nb2RlLkxUUjtcbiAgfVxuXG4gIHByb3RlY3RlZCBpc1JUTERpcmVjdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb25TZXJ2aWNlLmdldERpcmVjdGlvbigpID09PSBEaXJlY3Rpb25Nb2RlLlJUTDtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVFbnRyeVBhZ2VzKFxuICAgIGVudHJpZXM6IEFycmF5PFRhYmxlRW50cnk+XG4gICk6IEFycmF5PEFycmF5PFRhYmxlRW50cnk+PiB7XG4gICAgY29uc3QgbmV3RW50cnlQYWdlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW50cmllcy5sZW5ndGg7IGkgKz0gdGhpcy5wYWdlU2l6ZSkge1xuICAgICAgbmV3RW50cnlQYWdlcy5wdXNoKGVudHJpZXMuc2xpY2UoaSwgaSArIHRoaXMucGFnZVNpemUpKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0VudHJ5UGFnZXM7XG4gIH1cblxuICBwcm90ZWN0ZWQgc29ydEVudHJpZXMoXG4gICAgZW50cmllczogQXJyYXk8VGFibGVFbnRyeT4sXG4gICAgc29ydEJ5UHJvcGVydHk6IGtleW9mIFRhYmxlRW50cnksXG4gICAgc29ydE9yZGVyOiBTb3J0T3JkZXJcbiAgKTogQXJyYXk8VGFibGVFbnRyeT4ge1xuICAgIGlmIChlbnRyaWVzPy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBlbnRyaWVzLnNvcnQoXG4gICAgICAgIGl0ZW1zV2l0aChcbiAgICAgICAgICBwcm9wZXJ0eShcbiAgICAgICAgICAgIHNvcnRCeVByb3BlcnR5LFxuICAgICAgICAgICAgaXRlbXNXaXRoKFxuICAgICAgICAgICAgICBieU51bGxpc2goU29ydE9yZGVyLkRFU0MpLFxuICAgICAgICAgICAgICB3aGVuVHlwZShpc1N0cmluZywgYnlTdHJpbmcoc29ydE9yZGVyKSksXG4gICAgICAgICAgICAgIHdoZW5UeXBlKGlzTnVtYmVyLCBieUNvbXBhcmlzb24oc29ydE9yZGVyKSksXG4gICAgICAgICAgICAgIHdoZW5UeXBlKGlzQm9vbGVhbiwgYnlCb29sZWFuKHNvcnRPcmRlcikpXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwiY3gtYXNtLWN1c3RvbWVyLTM2MC10YWJsZS1oZWFkaW5nXCIgKm5nSWY9XCJoZWFkZXJUZXh0XCI+XG4gIDxoNCBjbGFzcz1cImN4LWFzbS1jdXN0b21lci0zNjAtdGFibGUtaGVhZGluZy10ZXh0XCI+XG4gICAge3sgaGVhZGVyVGV4dCB9fVxuICA8L2g0PlxuICA8ZGl2XG4gICAgW2F0dHIuYXJpYS1sYWJlbF09XCInYXNtQ3VzdG9tZXIzNjAucGFnaW5hdGlvbicgfCBjeFRyYW5zbGF0ZVwiXG4gICAgY2xhc3M9XCJjeC1hc20tY3VzdG9tZXItMzYwLXRhYmxlLWhlYWRpbmctcGFnZXNcIlxuICAgICpuZ0lmPVwiZW50cnlQYWdlc1wiXG4gID5cbiAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBwYWdlIG9mIGVudHJ5UGFnZXM7IGxldCBwYWdlTnVtYmVyID0gaW5kZXhcIj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgKm5nSWY9XCJlbnRyeVBhZ2VzLmxlbmd0aCA+IDFcIlxuICAgICAgICAoY2xpY2spPVwic2V0UGFnZU51bWJlcihwYWdlTnVtYmVyLCB0cnVlKVwiXG4gICAgICAgIGNsYXNzPVwiY3gtYXNtLWN1c3RvbWVyLTM2MC10YWJsZS1oZWFkaW5nLXBhZ2UgbGlua1wiXG4gICAgICAgIFtjbGFzcy5hY3RpdmVdPVwiY3VycmVudFBhZ2VOdW1iZXIgPT09IHBhZ2VOdW1iZXJcIlxuICAgICAgICBbYXR0ci5hcmlhLWN1cnJlbnRdPVwiY3VycmVudFBhZ2VOdW1iZXIgPT09IHBhZ2VOdW1iZXIgPyAncGFnZScgOiBudWxsXCJcbiAgICAgICAgW2Rpc2FibGVkXT1cImN1cnJlbnRQYWdlTnVtYmVyID09PSBwYWdlTnVtYmVyXCJcbiAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJcbiAgICAgICAgICAnYXNtQ3VzdG9tZXIzNjAucGFnZScgfCBjeFRyYW5zbGF0ZTogeyBudW1iZXI6IHBhZ2VOdW1iZXIgKyAxIH1cbiAgICAgICAgXCJcbiAgICAgID5cbiAgICAgICAge3sgcGFnZU51bWJlciArIDEgfX1cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvbmctY29udGFpbmVyPlxuICA8L2Rpdj5cbjwvZGl2PlxuPGhyIGNsYXNzPVwiY3gtYXNtLWN1c3RvbWVyLTM2MC10YWJsZS1zZXBhcmF0b3JcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuPG5nLWNvbnRhaW5lciAqbmdJZj1cImVudHJ5UGFnZXM/Lmxlbmd0aCAmJiBjb2x1bW5zPy5sZW5ndGhcIj5cbiAgPHRhYmxlXG4gICAgI3RhYmxlXG4gICAgY2xhc3M9XCJjeC1hc20tY3VzdG9tZXItMzYwLXRhYmxlXCJcbiAgICByb2xlPVwiZ3JpZFwiXG4gICAgW2F0dHIuYXJpYS1yb3djb3VudF09XCJlbnRyaWVzLmxlbmd0aFwiXG4gICAgW2F0dHIuYXJpYS1jb2xjb3VudF09XCJjb2x1bW5zLmxlbmd0aFwiXG4gICAgW2F0dHIuZGF0YS1wZXItcGFnZV09XCJwYWdlU2l6ZVwiXG4gID5cbiAgICA8Y2FwdGlvbiBjbGFzcz1cImN4LXZpc3VhbGx5LWhpZGRlblwiPlxuICAgICAge3tcbiAgICAgICAgaGVhZGVyVGV4dFxuICAgICAgfX1cbiAgICA8L2NhcHRpb24+XG4gICAgPHRoZWFkPlxuICAgICAgPHRyIGNsYXNzPVwiY3gtYXNtLWN1c3RvbWVyLTM2MC10YWJsZS1yb3ctaGVhZGVyXCIgcm9sZT1cInJvd1wiPlxuICAgICAgICA8dGhcbiAgICAgICAgICBjbGFzcz1cImN4LWFzbS1jdXN0b21lci0zNjAtdGFibGUtaGVhZGVyXCJcbiAgICAgICAgICByb2xlPVwiY29sdW1uaGVhZGVyXCJcbiAgICAgICAgICAqbmdGb3I9XCJsZXQgY29sdW1uIG9mIGNvbHVtbnM7IGxldCBjb2x1bW5JbmRleCA9IGluZGV4XCJcbiAgICAgICAgICBbY2xhc3MuYWN0aXZlXT1cInNvcnRQcm9wZXJ0eSA9PT0gY29sdW1uLnByb3BlcnR5XCJcbiAgICAgICAgICBbY2xhc3MuYXNjXT1cImxpc3RTb3J0T3JkZXIgPT09IFNvcnRPcmRlci5BU0NcIlxuICAgICAgICAgIFtjbGFzcy5kZXNjXT1cImxpc3RTb3J0T3JkZXIgIT09IFNvcnRPcmRlci5BU0NcIlxuICAgICAgICAgIFthdHRyLmFyaWEtc29ydF09XCJcbiAgICAgICAgICAgIHNvcnREaXJlY3Rpb24gfCBjeEFyZ3M6IGNvbHVtbi5wcm9wZXJ0eTpzb3J0UHJvcGVydHk6bGlzdFNvcnRPcmRlclxuICAgICAgICAgIFwiXG4gICAgICAgICAgW25nQ2xhc3NdPVwie1xuICAgICAgICAgICAgJ3RleHQtc3RhcnQnOlxuICAgICAgICAgICAgICBjb2x1bW4uaGVhZGVyVGV4dEFsaWduID09PSBDdXN0b21lclRhYmxlVGV4dEFsaWduLlNUQVJULFxuICAgICAgICAgICAgJ3RleHQtY2VudGVyJzpcbiAgICAgICAgICAgICAgY29sdW1uLmhlYWRlclRleHRBbGlnbiA9PT0gQ3VzdG9tZXJUYWJsZVRleHRBbGlnbi5DRU5URVIsXG4gICAgICAgICAgICAndGV4dC1lbmQnOiBjb2x1bW4uaGVhZGVyVGV4dEFsaWduID09PSBDdXN0b21lclRhYmxlVGV4dEFsaWduLkVORFxuICAgICAgICAgIH1cIlxuICAgICAgICAgIChjbGljayk9XCJzZXRTZWxlY3RlZFRhYkluZGV4KGNvbHVtbkluZGV4LCAwKVwiXG4gICAgICAgID5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBbdGFiaW5kZXhdPVwiXG4gICAgICAgICAgICAgIHRhYkluZGV4VmFsdWVcbiAgICAgICAgICAgICAgICB8IGN4QXJnc1xuICAgICAgICAgICAgICAgICAgOiBmb2N1c2VkVGFibGVDb2x1bW5JbmRleFxuICAgICAgICAgICAgICAgICAgOiBmb2N1c2VkVGFibGVSb3dJbmRleFxuICAgICAgICAgICAgICAgICAgOiBjb2x1bW5JbmRleFxuICAgICAgICAgICAgXCJcbiAgICAgICAgICAgIGNsYXNzPVwibGlua1wiXG4gICAgICAgICAgICAoY2xpY2spPVwic29ydEVudHJpZXNBbmRVcGRhdGVQYWdlcyhjb2x1bW4ucHJvcGVydHkpXCJcbiAgICAgICAgICAgIChrZXlkb3duKT1cIm9uS2V5RG93bkNlbGwoJGV2ZW50LCBjb2x1bW5JbmRleCwgMClcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiY29sdW1uPy5pMThuVGV4dEtleVwiPnt7XG4gICAgICAgICAgICAgIGNvbHVtbi5pMThuVGV4dEtleSB8IGN4VHJhbnNsYXRlXG4gICAgICAgICAgICB9fTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiIWNvbHVtbj8uaTE4blRleHRLZXlcIj57eyBjb2x1bW4udGV4dCB9fTwvc3Bhbj5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC90aD5cbiAgICAgIDwvdHI+XG4gICAgPC90aGVhZD5cbiAgICA8dGJvZHk+XG4gICAgICA8dHJcbiAgICAgICAgY2xhc3M9XCJjeC1hc20tY3VzdG9tZXItMzYwLXRhYmxlLXJvd1wiXG4gICAgICAgIHJvbGU9XCJyb3dcIlxuICAgICAgICAqbmdGb3I9XCJsZXQgZW50cnkgb2YgY3VycmVudFBhZ2UkIHwgYXN5bmM7IGxldCByb3dJbmRleCA9IGluZGV4XCJcbiAgICAgID5cbiAgICAgICAgPHRkXG4gICAgICAgICAgcm9sZT1cImNlbGxcIlxuICAgICAgICAgIHRhYmluZGV4PVwiLTFcIlxuICAgICAgICAgICpuZ0Zvcj1cImxldCBjb2x1bW4gb2YgY29sdW1uczsgbGV0IGNvbHVtbkluZGV4ID0gaW5kZXhcIlxuICAgICAgICAgIChrZXlkb3duKT1cIm9uS2V5RG93bkNlbGwoJGV2ZW50LCBjb2x1bW5JbmRleCwgcm93SW5kZXggKyAxKVwiXG4gICAgICAgICAgKGNsaWNrKT1cInNldFNlbGVjdGVkVGFiSW5kZXgoY29sdW1uSW5kZXgsIHJvd0luZGV4ICsgMSlcIlxuICAgICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICAgICd0ZXh0LXN0YXJ0JzogY29sdW1uLnRleHRBbGlnbiA9PT0gQ3VzdG9tZXJUYWJsZVRleHRBbGlnbi5TVEFSVCxcbiAgICAgICAgICAgICd0ZXh0LWNlbnRlcic6IGNvbHVtbi50ZXh0QWxpZ24gPT09IEN1c3RvbWVyVGFibGVUZXh0QWxpZ24uQ0VOVEVSLFxuICAgICAgICAgICAgJ3RleHQtZW5kJzogY29sdW1uLnRleHRBbGlnbiA9PT0gQ3VzdG9tZXJUYWJsZVRleHRBbGlnbi5FTkRcbiAgICAgICAgICB9XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgICpuZ0lmPVwiY29sdW1uLm5hdmlnYXRhYmxlOyB0aGVuIGxpbmtUZW1wbGF0ZTsgZWxzZSBzdGFyUmF0aW5nXCJcbiAgICAgICAgICA+PC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICA8bmctdGVtcGxhdGUgI2xpbmtUZW1wbGF0ZT5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdGFiaW5kZXg9XCItMVwiXG4gICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiZW50cnlbY29sdW1uLnByb3BlcnR5XVwiXG4gICAgICAgICAgICAgIChjbGljayk9XCJzZWxlY3RJdGVtLmVtaXQoZW50cnkpXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJjeC1hc20tY3VzdG9tZXItMzYwLXRhYmxlLWxpbmsgbGlua1wiXG4gICAgICAgICAgICAgIFt0aXRsZV09XCJcbiAgICAgICAgICAgICAgICBlbnRyeVtjb2x1bW4ucHJvcGVydHldIHx8XG4gICAgICAgICAgICAgICAgKCdhc21DdXN0b21lcjM2MC5lbXB0eUNlbGxWYWx1ZScgfCBjeFRyYW5zbGF0ZSlcbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3tcbiAgICAgICAgICAgICAgICBlbnRyeVtjb2x1bW4ucHJvcGVydHldIHx8XG4gICAgICAgICAgICAgICAgICAoJ2FzbUN1c3RvbWVyMzYwLmVtcHR5Q2VsbFZhbHVlJyB8IGN4VHJhbnNsYXRlKVxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cblxuICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjc3RhclJhdGluZz5cbiAgICAgICAgICAgIDxjeC1zdGFyLXJhdGluZ1xuICAgICAgICAgICAgICB0YWJpbmRleD1cIi0xXCJcbiAgICAgICAgICAgICAgKm5nSWY9XCJjb2x1bW4ucmVuZGVyQXNTdGFyUmF0aW5nOyBlbHNlIGRhdGVDZWxsXCJcbiAgICAgICAgICAgICAgW3JhdGluZ109XCJlbnRyeVtjb2x1bW4ucHJvcGVydHldXCJcbiAgICAgICAgICAgID48L2N4LXN0YXItcmF0aW5nPlxuICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG5cbiAgICAgICAgICA8bmctdGVtcGxhdGUgI2RhdGVDZWxsPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAqbmdJZj1cImNvbHVtbj8uaXNEYXRlICYmIGVudHJ5W2NvbHVtbi5wcm9wZXJ0eV07IGVsc2UgdGFibGVDZWxsXCJcbiAgICAgICAgICAgICAgPjxzcGFuPnt7XG4gICAgICAgICAgICAgICAgZW50cnlbY29sdW1uLnByb3BlcnR5XVxuICAgICAgICAgICAgICAgICAgfCBjeERhdGU6IGFzbUN1c3RvbWVyMzYwQ29uZmlnPy5hc21DdXN0b21lcjM2MD8uZGF0ZVRpbWVGb3JtYXRcbiAgICAgICAgICAgICAgfX08L3NwYW4+PC9uZy1jb250YWluZXJcbiAgICAgICAgICAgID5cbiAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuXG4gICAgICAgICAgPG5nLXRlbXBsYXRlICN0YWJsZUNlbGw+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgICAgID48c3BhblxuICAgICAgICAgICAgICAgIFt0aXRsZV09XCJcbiAgICAgICAgICAgICAgICAgIGVudHJ5W2NvbHVtbi5wcm9wZXJ0eV0gfHxcbiAgICAgICAgICAgICAgICAgICgnYXNtQ3VzdG9tZXIzNjAuZW1wdHlDZWxsVmFsdWUnIHwgY3hUcmFuc2xhdGUpXG4gICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICA+e3tcbiAgICAgICAgICAgICAgICAgIGVudHJ5W2NvbHVtbi5wcm9wZXJ0eV0gfHxcbiAgICAgICAgICAgICAgICAgICAgKCdhc21DdXN0b21lcjM2MC5lbXB0eUNlbGxWYWx1ZScgfCBjeFRyYW5zbGF0ZSlcbiAgICAgICAgICAgICAgICB9fTwvc3BhblxuICAgICAgICAgICAgICA+PC9uZy1jb250YWluZXJcbiAgICAgICAgICAgID5cbiAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8L3RkPlxuICAgICAgPC90cj5cbiAgICA8L3Rib2R5PlxuICA8L3RhYmxlPlxuPC9uZy1jb250YWluZXI+XG48ZGl2IGNsYXNzPVwiY3gtYXNtLWN1c3RvbWVyLTM2MC10YWJsZS1lbXB0eVwiICpuZ0lmPVwiIWVudHJ5UGFnZXM/Lmxlbmd0aFwiPlxuICB7eyBlbXB0eVN0YXRlVGV4dCB9fVxuPC9kaXY+XG4iXX0=